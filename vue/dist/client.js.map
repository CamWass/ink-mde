{"version":3,"file":"client.js","sources":["../src/InkMde.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { ink, renderToString } from 'ink-mde'\nimport type * as Ink from 'ink-mde'\nimport { type PropType, defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'InkMde',\n  props: {\n    modelValue: {\n      type: String,\n    },\n    options: {\n      type: Object as PropType<Ink.Options>,\n    },\n  },\n  emits: ['update:modelValue'],\n  data() {\n    return {\n      html: '',\n      instance: undefined,\n    } as { html: string, instance?: Ink.Instance }\n  },\n  watch: {\n    modelValue(value) {\n      if (this.instance?.getDoc() !== value) {\n        this.instance?.update(value)\n      }\n    },\n    options: {\n      deep: true,\n      handler(newValue, _oldValue) {\n        this.instance?.reconfigure(newValue)\n      },\n    },\n  },\n  created() {\n    if (import.meta.env.VITE_SSR) {\n      this.html = renderToString(this.options)\n    }\n  },\n  mounted() {\n    this.tryInit()\n  },\n  updated() {\n    this.tryInit()\n  },\n  methods: {\n    tryInit() {\n      if (this.$refs.ink && !this.instance) {\n        this.instance = ink(this.$refs.ink as HTMLElement, {\n          ...this.options,\n          doc: this.modelValue,\n          hooks: {\n            ...this.options?.hooks,\n            afterUpdate: (doc: string) => {\n              this.$emit('update:modelValue', doc)\n\n              if (this.options?.hooks?.afterUpdate) {\n                this.options.hooks.afterUpdate(doc)\n              }\n            },\n          },\n        })\n\n        // @ts-expect-error Todo: Fix type recognition on $refs.\n        this.$refs.ink.addEventListener('input', (event: InputEvent) => {\n          event.stopPropagation()\n        })\n      }\n    },\n  },\n})\n</script>\n\n<template>\n  <div ref=\"ink\" v-html=\"html\" />\n</template>\n"],"names":["_sfc_main","defineComponent","value","_a","_b","newValue","_oldValue","define_import_meta_env_default","renderToString","ink","doc","event","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock"],"mappings":";;;AAKA,MAAAA,IAAeC,EAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,OAAO;AAAA,IACL,YAAY;AAAA,MACV,MAAM;AAAA,IACR;AAAA,IACA,SAAS;AAAA,MACP,MAAM;AAAA,IACR;AAAA,EACF;AAAA,EACA,OAAO,CAAC,mBAAmB;AAAA,EAC3B,OAAO;AACE,WAAA;AAAA,MACL,MAAM;AAAA,MACN,UAAU;AAAA,IAAA;AAAA,EAEd;AAAA,EACA,OAAO;AAAA,IACL,WAAWC,GAAO;;AAChB,QAAIC,IAAA,KAAK,aAAL,gBAAAA,EAAe,cAAaD,OACzBE,IAAA,KAAA,aAAA,QAAAA,EAAU,OAAOF;AAAA,IAE1B;AAAA,IACA,SAAS;AAAA,MACP,MAAM;AAAA,MACN,QAAQG,GAAUC,GAAW;;AACtB,SAAAH,IAAA,KAAA,aAAA,QAAAA,EAAU,YAAYE;AAAA,MAC7B;AAAA,IACF;AAAA,EACF;AAAA,EACA,UAAU;AACJ,IAAAE,EAAgB,aACb,KAAA,OAAOC,EAAe,KAAK,OAAO;AAAA,EAE3C;AAAA,EACA,UAAU;AACR,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,UAAU;AACR,SAAK,QAAQ;AAAA,EACf;AAAA,EACA,SAAS;AAAA,IACP,UAAU;;AACR,MAAI,KAAK,MAAM,OAAO,CAAC,KAAK,aAC1B,KAAK,WAAWC,EAAI,KAAK,MAAM,KAAoB;AAAA,QACjD,GAAG,KAAK;AAAA,QACR,KAAK,KAAK;AAAA,QACV,OAAO;AAAA,UACL,IAAGN,IAAA,KAAK,YAAL,gBAAAA,EAAc;AAAA,UACjB,aAAa,CAACO,MAAgB;;AACvB,iBAAA,MAAM,qBAAqBA,CAAG,IAE/BN,KAAAD,IAAA,KAAK,YAAL,gBAAAA,EAAc,UAAd,QAAAC,EAAqB,eAClB,KAAA,QAAQ,MAAM,YAAYM,CAAG;AAAA,UAEtC;AAAA,QACF;AAAA,MAAA,CACD,GAGD,KAAK,MAAM,IAAI,iBAAiB,SAAS,CAACC,MAAsB;AAC9D,QAAAA,EAAM,gBAAgB;AAAA,MAAA,CACvB;AAAA,IAEL;AAAA,EACF;AACF,CAAC;;;;;;SAIUC,EAAKC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAA;AAAC,SAAAC,EAAA,GAAYC,EAAA,OAAA;AAAA,IAAA,KAAA;AAAA;;;;"}