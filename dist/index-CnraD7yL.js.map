{"version":3,"file":"index-CnraD7yL.js","sources":["../src/constants.ts","../src/api/destroy.ts","../src/api/focus.ts","../types/values.ts","../src/editor/adapters/selections.ts","../src/api/format.ts","../src/api/get_doc.ts","../src/api/selections.ts","../src/api/insert.ts","../src/utils/inspect.ts","../src/utils/options.ts","../src/markdown.ts","../src/ui/utils.ts","../src/editor/extensions/appearance.ts","../src/extensions.ts","../src/editor/extensions/blockquote.ts","../src/editor/extensions/code.ts","../src/editor/extensions/ink.ts","../src/editor/extensions/line_wrapping.ts","../src/editor/extensions/theme.ts","../src/editor/state.ts","../src/editor/view.ts","../src/utils/merge.ts","../src/api/load.ts","../src/api/options.ts","../src/api/reconfigure.ts","../src/api/select.ts","../src/api/update.ts","../src/api/wrap.ts","../src/utils/awaitable.ts","../src/instance.ts","../src/utils/queue.ts","../src/store.ts","../src/utils/readability.ts","../src/ui/components/details/index.tsx","../src/ui/components/drop_zone/index.tsx","../src/ui/components/editor/index.tsx","../src/ui/components/button/index.tsx","../src/ui/components/toolbar/index.tsx","../src/ui/components/root/styles.tsx","../src/ui/components/root/index.tsx","../src/ui/app.tsx","../src/index.tsx"],"sourcesContent":["export const HYDRATION_MARKER = 'data-ink-mde-ssr-hydration-marker'\nexport const HYDRATION_MARKER_SELECTOR = `[${HYDRATION_MARKER}]`\n\nexport const getHydrationMarkerProps = () => {\n  if (import.meta.env.VITE_SSR) {\n    return {\n      [HYDRATION_MARKER]: true,\n    }\n  }\n\n  return {}\n}\n","import type InkInternal from '/types/internal'\n\nexport const destroy = ([state]: InkInternal.Store) => {\n  const { editor } = state()\n\n  editor.destroy()\n}\n","import type InkInternal from '/types/internal'\n\nexport const focus = ([state]: InkInternal.Store) => {\n  const { editor } = state()\n\n  if (!editor.hasFocus) {\n    editor.focus()\n  }\n}\n","export enum Appearance {\n  Auto = 'auto',\n  Dark = 'dark',\n  Light = 'light',\n}\n\nexport enum Extensions {\n  Appearance = 'appearance',\n  Attribution = 'attribution',\n  Autocomplete = 'autocomplete',\n  Images = 'images',\n  ReadOnly = 'readonly',\n  Spellcheck = 'spellcheck',\n  Vim = 'vim',\n}\n\nexport enum Markup {\n  Bold = 'bold',\n  Code = 'code',\n  CodeBlock = 'code_block',\n  Heading = 'heading',\n  Image = 'image',\n  Italic = 'italic',\n  Link = 'link',\n  List = 'list',\n  OrderedList = 'ordered_list',\n  Quote = 'quote',\n  TaskList = 'task_list',\n}\n\nexport enum PluginType {\n  Completion = 'completion',\n  Default = 'default',\n  Grammar = 'grammar',\n  Language = 'language',\n}\n\nexport enum Selection {\n  End = 'end',\n  Start = 'start',\n}\n\nexport const appearanceTypes = {\n  auto: 'auto',\n  dark: 'dark',\n  light: 'light',\n}\n\nexport const pluginTypes = {\n  completion: 'completion',\n  default: 'default',\n  grammar: 'grammar',\n  language: 'language',\n} as const\n","import { EditorSelection, SelectionRange } from '@codemirror/state'\nimport type * as Ink from '/types/ink'\n\nexport const toCodeMirror = (selections: Ink.Editor.Selection[]) => {\n  const ranges = selections.map((selection): SelectionRange => {\n    const range = SelectionRange.fromJSON({ anchor: selection.start, head: selection.end })\n\n    return range\n  })\n\n  return EditorSelection.create(ranges)\n}\n\nexport const toInk = (selection: EditorSelection) => {\n  const selections = selection.ranges.map((range: SelectionRange): Ink.Editor.Selection => {\n    return {\n      end: range.anchor < range.head ? range.head : range.anchor,\n      start: range.head < range.anchor ? range.head : range.anchor,\n    }\n  })\n\n  return selections\n}\n","import { syntaxTree } from '@codemirror/language'\nimport type { NodeType } from '@lezer/common'\nimport type * as Ink from '/types/ink'\nimport type InkInternal from '/types/internal'\nimport * as InkValues from '/types/values'\nimport { toInk } from '../editor/adapters/selections'\n\n// Todo:\n// - [ ] Handle special scenarios (e.g. headings in quote blocks).\n// - [ ] Handle multiline selections (e.g. bolding multiple lines worth of content).\n\ninterface ChangeDetails {\n  editor: InkInternal.Editor,\n  formatDefinition: FormatDefinition,\n  selection: Ink.Editor.Selection,\n  node?: NodeDefinition,\n}\n\ninterface FormatDefinition {\n  block: boolean,\n  line: boolean,\n  multiline: boolean,\n  nodes: string[],\n  prefix: string,\n  prefixStates: string[],\n  suffix: string,\n}\n\ntype Formats = {\n  [K in Ink.Values.Markup]: FormatDefinition\n}\n\ninterface NodeDefinition {\n  type: NodeType,\n  from: number,\n  to: number,\n}\n\nconst defineConfig = (overrides: Partial<FormatDefinition>): FormatDefinition => {\n  const defaults = {\n    block: false,\n    line: false,\n    multiline: false,\n    nodes: [],\n    prefix: '',\n    prefixStates: [],\n    suffix: '',\n  }\n\n  return { ...defaults, ...overrides }\n}\n\nexport const formatting: Formats = {\n  [InkValues.Markup.Bold]: defineConfig({\n    nodes: ['StrongEmphasis'],\n    prefix: '**',\n    suffix: '**',\n  }),\n  [InkValues.Markup.Code]: defineConfig({\n    nodes: ['InlineCode'],\n    prefix: '`',\n    suffix: '`',\n  }),\n  [InkValues.Markup.CodeBlock]: defineConfig({\n    block: true,\n    nodes: ['FencedCode'],\n    prefix: '```\\n',\n    suffix: '\\n```',\n  }),\n  [InkValues.Markup.Heading]: defineConfig({\n    multiline: true,\n    nodes: ['ATXHeading1', 'ATXHeading2', 'ATXHeading3', 'ATXHeading4', 'ATXHeading5', 'ATXHeading6'],\n    prefix: '# ',\n    prefixStates: ['# ', '## ', '### ', '#### ', '##### ', '###### ', ''],\n  }),\n  [InkValues.Markup.Image]: defineConfig({\n    nodes: ['Image'],\n    prefix: '![](',\n    suffix: ')',\n  }),\n  [InkValues.Markup.Italic]: defineConfig({\n    nodes: ['Emphasis'],\n    prefix: '*',\n    suffix: '*',\n  }),\n  [InkValues.Markup.Link]: defineConfig({\n    nodes: ['Link'],\n    prefix: '[](',\n    suffix: ')',\n  }),\n  [InkValues.Markup.OrderedList]: defineConfig({\n    line: true,\n    multiline: true,\n    nodes: ['OrderedList'],\n    prefix: '1. ',\n  }),\n  [InkValues.Markup.Quote]: defineConfig({\n    line: true,\n    multiline: true,\n    nodes: ['Blockquote'],\n    prefix: '> ',\n  }),\n  [InkValues.Markup.TaskList]: defineConfig({\n    line: true,\n    multiline: true,\n    nodes: ['BulletList'],\n    prefix: '- [ ] ',\n  }),\n  [InkValues.Markup.List]: defineConfig({\n    line: true,\n    multiline: true,\n    nodes: ['BulletList'],\n    prefix: '- ',\n  }),\n}\n\nconst splitSelectionByLines = ({ editor, selection }: ChangeDetails) => {\n  let position = selection.start\n  const selections: Ink.Editor.Selection[] = []\n\n  while (position <= selection.end) {\n    const line = editor.lineBlockAt(position)\n    const start = Math.max(selection.start, line.from)\n    const end = Math.min(selection.end, line.to)\n\n    selections.push({ start, end })\n\n    position = line.to + 1\n  }\n\n  return selections\n}\n\nconst getSelection = ({ editor, formatDefinition, selection }: Partial<ChangeDetails>) => {\n  if (!editor || !formatDefinition) return selection || { start: 0, end: 0 }\n\n  // Todo: expose an actual API for getting the current selection or fallback\n  const initialSelection = selection || toInk(editor.state.selection).pop() || { start: 0, end: 0 }\n\n  if (formatDefinition.block || formatDefinition.line || formatDefinition.multiline) {\n    const start = editor.lineBlockAt(initialSelection.start).from\n    const end = editor.lineBlockAt(initialSelection.end).to\n\n    return { start, end }\n  }\n\n  const start = editor.state.wordAt(initialSelection.start)?.from || initialSelection.start\n  const end = editor.state.wordAt(initialSelection.end)?.to || initialSelection.end\n\n  return { start, end }\n}\n\nconst getText = (changeDetails: ChangeDetails) => {\n  return changeDetails.editor.state.sliceDoc(changeDetails.selection.start, changeDetails.selection.end)\n}\n\nconst getNode = (editor: InkInternal.Editor, definition: FormatDefinition, selection: Ink.Editor.Selection) => {\n  const selectionNodes = getNodes(editor, selection)\n\n  return selectionNodes.find(({ type }) => definition.nodes.includes(type.name))\n}\n\nconst getNodes = (editor: InkInternal.Editor, selection: Ink.Editor.Selection) => {\n  const nodeDefinitions: NodeDefinition[] = []\n\n  syntaxTree(editor.state).iterate({\n    from: selection.start,\n    to: selection.end,\n    enter: ({ type, from, to }) => {\n      nodeDefinitions.push({ type, from, to })\n    },\n  })\n\n  return nodeDefinitions\n}\n\nconst unformat = (changeDetails: ChangeDetails) => {\n  const text = getText(changeDetails)\n  const sliceStart = changeDetails.formatDefinition.prefix.length\n  const sliceEnd = changeDetails.formatDefinition.suffix.length * -1 || text.length\n  const unformatted = text.slice(sliceStart, sliceEnd)\n\n  return [{ from: changeDetails.selection.start, to: changeDetails.selection.end, insert: unformatted }]\n}\n\nconst formatBlock = (changeDetails: ChangeDetails) => {\n  if (changeDetails.node) {\n    const start = changeDetails.node.from\n    const end = changeDetails.node.to\n\n    return unformat({ ...changeDetails, selection: { start, end } })\n  } else {\n    const before = changeDetails.formatDefinition.prefix\n    const after = changeDetails.formatDefinition.suffix\n\n    const changes = [\n      { from: changeDetails.selection.start, insert: before },\n      { from: changeDetails.selection.end, insert: after },\n    ]\n\n    return changes\n  }\n}\n\nconst formatMultiline = (changeDetails: ChangeDetails) => {\n  const selections = splitSelectionByLines(changeDetails)\n  const changes = <{ from: number, to?: number, insert: string }[]>[]\n\n  selections.forEach((selection) => {\n    const lineChanges = formatLine({ ...changeDetails, selection })\n\n    changes.push(...lineChanges)\n  })\n\n  return changes\n}\n\nconst formatLine = (changeDetails: ChangeDetails) => {\n  const hasPrefixStates = changeDetails.formatDefinition.prefixStates.length > 0\n  const text = getText(changeDetails)\n\n  if (changeDetails.node && hasPrefixStates) {\n    const prefixState = changeDetails.formatDefinition.prefixStates.find(prefix => text.startsWith(prefix))\n\n    if (prefixState) {\n      const prefixStateIndex = changeDetails.formatDefinition.prefixStates.indexOf(prefixState)\n      const nextPrefixState = changeDetails.formatDefinition.prefixStates[prefixStateIndex + 1]\n      const updatedText = text.replace(new RegExp(`^${prefixState}`), nextPrefixState)\n\n      return [{ from: changeDetails.selection.start, to: changeDetails.selection.end, insert: updatedText }]\n    }\n  } else if (changeDetails.node && text.startsWith(changeDetails.formatDefinition.prefix)) {\n    return unformat(changeDetails)\n  }\n\n  return [{ from: changeDetails.selection.start, insert: changeDetails.formatDefinition.prefix }]\n}\n\nconst formatInline = (changeDetails: ChangeDetails) => {\n  if (changeDetails.node) {\n    const start = changeDetails.node.from\n    const end = changeDetails.node.to\n\n    return unformat({ ...changeDetails, selection: { start, end } })\n  } else {\n    const { formatDefinition, selection } = changeDetails\n    const before = Array.isArray(formatDefinition.prefix) ? formatDefinition.prefix[0] : formatDefinition.prefix\n    const after = formatDefinition.suffix\n\n    return [\n      { from: selection.start, insert: before },\n      { from: selection.end, insert: after },\n    ]\n  }\n}\n\nconst getChanges = (changeDetails: ChangeDetails) => {\n  if (changeDetails.formatDefinition.block) {\n    return formatBlock(changeDetails)\n  } else if (changeDetails.formatDefinition.multiline) {\n    return formatMultiline(changeDetails)\n  } else if (changeDetails.formatDefinition.line) {\n    return formatLine(changeDetails)\n  }\n\n  return formatInline(changeDetails)\n}\n\nexport const format = ([state]: InkInternal.Store, formatType: Ink.EnumString<Ink.Values.Markup>, { selection: maybeSelection }: Ink.Instance.FormatOptions = {}) => {\n  const { editor } = state()\n  const formatDefinition = formatting[formatType]\n  const selection = getSelection({ editor, formatDefinition, selection: maybeSelection })\n  const node = getNode(editor, formatDefinition, selection)\n  const changeDetails: ChangeDetails = {\n    editor,\n    formatDefinition,\n    node,\n    selection,\n  }\n  const changes = getChanges(changeDetails)\n  const offset = changes.reduce((total, change: { from: number, insert: string, to?: number }) => {\n    const offset = change.insert.length - ((change.to || change.from) - change.from)\n\n    return total + offset\n  }, 0)\n\n  const updates = state().editor.state.update({ changes, selection: { head: selection.start, anchor: selection.end + offset } })\n\n  state().editor.dispatch(updates)\n}\n","import type InkInternal from '/types/internal'\n\nexport const getDoc = ([state]: InkInternal.Store) => {\n  const { editor } = state()\n\n  return editor.state.sliceDoc()\n}\n","import type * as Ink from '/types/ink'\nimport type InkInternal from '/types/internal'\nimport { toInk } from '../editor/adapters/selections'\n\nexport const selections = ([state]: InkInternal.Store): Ink.Editor.Selection[] => {\n  const { editor } = state()\n\n  return toInk(editor.state.selection)\n}\n","import type * as Ink from '/types/ink'\nimport type InkInternal from '/types/internal'\nimport { selections } from './selections'\n\nexport const insert = ([state, setState]: InkInternal.Store, text: string, selection?: Ink.Editor.Selection, updateSelection = false) => {\n  const { editor } = state()\n\n  let start = selection?.start\n  let end = selection?.end || selection?.start\n\n  if (typeof start === 'undefined') {\n    const current = selections([state, setState]).pop() as Ink.Editor.Selection\n\n    start = current.start\n    end = current.end\n  }\n\n  const updates = { changes: { from: start, to: end, insert: text } }\n\n  if (updateSelection) {\n    const anchor = start === end ? start + text.length : start\n    const head = start === end ? start + text.length : start + text.length\n\n    Object.assign(updates, { selection: { anchor, head } })\n  }\n\n  editor.dispatch(\n    editor.state.update(updates),\n  )\n}\n","export type ObjectTypeKey = keyof ObjectTypes\nexport type ObjectTypeValue = ObjectTypes[ObjectTypeKey]\nexport type ObjectTypes = typeof objectTypes\nexport type Thenable<T> = T extends { then: (...args: any[]) => any } ? T : never\n\nexport const objectTypes = {\n  array: '[object Array]',\n  asyncFunction: '[object AsyncFunction]',\n  boolean: '[object Boolean]',\n  function: '[object Function]',\n  null: '[object Null]',\n  number: '[object Number]',\n  object: '[object Object]',\n  promise: '[object Promise]',\n  string: '[object String]',\n  symbol: '[object Symbol]',\n  undefined: '[object Undefined]',\n  window: '[object Window]',\n} as const\n\nexport const is = <T>(type: ObjectTypeValue, object: T): object is T => {\n  return Object.prototype.toString.call(object) === type\n}\n\nexport const isArray = <T extends any[]>(object: T | any): object is T => is(objectTypes.array, object)\nexport const isAsyncFunction = <T extends (...args: any[]) => Promise<any>>(object: T | any): object is T => is(objectTypes.asyncFunction, object)\nexport const isBoolean = <T extends boolean>(object: T | any): object is T => is(objectTypes.boolean, object)\nexport const isFunction = <T extends (...args: any[]) => any>(object: T | any): object is T => is(objectTypes.function, object)\nexport const isNull = <T>(object: T | any): object is T => is(objectTypes.null, object)\nexport const isNumber = <T extends number>(object: T | any): object is T => is(objectTypes.number, object)\nexport const isObject = <T extends Record<any, any>>(object: T | any): object is T => is(objectTypes.object, object)\nexport const isPromise = <T>(object: T | Promise<T>): object is Promise<T> => is(objectTypes.promise, object)\nexport const isString = <T extends string>(object: T | any): object is T => is(objectTypes.string, object)\nexport const isSymbol = <T extends symbol>(object: T | any): object is T => is(objectTypes.symbol, object)\nexport const isUndefined = <T extends undefined>(object: T | any): object is T => is(objectTypes.undefined, object)\nexport const isWindow = <T extends Window>(object: T | any): object is T => is(objectTypes.window, object)\n\nexport const isThenable = <T extends { then: <A, R>(...args: A[]) => R }>(object: T | any): object is T => {\n  if (isPromise(object)) return true\n\n  return isObject(object) && ('then' in object) && (typeof object.then === 'function')\n}\n","import { isPromise } from '/src/utils/inspect'\nimport { type EnumString, type Options, type OptionsResolved, type Values } from '/types/ink'\n\nexport type FlattenArray<T> = ReturnType<typeof flatten<T>>\nexport type FnIntersectionToTuple<FnIntersection> = FnIntersection extends { (a: infer A): void, (b: infer B): void } ? [A, B] : never\nexport type FnUnionToFnIntersection<FnUnion> = (FnUnion extends unknown ? (arg: FnUnion) => void : never) extends ((arg: infer FnIntersection) => void) ? FnIntersection : never\nexport type Partition<T, V> = UnionToTuple<T> extends never\n? [T] extends [infer A]\n  ? V extends ((arg: any) => arg is A)\n    ? [A[], unknown[]]\n    : V extends ((arg: any) => arg is infer AssertionType)\n      ? [AssertionType[], Array<A>]\n      : never\n  : never\n: UnionToTuple<T> extends [infer A, infer B]\n  ? V extends ((arg: any) => arg is A)\n    ? [A[], B[]]\n    : V extends ((arg: any) => arg is B)\n      ? [B[], A[]]\n      : V extends ((arg: any) => arg is infer AssertionType)\n        ? [AssertionType[], Array<A | B>]\n        : never\n  : never\nexport type PluginHandler<T> = { [P in keyof T]: (variant: T[P]) => any }\nexport type PluginMatcher = { [K in PluginType]: Extract<Options.Plugin, { type: K }> }\nexport type PluginType = Options.Plugin['type']\nexport type PluginForType<T extends Values.PluginType> = Extract<Options.Plugin, { type: T }>\nexport type PluginValueForType<T extends Values.PluginType> = PluginForType<T>['value']\nexport type RecursiveArray<T> = Array<T | RecursiveArray<T>>\nexport type UnionToFnUnion<Union> = Union extends unknown ? (k: Union) => void : never\nexport type UnionToTuple<Union> = FnIntersectionToTuple<FnUnionToFnIntersection<UnionToFnUnion<Union>>>\nexport type ValidatorFn = (arg: any) => boolean\n\nexport const enumString = <T extends string>(value: T) => {\n  return `${value}` as EnumString<T>\n}\n\nexport const partitionPlugins = <T extends Options.Plugin['value']>(plugins: T[]) => {\n  return partition(plugins, isPromise)\n}\n\nexport const isPlugin = <T extends PluginType>(pluginType: T, plugin: Options.Plugin): plugin is PluginMatcher[T] => {\n  return plugin.type === pluginType\n}\n\nexport const isOptionsKey = (key: string, options: OptionsResolved): key is keyof OptionsResolved => {\n  return !!key && (key in options)\n}\n\nexport const filterPlugins = <T extends PluginType>(pluginType: T, options: OptionsResolved): PluginMatcher[T]['value'][] => {\n  return flatten(options.plugins).reduce<PluginMatcher[T]['value'][]>((matches, plugin: Options.Plugin) => {\n    if (isPlugin(pluginType, plugin)) {\n      // Todo: These \"plugin\" keys might be better suited under a namespace, but they are top-level for now.\n      // Individual key resolvers might be a good idea down the road to check for more fine-grained configuration options.\n      if (!plugin.key || (isOptionsKey(plugin.key, options) && options[plugin.key])) {\n        // @ts-expect-error Todo: Fix this type definition.\n        matches.push(plugin.value)\n      }\n    }\n\n    return matches\n  }, [])\n}\n\nexport const flatten = <T>(array: RecursiveArray<T>): T[] => {\n  return array.reduce<T[]>((flatArray, item) => {\n    if (Array.isArray(item)) {\n      return flatArray.concat(flatten(item))\n    }\n\n    return flatArray.concat(item)\n  }, [])\n}\n\nexport const partition = <ArrayTypes, Validator extends ValidatorFn>(array: ArrayTypes[], isValid: Validator): Partition<ArrayTypes, Validator> => {\n  return array.reduce<Partition<ArrayTypes, Validator>>((partitions, entry) => {\n    isValid(entry) ? partitions[0].push(entry) : partitions[1].push(entry)\n\n    return partitions\n  }, [[], []] as unknown as Partition<ArrayTypes, Validator>)\n}\n\n// partition(['string'], isNumber)\n// partition([1], isNumber)\n// partition(['hello', 1, 'yep', 4], isPromise)\n// partition(['hello', 1, 'yep', 4], isString)\n","import { markdown as markdownExtension, markdownLanguage } from '@codemirror/lang-markdown'\nimport { languages as baseLanguages } from '@codemirror/language-data'\nimport { Compartment } from '@codemirror/state'\nimport { type MarkdownExtension } from '@lezer/markdown'\nimport { buildVendorUpdates } from '/src/extensions'\nimport { filterPlugins, partitionPlugins } from '/src/utils/options'\nimport { type InkInternal, type OptionsResolved, pluginTypes } from '/types'\n\nconst makeExtension = ([state, setState]: InkInternal.Store) => {\n  const baseExtensions = [] as MarkdownExtension[]\n  const [lazyExtensions, extensions] = filterExtensions(state().options)\n  const [lazyLanguages, languages] = filterLanguages(state().options)\n\n  if (Math.max(lazyExtensions.length, lazyLanguages.length) > 0) {\n    state().workQueue.enqueue(async () => {\n      const effects = await buildVendorUpdates([state, setState])\n\n      state().editor.dispatch({ effects })\n    })\n  }\n\n  return markdownExtension({\n    base: markdownLanguage,\n    codeLanguages: [...baseLanguages, ...languages],\n    extensions: [...baseExtensions, ...extensions],\n  })\n}\n\nconst filterExtensions = (options: OptionsResolved) => {\n  return partitionPlugins(filterPlugins(pluginTypes.grammar, options))\n}\n\nconst filterLanguages = (options: OptionsResolved) => {\n  return partitionPlugins(filterPlugins(pluginTypes.language, options))\n}\n\nconst updateExtension = async ([state]: InkInternal.Store) => {\n  const baseExtensions = [] as MarkdownExtension[]\n  const extensions = await Promise.all(filterPlugins(pluginTypes.grammar, state().options))\n  const languages = await Promise.all(filterPlugins(pluginTypes.language, state().options))\n\n  return markdownExtension({\n    base: markdownLanguage,\n    codeLanguages: [...baseLanguages, ...languages],\n    extensions: [...baseExtensions, ...extensions],\n  })\n}\n\nexport const markdown = (): InkInternal.Extension => {\n  const compartment = new Compartment()\n\n  return {\n    compartment,\n    initialValue: (store: InkInternal.Store) => {\n      return compartment.of(makeExtension(store))\n    },\n    reconfigure: async (store: InkInternal.Store) => {\n      return compartment.reconfigure(await updateExtension(store))\n    },\n  }\n}\n","import type InkInternal from '/types/internal'\nimport type InkUi from '/types/ui'\nimport * as InkValues from '/types/values'\n\nexport const createElement = (): InkUi.Element => {\n  // Needed for tree-shaking purposes.\n  if (import.meta.env.VITE_SSR) {\n    return {} as InkUi.Element\n  }\n\n  return document.createElement('div')\n}\n\nexport const isAutoDark = () => {\n  // Needed for tree-shaking purposes.\n  if (import.meta.env.VITE_SSR) {\n    // Todo: Allow user to specify a default theme for SSR.\n    return true\n  }\n\n  return window.matchMedia('(prefers-color-scheme: dark)').matches\n}\n\nexport const isDark = (appearance: string) => {\n  if (appearance === InkValues.Appearance.Dark)\n    return true\n  if (appearance === InkValues.Appearance.Light)\n    return false\n\n  return isAutoDark()\n}\n\nexport const makeVars = (state: InkInternal.StateResolved) => {\n  // Todo: The syntax nodes should be merged with the tag nodes to ensure values are always set correctly. This might\n  // require extracting this out into a separate \"constants\" file or something similar.\n  const styles = [\n    // --ink-*\n    { suffix: 'border-radius', default: '0.25rem' },\n    { suffix: 'color', default: 'currentColor' },\n    { suffix: 'flex-direction', default: 'column' },\n    { suffix: 'font-family', default: 'inherit' },\n    // --ink-block-*\n    { suffix: 'block-background-color', default: '#121212', light: '#f5f5f5' },\n    { suffix: 'block-background-color-on-hover', default: '#0f0f0f', light: '#e0e0e0' },\n    { suffix: 'block-max-height', default: '20rem' },\n    { suffix: 'block-padding', default: '0.5rem' },\n    // --ink-code-*\n    { suffix: 'code-background-color', default: 'var(--ink-internal-block-background-color)' },\n    { suffix: 'code-color', default: 'inherit' },\n    { suffix: 'code-font-family', default: '\\'Monaco\\', Courier, monospace' },\n    // --ink-editor-*\n    { suffix: 'editor-font-size', default: '1em' },\n    { suffix: 'editor-line-height', default: '2em' },\n    { suffix: 'editor-padding', default: '0.5rem' },\n    { suffix: 'inline-padding', default: '0.125rem' },\n    // --ink-modal-*\n    { suffix: 'modal-position', default: 'fixed' },\n    // --ink-syntax-*\n    { suffix: 'syntax-atom-color', default: '#d19a66' },\n    { suffix: 'syntax-comment-color', default: '#abb2bf' },\n    { suffix: 'syntax-comment-font-style', default: 'italic' },\n    { suffix: 'syntax-emphasis-color', default: 'inherit' },\n    { suffix: 'syntax-emphasis-font-style', default: 'italic' },\n    { suffix: 'syntax-hashtag-background-color', default: '#222', light: '#eee' },\n    { suffix: 'syntax-hashtag-color', default: 'inherit' },\n    { suffix: 'syntax-heading-color', default: 'inherit' },\n    { suffix: 'syntax-heading-font-weight', default: '600' },\n    { suffix: 'syntax-heading1-color', default: 'var(--ink-internal-syntax-heading-color, inherit)' },\n    { suffix: 'syntax-heading1-font-size', default: '1.6em' },\n    { suffix: 'syntax-heading1-font-weight', default: '600' },\n    { suffix: 'syntax-heading2-color', default: 'var(--ink-internal-syntax-heading-color, inherit)' },\n    { suffix: 'syntax-heading2-font-size', default: '1.5em' },\n    { suffix: 'syntax-heading2-font-weight', default: '600' },\n    { suffix: 'syntax-heading3-color', default: 'var(--ink-internal-syntax-heading-color, inherit)' },\n    { suffix: 'syntax-heading3-font-size', default: '1.4em' },\n    { suffix: 'syntax-heading3-font-weight', default: '600' },\n    { suffix: 'syntax-heading4-color', default: 'var(--ink-internal-syntax-heading-color, inherit)' },\n    { suffix: 'syntax-heading4-font-size', default: '1.3em' },\n    { suffix: 'syntax-heading4-font-weight', default: '600' },\n    { suffix: 'syntax-heading5-color', default: 'var(--ink-internal-syntax-heading-color, inherit)' },\n    { suffix: 'syntax-heading5-font-size', default: '1.2em' },\n    { suffix: 'syntax-heading5-font-weight', default: '600' },\n    { suffix: 'syntax-heading6-color', default: 'var(--ink-internal-syntax-heading-color, inherit)' },\n    { suffix: 'syntax-heading6-font-size', default: '1.1em' },\n    { suffix: 'syntax-heading6-font-weight', default: '600' },\n    { suffix: 'syntax-highlight-background-color', default: '#555555' },\n    { suffix: 'syntax-keyword-color', default: '#c678dd' },\n    { suffix: 'syntax-link-color', default: 'inherit' },\n    { suffix: 'syntax-meta-color', default: '#abb2bf' },\n    { suffix: 'syntax-monospace-color', default: 'var(--ink-internal-code-color)' },\n    { suffix: 'syntax-monospace-font-family', default: 'var(--ink-internal-code-font-family)' },\n    { suffix: 'syntax-name-color', default: '#d19a66' },\n    { suffix: 'syntax-name-label-color', default: '#abb2bf' },\n    { suffix: 'syntax-name-property-color', default: '#96c0d8' },\n    { suffix: 'syntax-name-property-definition-color', default: '#e06c75' },\n    { suffix: 'syntax-name-variable-color', default: '#e06c75' },\n    { suffix: 'syntax-name-variable-definition-color', default: '#e5c07b' },\n    { suffix: 'syntax-name-variable-local-color', default: '#d19a66' },\n    { suffix: 'syntax-name-variable-special-color', default: 'inherit' },\n    { suffix: 'syntax-number-color', default: '#d19a66' },\n    { suffix: 'syntax-operator-color', default: '#96c0d8' },\n    { suffix: 'syntax-processing-instruction-color', default: '#444444', light: '#bbbbbb' },\n    { suffix: 'syntax-punctuation-color', default: '#abb2bf' },\n    { suffix: 'syntax-strikethrough-color', default: 'inherit' },\n    { suffix: 'syntax-strikethrough-text-decoration', default: 'line-through' },\n    { suffix: 'syntax-string-color', default: '#98c379' },\n    { suffix: 'syntax-string-special-color', default: 'inherit' },\n    { suffix: 'syntax-strong-color', default: 'inherit' },\n    { suffix: 'syntax-strong-font-weight', default: '600' },\n    { suffix: 'syntax-url-color', default: '#aaaaaa', light: '#666666' },\n    { suffix: 'toolbar-group-spacing', default: '2rem' },\n    { suffix: 'toolbar-item-spacing', default: '0' },\n  ]\n\n  const isLight = !isDark(state.options.interface.appearance)\n\n  return styles.map((style) => {\n    const value = (isLight && style.light) ? style.light : style.default\n\n    return `--ink-internal-${style.suffix}: var(--ink-${style.suffix}, ${value});`\n  })\n}\n","import type { Extension } from '@codemirror/state'\nimport { EditorView } from '@codemirror/view'\n\nexport const appearance = (isDark: boolean): Extension => {\n  return [\n    EditorView.theme({\n      '.cm-scroller': {\n        fontFamily: 'var(--ink-internal-font-family)',\n      },\n    }, { dark: isDark }),\n  ]\n}\n","import { Compartment } from '@codemirror/state'\nimport { markdown } from '/src/markdown'\nimport { isAutoDark } from '/src/ui/utils'\nimport { filterPlugins, partitionPlugins } from '/src/utils/options'\nimport { type InkInternal } from '/types'\nimport { appearanceTypes, pluginTypes } from '/types/values'\nimport { appearance } from './editor/extensions/appearance'\n\nexport const buildVendors = ([state, setState]: InkInternal.Store) => {\n  const extensions = state().extensions.map(e => e.initialValue([state, setState]))\n\n  return extensions\n}\n\nexport const buildVendorUpdates = async ([state, setState]: InkInternal.Store) => {\n  const effects = await Promise.all(\n    state().extensions.map(async (extension) => {\n      return await extension.reconfigure([state, setState])\n    }),\n  )\n\n  return effects\n}\n\nexport const extension = (resolver: InkInternal.ExtensionResolver): InkInternal.Extension => {\n  const compartment = new Compartment()\n\n  return {\n    compartment,\n    initialValue: (store: InkInternal.Store) => {\n      return compartment.of(resolver(store))\n    },\n    reconfigure: (store: InkInternal.Store) => {\n      return compartment.reconfigure(resolver(store))\n    },\n  }\n}\n\nexport const lazyExtension = (reconfigure: InkInternal.LazyExtensionResolver): InkInternal.LazyExtension => {\n  const compartment = new Compartment()\n\n  return {\n    compartment,\n    initialValue: () => {\n      return compartment.of([])\n    },\n    reconfigure: (store: InkInternal.Store) => {\n      return reconfigure(store, compartment)\n    },\n  }\n}\n\nexport const createExtensions = () => {\n  return [\n    markdown(),\n    ...resolvers.map(r => extension(r)),\n    ...lazyResolvers.map(r => lazyExtension(r)),\n  ]\n}\n\nexport const resolvers: InkInternal.ExtensionResolvers = [\n  ([state]: InkInternal.Store) => {\n    const [_lazyExtensions, extensions] = partitionPlugins(filterPlugins(pluginTypes.default, state().options))\n\n    return extensions\n  },\n  ([state]: InkInternal.Store) => {\n    const isDark = state().options.interface.appearance === appearanceTypes.dark\n    const isAuto = state().options.interface.appearance === appearanceTypes.auto\n    const extension = appearance(isDark || (isAuto && isAutoDark()))\n\n    return extension\n  },\n]\n\nexport const lazyResolvers: InkInternal.LazyExtensionResolvers = [\n  async ([state]: InkInternal.Store, compartment: InkInternal.Vendor.Compartment) => {\n    const [lazyExtensions] = partitionPlugins(filterPlugins(pluginTypes.default, state().options))\n\n    if (lazyExtensions.length > 0) {\n      return compartment.reconfigure(await Promise.all(lazyExtensions))\n    }\n\n    return compartment.reconfigure([])\n  },\n  async ([state]: InkInternal.Store, compartment: InkInternal.Vendor.Compartment) => {\n    if (state().options.interface.autocomplete) {\n      const { autocomplete } = await import('./editor/extensions/autocomplete')\n\n      return compartment.reconfigure(autocomplete(state().options))\n    }\n\n    return compartment.reconfigure([])\n  },\n  async ([state]: InkInternal.Store, compartment: InkInternal.Vendor.Compartment) => {\n    if (state().options.interface.images) {\n      const { images } = await import('./editor/extensions/images')\n\n      return compartment.reconfigure(images())\n    }\n\n    return compartment.reconfigure([])\n  },\n  async ([state]: InkInternal.Store, compartment: InkInternal.Vendor.Compartment) => {\n    const { keybindings, trapTab } = state().options\n    const tab = trapTab ?? keybindings.tab\n    const shiftTab = trapTab ?? keybindings.shiftTab\n\n    if (tab || shiftTab) {\n      const { indentWithTab } = await import('./editor/extensions/indentWithTab')\n\n      return compartment.reconfigure(indentWithTab({ tab, shiftTab }))\n    }\n\n    return compartment.reconfigure([])\n  },\n  async ([state]: InkInternal.Store, compartment: InkInternal.Vendor.Compartment) => {\n    const { options } = state()\n\n    if (options.lists || options.interface.lists) {\n      const { lists } = await import('./editor/extensions/lists')\n\n      let bullet = true\n      let number = true\n      let task = true\n\n      if (typeof options.lists === 'object') {\n        bullet = typeof options.lists.bullet === 'undefined' ? false : options.lists.bullet\n        number = typeof options.lists.number === 'undefined' ? false : options.lists.number\n        task = typeof options.lists.task === 'undefined' ? false : options.lists.task\n      }\n\n      return compartment.reconfigure(lists({ bullet, number, task }))\n    }\n\n    return compartment.reconfigure([])\n  },\n  async ([state]: InkInternal.Store, compartment: InkInternal.Vendor.Compartment) => {\n    if (state().options.placeholder) {\n      const { placeholder } = await import('./editor/extensions/placeholder')\n\n      return compartment.reconfigure(placeholder(state().options.placeholder))\n    }\n\n    return compartment.reconfigure([])\n  },\n  async ([state]: InkInternal.Store, compartment: InkInternal.Vendor.Compartment) => {\n    if (state().options.interface.readonly) {\n      const { readonly } = await import('./editor/extensions/readonly')\n\n      return compartment.reconfigure(readonly())\n    }\n\n    return compartment.reconfigure([])\n  },\n  async ([state]: InkInternal.Store, compartment: InkInternal.Vendor.Compartment) => {\n    if (state().options.search) {\n      const { search } = await import('./editor/extensions/search')\n\n      return compartment.reconfigure(search())\n    }\n\n    return compartment.reconfigure([])\n  },\n  async ([state]: InkInternal.Store, compartment: InkInternal.Vendor.Compartment) => {\n    if (state().options.interface.spellcheck) {\n      const { spellcheck } = await import('./editor/extensions/spellcheck')\n\n      return compartment.reconfigure(spellcheck())\n    }\n\n    return compartment.reconfigure([])\n  },\n  async ([state]: InkInternal.Store, compartment: InkInternal.Vendor.Compartment) => {\n    if (state().options.vim) {\n      const { vim } = await import('./editor/extensions/vim')\n\n      return compartment.reconfigure(vim())\n    }\n\n    return compartment.reconfigure([])\n  },\n]\n","import { syntaxTree } from '@codemirror/language'\nimport type { Extension } from '@codemirror/state'\nimport { RangeSetBuilder } from '@codemirror/state'\nimport type { EditorView } from '@codemirror/view'\nimport { Decoration, ViewPlugin } from '@codemirror/view'\n\n// const mark = 'QuoteMark'\n\nconst blockquoteSyntaxNodes = [\n  'Blockquote',\n]\n\nconst blockquoteDecoration = Decoration.line({ attributes: { class: 'cm-blockquote' } })\nconst blockquoteOpenDecoration = Decoration.line({ attributes: { class: 'cm-blockquote-open' } })\nconst blockquoteCloseDecoration = Decoration.line({ attributes: { class: 'cm-blockquote-close' } })\n\nconst blockquotePlugin = ViewPlugin.define((view: EditorView) => {\n  return {\n    update: () => {\n      return decorate(view)\n    },\n  }\n}, { decorations: plugin => plugin.update() })\n\nconst decorate = (view: EditorView) => {\n  const builder = new RangeSetBuilder<Decoration>()\n  const tree = syntaxTree(view.state)\n\n  for (const visibleRange of view.visibleRanges) {\n    for (let position = visibleRange.from; position < visibleRange.to;) {\n      const line = view.state.doc.lineAt(position)\n\n      tree.iterate({\n        enter({ type, from, to }) {\n          if (type.name !== 'Document') {\n            if (blockquoteSyntaxNodes.includes(type.name)) {\n              builder.add(line.from, line.from, blockquoteDecoration)\n\n              const openLine = view.state.doc.lineAt(from)\n              const closeLine = view.state.doc.lineAt(to)\n\n              if (openLine.number === line.number)\n                builder.add(line.from, line.from, blockquoteOpenDecoration)\n\n              if (closeLine.number === line.number)\n                builder.add(line.from, line.from, blockquoteCloseDecoration)\n\n              return false\n            }\n          }\n        },\n        from: line.from,\n        to: line.to,\n      })\n\n      position = line.to + 1\n    }\n  }\n\n  return builder.finish()\n}\n\nexport const blockquote = (): Extension => {\n  return [\n    blockquotePlugin,\n  ]\n}\n","import { syntaxTree } from '@codemirror/language'\nimport type { Extension } from '@codemirror/state'\nimport { RangeSetBuilder } from '@codemirror/state'\nimport type { EditorView } from '@codemirror/view'\nimport { Decoration, ViewPlugin } from '@codemirror/view'\n\nconst codeBlockSyntaxNodes = [\n  'CodeBlock',\n  'FencedCode',\n  'HTMLBlock',\n  'CommentBlock',\n]\n\nconst sharedAttributes = {\n  // Prevent spellcheck in all code blocks. The Grammarly extension might not respect these values.\n  'data-enable-grammarly': 'false',\n  'data-gramm': 'false',\n  'data-grammarly-skip': 'true',\n  'spellcheck': 'false',\n}\n\nconst codeBlockDecoration = Decoration.line({ attributes: { ...sharedAttributes, class: 'cm-codeblock' } })\nconst codeBlockOpenDecoration = Decoration.line({ attributes: { ...sharedAttributes, class: 'cm-codeblock-open' } })\nconst codeBlockCloseDecoration = Decoration.line({ attributes: { ...sharedAttributes, class: 'cm-codeblock-close' } })\nconst codeDecoration = Decoration.mark({ attributes: { ...sharedAttributes, class: 'cm-code' } })\nconst codeOpenDecoration = Decoration.mark({ attributes: { ...sharedAttributes, class: 'cm-code cm-code-open' } })\nconst codeCloseDecoration = Decoration.mark({ attributes: { ...sharedAttributes, class: 'cm-code cm-code-close' } })\n\nconst codeBlockPlugin = ViewPlugin.define((view: EditorView) => {\n  return {\n    update: () => {\n      return decorate(view)\n    },\n  }\n}, { decorations: plugin => plugin.update() })\n\nconst decorate = (view: EditorView) => {\n  const builder = new RangeSetBuilder<Decoration>()\n  const tree = syntaxTree(view.state)\n\n  for (const visibleRange of view.visibleRanges) {\n    for (let position = visibleRange.from; position < visibleRange.to;) {\n      const line = view.state.doc.lineAt(position)\n      let inlineCode: { from: number, to: number, innerFrom: number, innerTo: number }\n\n      tree.iterate({\n        enter({ type, from, to }) {\n          if (type.name !== 'Document') {\n            if (codeBlockSyntaxNodes.includes(type.name)) {\n              builder.add(line.from, line.from, codeBlockDecoration)\n\n              const openLine = view.state.doc.lineAt(from)\n              const closeLine = view.state.doc.lineAt(to)\n\n              if (openLine.number === line.number)\n                builder.add(line.from, line.from, codeBlockOpenDecoration)\n\n              if (closeLine.number === line.number)\n                builder.add(line.from, line.from, codeBlockCloseDecoration)\n\n              return false\n            } else if (type.name === 'InlineCode') {\n              // Store a reference for the last inline code node.\n              inlineCode = { from, to, innerFrom: from, innerTo: to }\n            } else if (type.name === 'CodeMark') {\n              // Make sure the code mark is a part of the previously stored inline code node.\n              if (from === inlineCode.from) {\n                inlineCode.innerFrom = to\n\n                builder.add(from, to, codeOpenDecoration)\n              } else if (to === inlineCode.to) {\n                inlineCode.innerTo = from\n\n                builder.add(inlineCode.innerFrom, inlineCode.innerTo, codeDecoration)\n                builder.add(from, to, codeCloseDecoration)\n              }\n            }\n          }\n        },\n        from: line.from,\n        to: line.to,\n      })\n\n      position = line.to + 1\n    }\n  }\n\n  return builder.finish()\n}\n\nexport const code = (): Extension => {\n  return [\n    codeBlockPlugin,\n  ]\n}\n","import type { Extension } from '@codemirror/state'\nimport { EditorView } from '@codemirror/view'\n\nconst inkClassExtensions = () => {\n  return [\n    EditorView.editorAttributes.of({\n      class: 'ink-mde-container',\n    }),\n    EditorView.contentAttributes.of({\n      class: 'ink-mde-editor-content',\n    }),\n    // Todo: Maybe open a PR to add scrollerAttributes?\n  ]\n}\n\nexport const ink = (): Extension => {\n  return [\n    ...inkClassExtensions(),\n  ]\n}\n","import type { Extension } from '@codemirror/state'\nimport { EditorView } from '@codemirror/view'\n\nexport const lineWrapping = (): Extension => {\n  return EditorView.lineWrapping\n}\n","import { HighlightStyle, syntaxHighlighting } from '@codemirror/language'\nimport type { Extension } from '@codemirror/state'\nimport { tags } from '@lezer/highlight'\n\nexport const theme = (): Extension => {\n  const extension = syntaxHighlighting(\n    HighlightStyle.define([\n      // ordered by lowest to highest precedence\n      {\n        tag: tags.atom,\n        color: 'var(--ink-internal-syntax-atom-color)',\n      },\n      {\n        tag: tags.meta,\n        color: 'var(--ink-internal-syntax-meta-color)',\n      },\n      // emphasis types\n      {\n        tag: tags.emphasis,\n        color: 'var(--ink-internal-syntax-emphasis-color)',\n        fontStyle: 'var(--ink-internal-syntax-emphasis-font-style)',\n      },\n      {\n        tag: tags.strong,\n        color: 'var(--ink-internal-syntax-strong-color)',\n        fontWeight: 'var(--ink-internal-syntax-strong-font-weight)',\n      },\n      {\n        tag: tags.strikethrough,\n        color: 'var(--ink-internal-syntax-strikethrough-color)',\n        textDecoration: 'var(--ink-internal-syntax-strikethrough-text-decoration)',\n      },\n      // comment group\n      {\n        tag: tags.comment,\n        color: 'var(--ink-internal-syntax-comment-color)',\n        fontStyle: 'var(--ink-internal-syntax-comment-font-style)',\n      },\n      // monospace\n      {\n        tag: tags.monospace,\n        color: 'var(--ink-internal-syntax-code-color)',\n        fontFamily: 'var(--ink-internal-syntax-code-font-family)',\n      },\n      // name group\n      {\n        tag: tags.name,\n        color: 'var(--ink-internal-syntax-name-color)',\n      },\n      {\n        tag: tags.labelName,\n        color: 'var(--ink-internal-syntax-name-label-color)',\n      },\n      {\n        tag: tags.propertyName,\n        color: 'var(--ink-internal-syntax-name-property-color)',\n      },\n      {\n        tag: tags.definition(tags.propertyName),\n        color: 'var(--ink-internal-syntax-name-property-definition-color)',\n      },\n      {\n        tag: tags.variableName,\n        color: 'var(--ink-internal-syntax-name-variable-color)',\n      },\n      {\n        tag: tags.definition(tags.variableName),\n        color: 'var(--ink-internal-syntax-name-variable-definition-color)',\n      },\n      {\n        tag: tags.local(tags.variableName),\n        color: 'var(--ink-internal-syntax-name-variable-local-color)',\n      },\n      {\n        tag: tags.special(tags.variableName),\n        color: 'var(--ink-internal-syntax-name-variable-special-color)',\n      },\n      // headings\n      {\n        tag: tags.heading,\n        color: 'var(--ink-internal-syntax-heading-color)',\n        fontWeight: 'var(--ink-internal-syntax-heading-font-weight)',\n      },\n      {\n        tag: tags.heading1,\n        color: 'var(--ink-internal-syntax-heading1-color)',\n        fontSize: 'var(--ink-internal-syntax-heading1-font-size)',\n        fontWeight: 'var(--ink-internal-syntax-heading1-font-weight)',\n      },\n      {\n        tag: tags.heading2,\n        color: 'var(--ink-internal-syntax-heading2-color)',\n        fontSize: 'var(--ink-internal-syntax-heading2-font-size)',\n        fontWeight: 'var(--ink-internal-syntax-heading2-font-weight)',\n      },\n      {\n        tag: tags.heading3,\n        color: 'var(--ink-internal-syntax-heading3-color)',\n        fontSize: 'var(--ink-internal-syntax-heading3-font-size)',\n        fontWeight: 'var(--ink-internal-syntax-heading3-font-weight)',\n      },\n      {\n        tag: tags.heading4,\n        color: 'var(--ink-internal-syntax-heading4-color)',\n        fontSize: 'var(--ink-internal-syntax-heading4-font-size)',\n        fontWeight: 'var(--ink-internal-syntax-heading4-font-weight)',\n      },\n      {\n        tag: tags.heading5,\n        color: 'var(--ink-internal-syntax-heading5-color)',\n        fontSize: 'var(--ink-internal-syntax-heading5-font-size)',\n        fontWeight: 'var(--ink-internal-syntax-heading5-font-weight)',\n      },\n      {\n        tag: tags.heading6,\n        color: 'var(--ink-internal-syntax-heading6-color)',\n        fontSize: 'var(--ink-internal-syntax-heading6-font-size)',\n        fontWeight: 'var(--ink-internal-syntax-heading6-font-weight)',\n      },\n      // contextual tag types\n      {\n        tag: tags.keyword,\n        color: 'var(--ink-internal-syntax-keyword-color)',\n      },\n      {\n        tag: tags.number,\n        color: 'var(--ink-internal-syntax-number-color)',\n      },\n      {\n        tag: tags.operator,\n        color: 'var(--ink-internal-syntax-operator-color)',\n      },\n      {\n        tag: tags.punctuation,\n        color: 'var(--ink-internal-syntax-punctuation-color)',\n      },\n      {\n        tag: tags.link,\n        color: 'var(--ink-internal-syntax-link-color)',\n        wordBreak: 'break-all',\n      },\n      {\n        tag: tags.url,\n        color: 'var(--ink-internal-syntax-url-color)',\n        wordBreak: 'break-all',\n      },\n      // string group\n      {\n        tag: tags.string,\n        color: 'var(--ink-internal-syntax-string-color)',\n      },\n      {\n        tag: tags.special(tags.string),\n        color: 'var(--ink-internal-syntax-string-special-color)',\n      },\n      // processing instructions\n      {\n        tag: tags.processingInstruction,\n        color: 'var(--ink-internal-syntax-processing-instruction-color)',\n      },\n    ]),\n  )\n\n  return [\n    extension,\n  ]\n}\n","import { defaultKeymap, history, historyKeymap } from '@codemirror/commands'\nimport type { EditorSelection } from '@codemirror/state'\nimport { EditorState } from '@codemirror/state'\nimport { keymap } from '@codemirror/view'\nimport { buildVendors } from '/src/extensions'\nimport type * as Ink from '/types/ink'\nimport type InkInternal from '/types/internal'\nimport { toCodeMirror } from './adapters/selections'\nimport { blockquote } from './extensions/blockquote'\nimport { code } from './extensions/code'\nimport { ink } from './extensions/ink'\nimport { lineWrapping } from './extensions/line_wrapping'\nimport { theme } from './extensions/theme'\n\nconst toVendorSelection = (selections: Ink.Editor.Selection[]): EditorSelection | undefined => {\n  if (selections.length > 0) {\n    return toCodeMirror(selections)\n  }\n}\n\nexport const createState = ([state, setState]: InkInternal.Store): InkInternal.Vendor.State => {\n  const { selections } = state().options\n\n  return EditorState.create({\n    doc: state().options.doc,\n    selection: toVendorSelection(selections),\n    extensions: [\n      keymap.of([\n        ...defaultKeymap,\n        ...historyKeymap,\n      ]),\n      blockquote(),\n      code(),\n      history(),\n      ink(),\n      lineWrapping(),\n      theme(),\n      ...buildVendors([state, setState]),\n    ],\n  })\n}\n","import { EditorView } from '@codemirror/view'\nimport type InkInternal from '/types/internal'\nimport { createState } from './state'\n\nexport const createView = ([state, setState]: InkInternal.Store, target?: HTMLElement): InkInternal.Editor => {\n  const rootNode = target?.getRootNode()\n  const root = rootNode?.nodeType === 11 ? rootNode as ShadowRoot : undefined\n\n  const editor = new EditorView({\n    dispatch: (transaction: InkInternal.Vendor.Transaction) => {\n      const { options } = state()\n      const newDoc = transaction.newDoc.toString()\n\n      options.hooks.beforeUpdate(newDoc)\n      editor.update([transaction])\n\n      if (transaction.docChanged) {\n        setState({ ...state(), doc: newDoc })\n\n        options.hooks.afterUpdate(newDoc)\n      }\n    },\n    root,\n    state: createState([state, setState]),\n  })\n\n  return editor\n}\n","const types = {\n  array: '[object Array]',\n  object: '[object Object]',\n  string: '[object String]',\n  undefined: '[object Undefined]',\n  window: '[object Window]',\n}\n\nconst getType = (object: any) => {\n  const type = Object.prototype.toString.call(object)\n\n  if (type === types.object) {\n    return `[object ${object.constructor.name}]`\n  }\n}\n\nconst is = (object: any, type: string) => {\n  return getType(object) === type\n}\n\nconst deepAssign = (target: any, source: any) => {\n  const seen = new WeakMap()\n\n  const assign = (target: any, source: any) => {\n    if (seen.get(target)) return target\n    if (is(target, types.object)) seen.set(target, true)\n    if (is(source, types.undefined)) return target\n\n    if (is(target, types.array) && is(source, types.array)) {\n      return [...source]\n    }\n\n    if (is(target, types.object) && is(source, types.object)) {\n      return Object.keys(target).reduce((replacement: Record<PropertyKey, unknown>, key: PropertyKey) => {\n        if (Object.hasOwnProperty.call(source, key)) {\n          replacement[key] = assign(target[key], source[key])\n        } else {\n          replacement[key] = target[key]\n        }\n\n        return replacement\n      }, {})\n    }\n\n    return source\n  }\n\n  return assign(target, source)\n}\n\nexport const override = <T>(a: T, b: unknown): T => {\n  return deepAssign(a, b) as unknown as T\n}\n","import { createState } from '/src/editor'\nimport { override } from '/src/utils/merge'\nimport type InkInternal from '/types/internal'\n\nexport const load = ([state, setState]: InkInternal.Store, doc: string) => {\n  setState(override(state(), { options: { doc } }))\n\n  state().editor.setState(createState([state, setState]))\n}\n","import type InkInternal from '/types/internal'\n\nexport const options = ([state]: InkInternal.Store) => {\n  return state().options\n}\n","import { buildVendorUpdates } from '/src/extensions'\nimport { override } from '/src/utils/merge'\nimport type * as Ink from '/types/ink'\nimport type InkInternal from '/types/internal'\n\nexport const reconfigure = async ([state, setState]: InkInternal.Store, options: Ink.Options) => {\n  const { workQueue } = state()\n\n  return workQueue.enqueue(async () => {\n    setState(override(state(), { options }))\n    const effects = await buildVendorUpdates([state, setState])\n\n    state().editor.dispatch({ effects })\n  })\n}\n","import type * as Ink from '/types/ink'\nimport type InkInternal from '/types/internal'\nimport * as InkValues from '/types/values'\nimport { toCodeMirror } from '../editor/adapters/selections'\n\nexport const select = (store: InkInternal.Store, options: Ink.Instance.SelectOptions = {}) => {\n  if (options.selections)\n    return selectMultiple(store, options.selections)\n  if (options.selection)\n    return selectOne(store, options.selection)\n  if (options.at)\n    return selectAt(store, options.at)\n}\n\nexport const selectAt = (store: InkInternal.Store, at: Ink.Values.Selection) => {\n  const [state] = store\n\n  if (at === InkValues.Selection.Start)\n    return selectOne(store, { start: 0, end: 0 })\n\n  if (at === InkValues.Selection.End) {\n    const position = state().editor.state.doc.length\n\n    return selectOne(store, { start: position, end: position })\n  }\n}\n\nexport const selectMultiple = ([state]: InkInternal.Store, selections: Ink.Editor.Selection[]) => {\n  const { editor } = state()\n\n  editor.dispatch(\n    editor.state.update({\n      selection: toCodeMirror(selections),\n    }),\n  )\n}\n\nexport const selectOne = (store: InkInternal.Store, selection: Ink.Editor.Selection) => {\n  return selectMultiple(store, [selection])\n}\n","import type InkInternal from '/types/internal'\n\nexport const update = ([state]: InkInternal.Store, doc: string) => {\n  const { editor } = state()\n\n  editor.dispatch(\n    editor.state.update({\n      changes: {\n        from: 0,\n        to: editor.state.doc.length,\n        insert: doc,\n      },\n    }),\n  )\n}\n","import type * as Ink from '/types/ink'\nimport type InkInternal from '/types/internal'\nimport { insert } from './insert'\nimport { select } from './select'\nimport { selections } from './selections'\n\nexport const wrap = ([state, setState]: InkInternal.Store, { after, before, selection: userSelection }: Ink.Instance.WrapOptions) => {\n  const { editor } = state()\n\n  const selection = userSelection || selections([state, setState]).pop() || { start: 0, end: 0 }\n  const text = editor.state.sliceDoc(selection.start, selection.end)\n\n  insert([state, setState], `${before}${text}${after}`, selection)\n  select([state, setState], { selections: [{ start: selection.start + before.length, end: selection.end + before.length }] })\n}\n","import { type Thenable } from '/src/utils/inspect'\n\nexport type Awaitable<T> = () => Promise<T>\nexport type AwaitableCallbacks = { fulfilled: AwaitableCallback[], rejected: AwaitableCallback[], settled: AwaitableCallback[] }\nexport type AwaitableSettler<T = any> = (value: T) => void\nexport type AwaitableThenSettler<T = any, R = any> = (value: T) => R | Thenable<R>\nexport type AwaitableCallback = () => void\nexport type AwaitableHandler<ResolvedValue = unknown, RejectedValue = unknown> = (resolve: AwaitableSettler<ResolvedValue>, reject: AwaitableSettler<RejectedValue>) => any\nexport type AwaitableState = { callbacks: AwaitableCallbacks, error?: any, status: AwaitableStatus, value?: any }\nexport type AwaitableStatus = 'fulfilled' | 'pending' | 'rejected'\n\n// Todo: Make it so that it allows 2 values to be returned: first one for initial return object (merged with awaitable), second one for resolved object (defaults to the first)\nexport const awaitable = <InitialValue extends object, ResolvedValue = InitialValue, RejectedValue = unknown>(initialValue: InitialValue, handler: AwaitableHandler<ResolvedValue, RejectedValue>): InitialValue & Promise<ResolvedValue> => {\n  const state: AwaitableState = {\n    callbacks: {\n      fulfilled: [],\n      rejected: [],\n      settled: [],\n    },\n    status: 'pending',\n  }\n\n  const callback = (settler: AwaitableThenSettler, { resolve, reject }: { reject: AwaitableSettler, resolve?: AwaitableSettler }) => {\n    return () => {\n      try {\n        const settledValue = settler(state.value)\n\n        Promise.resolve(settledValue).then(resolve, reject)\n      } catch (error: any) {\n        reject(error)\n      }\n    }\n  }\n\n  const reject = (value: RejectedValue) => {\n    if (state.status === 'pending') {\n      state.status = 'rejected'\n      state.value = value\n\n      state.callbacks.rejected.forEach(callback => callback())\n      state.callbacks.settled.forEach(callback => callback())\n    }\n  }\n\n  const resolve = (value: ResolvedValue) => {\n    if (state.status === 'pending') {\n      state.status = 'fulfilled'\n      state.value = value\n\n      state.callbacks.fulfilled.forEach(callback => callback())\n      state.callbacks.settled.forEach(callback => callback())\n    }\n  }\n\n  const then = <OnFulfilled extends AwaitableThenSettler, OnRejected extends AwaitableThenSettler>(onFulfilled?: OnFulfilled, onRejected?: OnRejected) => {\n    return new Promise<ReturnType<Awaited<OnFulfilled>>>((resolve, reject) => {\n      if (state.status === 'pending') {\n        if (onFulfilled) {\n          state.callbacks.fulfilled.push(callback(onFulfilled, { resolve, reject }))\n        }\n\n        if (onRejected) {\n          state.callbacks.rejected.push(callback(onRejected, { resolve: undefined, reject }))\n        }\n      }\n\n      if (state.status === 'fulfilled' && onFulfilled) {\n        callback(onFulfilled, { resolve, reject })()\n      }\n\n      if (state.status === 'rejected' && onRejected) {\n        callback(onRejected, { resolve: undefined, reject })()\n      }\n    })\n  }\n\n  queueMicrotask(() => {\n    try {\n      handler(resolve, reject)\n    } catch (error: any) {\n      reject(error)\n    }\n  })\n\n  return {\n    ...initialValue,\n    [Symbol.toStringTag]: 'awaitable',\n    catch: then.bind(undefined, undefined),\n    finally: (onSettled: () => void) => {\n      return new Promise((resolve, reject) => {\n        if (state.status === 'pending') {\n          state.callbacks.settled.push(callback(onSettled, { resolve, reject }))\n        }\n\n        if (state.status === 'fulfilled') {\n          onSettled()\n          resolve(state.value)\n        }\n\n        if (state.status === 'rejected') {\n          onSettled()\n          reject(state.value)\n        }\n      })\n    },\n    then,\n  }\n}\n","import {\n  destroy,\n  focus,\n  format,\n  getDoc,\n  insert,\n  load,\n  options,\n  reconfigure,\n  select,\n  selections,\n  update,\n  wrap,\n} from '/src/api'\nimport { awaitable } from '/src/utils/awaitable'\nimport type * as Ink from '/types/ink'\nimport type InkInternal from '/types/internal'\n\nexport const makeInstance = (store: InkInternal.Store): Ink.AwaitableInstance => {\n  const instance = {\n    destroy: destroy.bind(undefined, store),\n    focus: focus.bind(undefined, store),\n    format: format.bind(undefined, store),\n    getDoc: getDoc.bind(undefined, store),\n    insert: insert.bind(undefined, store),\n    load: load.bind(undefined, store),\n    options: options.bind(undefined, store),\n    reconfigure: reconfigure.bind(undefined, store),\n    select: select.bind(undefined, store),\n    selections: selections.bind(undefined, store),\n    update: update.bind(undefined, store),\n    wrap: wrap.bind(undefined, store),\n  }\n\n  return awaitable(instance, (resolve, reject) => {\n    try {\n      const [state] = store\n\n      // Ensure all other queued tasks are finished before resolving.\n      state().workQueue.enqueue(() => resolve(instance))\n    } catch (error: any) {\n      reject(error)\n    }\n  })\n}\n","export type Queue = ReturnType<typeof makeQueue>\n\nexport const makeQueue = () => {\n  const state = {\n    queue: <(() => Promise<void>)[]>[],\n    workload: 0,\n  }\n\n  const process = async () => {\n    const task = state.queue.pop()\n\n    if (!task) return\n\n    await task()\n\n    state.workload--\n\n    await process()\n  }\n\n  return {\n    enqueue: (callback: () => void | Promise<void>): Promise<void> => {\n      return new Promise((resolve, reject) => {\n        const task = async () => {\n          try {\n            await callback()\n\n            resolve()\n          } catch (error) {\n            reject(error)\n          }\n        }\n\n        state.queue.push(task)\n        state.workload++\n\n        // If the queue has other items in it, then it will drain itself.\n        if (state.workload > 1) return\n\n        process()\n      })\n    },\n  }\n}\n","import { createSignal } from 'solid-js'\nimport { createExtensions } from '/src/extensions'\nimport { override } from '/src/utils/merge'\nimport { makeQueue } from '/src/utils/queue'\nimport type { Options } from '/types/ink'\nimport type InkInternal from '/types/internal'\nimport * as InkValues from '/types/values'\nimport { createElement } from './ui/utils'\n\nexport const blankState = (): InkInternal.StateResolved => {\n  const options = {\n    doc: '',\n    files: {\n      clipboard: false,\n      dragAndDrop: false,\n      handler: () => {},\n      injectMarkup: true,\n      types: ['image/*'],\n    },\n    hooks: {\n      afterUpdate: () => {},\n      beforeUpdate: () => {},\n    },\n    interface: {\n      appearance: InkValues.Appearance.Auto,\n      attribution: true,\n      autocomplete: false,\n      images: false,\n      lists: false,\n      readonly: false,\n      spellcheck: true,\n      toolbar: false,\n    },\n    keybindings: {\n      // Todo: Set these to false by default. https://codemirror.net/examples/tab\n      tab: true,\n      shiftTab: true,\n    },\n    lists: false,\n    placeholder: '',\n    plugins: [],\n    readability: false,\n    search: true,\n    selections: [],\n    toolbar: {\n      bold: true,\n      code: true,\n      codeBlock: true,\n      heading: true,\n      image: true,\n      italic: true,\n      link: true,\n      list: true,\n      orderedList: true,\n      quote: true,\n      taskList: true,\n      upload: false,\n    },\n    // This value overrides both `tab` and `shiftTab` keybindings.\n    trapTab: undefined,\n    vim: false,\n  }\n\n  return {\n    doc: '',\n    editor: {} as InkInternal.Editor,\n    extensions: createExtensions(),\n    options,\n    root: createElement(),\n    target: createElement(),\n    workQueue: makeQueue(),\n  }\n}\n\nexport const makeState = (partialState: InkInternal.State): InkInternal.StateResolved => {\n  return override(blankState(), partialState)\n}\n\nexport const makeStore = (options: Options, overrides: InkInternal.State = {}): InkInternal.Store => {\n  const [state, setState] = createSignal(makeState({ ...overrides, doc: options.doc || '', options }))\n\n  return [state, setState]\n}\n","export const DEFAULT_WORDS_PER_MINUTE = 225\n\nexport const toHuman = (text: string, wordsPerMinute: number = DEFAULT_WORDS_PER_MINUTE): string => {\n  const readTime = toHumanReadTime(text, wordsPerMinute)\n  const wordCount = toHumanWordCount(text)\n  const lineCount = toHumanLineCount(text)\n  const charCount = toHumanCharCount(text)\n\n  return [readTime, wordCount, lineCount, charCount].join(' | ')\n}\n\nexport const toHumanCharCount = (text: string): string => {\n  const charCount = toCharCount(text)\n\n  return `${charCount} chars`\n}\n\nexport const toHumanLineCount = (text: string): string => {\n  const lineCount = toLineCount(text)\n\n  return `${lineCount} lines`\n}\n\nexport const toHumanReadTime = (text: string, wordsPerMinute: number = DEFAULT_WORDS_PER_MINUTE): string => {\n  const readTime = toReadTime(text, wordsPerMinute)\n  const readTimeMinutes = Math.floor(readTime)\n  const readTimeSeconds = Math.floor((readTime % 1) * 60)\n\n  if (readTimeMinutes === 0) {\n    return `${readTimeSeconds}s read`\n  }\n\n  return `${readTimeMinutes}m ${readTimeSeconds}s to read`\n}\n\nexport const toHumanWordCount = (text: string): string => {\n  const wordCount = toWordCount(text)\n\n  return `${wordCount} words`\n}\n\nexport const toCharCount = (text: string): number => {\n  return text.length\n}\n\nexport const toLineCount = (text: string): number => {\n  return text.split(/\\n/).length\n}\n\nexport const toReadTime = (text: string, wordsPerMinute: number = DEFAULT_WORDS_PER_MINUTE): number => {\n  return toWordCount(text) / wordsPerMinute\n}\n\nexport const toWordCount = (text: string): number => {\n  const scrubbed = text.replace(/[']/g, '').replace(/[^\\w\\d]+/g, ' ').trim()\n\n  if (!scrubbed) {\n    return 0\n  }\n\n  return scrubbed.split(/\\s+/).length\n}\n","import { type Component, Show } from 'solid-js'\nimport { toHuman } from '/src/utils/readability'\nimport type InkInternal from '/types/internal'\nimport { useStore } from '../../app'\n\nexport const Details: Component<{ store: InkInternal.Store }> = () => {\n  const [state] = useStore()\n\n  return (\n    <div class='ink-mde-details'>\n      <div class='ink-mde-container'>\n        <div class='ink-mde-details-content'>\n          <Show when={ state().options.readability }>\n            <div class='ink-mde-readability'>\n              <span>{ toHuman(state().doc) }</span>\n            </div>\n          </Show>\n          <Show when={ state().options.readability && state().options.interface.attribution }>\n            <span>&nbsp;|</span>\n          </Show>\n          <Show when={state().options.interface.attribution}>\n            <div class='ink-mde-attribution'>\n              <span>&nbsp;powered by <a class='ink-mde-attribution-link' href='https://github.com/davidmyersdev/ink-mde' rel='noopener noreferrer' target='_blank'>ink-mde</a></span>\n            </div>\n          </Show>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import type { Component } from 'solid-js'\nimport { For, Show, createSignal, onCleanup, onMount } from 'solid-js'\nimport { insert } from '/src/api'\nimport { useStore } from '../../app'\nimport styles from './styles.css?inline'\n\nexport const DropZone: Component = () => {\n  const [depth, setDepth] = createSignal(0)\n  const [files, setFiles] = createSignal<File[]>([])\n  const [isLoading, setIsLoading] = createSignal(false)\n  const [isVisible, setIsVisible] = createSignal(false)\n  const [state, setState] = useStore()\n\n  const closeModal = () => {\n    setIsVisible(false)\n  }\n\n  const dropOnZone = (event: DragEvent) => {\n    if (state().options.files.dragAndDrop) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      const transfer = event.dataTransfer\n\n      if (transfer?.files) {\n        uploadFiles(transfer.files)\n      } else {\n        setDepth(0)\n        setIsVisible(false)\n        setFiles([])\n      }\n    }\n  }\n\n  const onDragEnter = (event: DragEvent) => {\n    if (state().options.files.dragAndDrop) {\n      event.preventDefault()\n\n      setDepth(depth() + 1)\n      setIsVisible(true)\n    }\n  }\n\n  const onDragLeave = (event: DragEvent) => {\n    if (state().options.files.dragAndDrop) {\n      event.preventDefault()\n\n      setDepth(depth() - 1)\n\n      if (depth() === 0)\n        setIsVisible(false)\n    }\n  }\n\n  const onDragOver = (event: DragEvent) => {\n    if (state().options.files.dragAndDrop) {\n      event.preventDefault()\n\n      setIsVisible(true)\n    }\n  }\n\n  const onDrop = (event: DragEvent) => {\n    if (state().options.files.dragAndDrop) {\n      event.preventDefault()\n\n      setDepth(0)\n      setIsVisible(false)\n    }\n  }\n\n  const onPaste = (event: ClipboardEvent) => {\n    if (state().options.files.clipboard) {\n      event.preventDefault()\n\n      const transfer = event.clipboardData\n\n      if (transfer?.files && transfer.files.length > 0)\n        uploadFiles(transfer.files)\n    }\n  }\n\n  const uploadFiles = (userFiles: FileList) => {\n    Array.from(userFiles).forEach((file) => {\n      setFiles([...files(), file])\n    })\n\n    setIsLoading(true)\n    setIsVisible(true)\n\n    Promise.resolve(state().options.files.handler(userFiles)).then((url) => {\n      if (state().options.files.injectMarkup && url) {\n        const markup = `![](${url})`\n\n        insert([state, setState], markup)\n      }\n    }).finally(() => {\n      setDepth(0)\n      setIsLoading(false)\n      setIsVisible(false)\n      setFiles([])\n    })\n  }\n\n  onMount(() => {\n    document.addEventListener('dragenter', onDragEnter)\n    document.addEventListener('dragleave', onDragLeave)\n    document.addEventListener('dragover', onDragOver)\n    document.addEventListener('drop', onDrop)\n    state().root.addEventListener('paste', onPaste)\n  })\n\n  onCleanup(() => {\n    document.removeEventListener('dragenter', onDragEnter)\n    document.removeEventListener('dragleave', onDragLeave)\n    document.removeEventListener('dragover', onDragOver)\n    document.removeEventListener('drop', onDrop)\n    state().root.removeEventListener('paste', onPaste)\n  })\n\n  return (\n    <div class=\"ink-drop-zone\" classList={{ visible: isVisible() }}>\n      <style textContent={styles} />\n      <div class=\"ink-drop-zone-modal\">\n        <div class=\"ink-drop-zone-droppable-area\" onDrop={dropOnZone}>\n          <div class=\"ink-drop-zone-file-preview\">\n            <For each={files().slice(0, 8)}>{file => (\n              <img class=\"ink-drop-zone-file-preview-image\" alt={file.name} src={URL.createObjectURL(file)} />\n            )}</For>\n          </div>\n          <Show when={isLoading()} fallback={<span>drop files here</span>}>\n            <span>uploading files...</span>\n          </Show>\n        </div>\n        <div class=\"ink-drop-zone-hide\" onClick={closeModal}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import type { Component } from 'solid-js'\nimport { buildVendorUpdates } from '/src/extensions'\nimport { useStore } from '/src/ui/app'\nimport { override } from '/src/utils/merge'\nimport { createView } from '../../../editor'\n\nexport const Editor: Component<{ target?: HTMLElement }> = (props) => {\n  // Needed for tree-shaking purposes.\n  if (import.meta.env.VITE_SSR) {\n    return (\n      <div class='cm-editor'>\n        <div class='cm-scroller'>\n          <div class='cm-content' contenteditable={true}>\n            <div class='cm-line'>\n              <br />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const [state, setState] = useStore()\n  // eslint-disable-next-line solid/reactivity\n  const editor = createView([state, setState], props.target)\n\n  const { workQueue } = state()\n  setState(override(state(), { editor }))\n\n  workQueue.enqueue(async () => {\n    const effects = await buildVendorUpdates([state, setState])\n\n    editor.dispatch({ effects })\n  })\n\n  return editor.dom\n}\n","import type { Component, JSX } from 'solid-js'\n\nexport const Button: Component<{ children: JSX.Element, onclick: JSX.EventHandler<HTMLButtonElement, MouseEvent> }> = (props) => {\n  return (\n    <button class='ink-button' onClick={e => props.onclick(e)} type='button'>\n      {props.children}\n    </button>\n  )\n}\n","import { Show, createSignal } from 'solid-js'\nimport type { Component } from 'solid-js'\nimport { focus, format, insert } from '/src/api'\nimport { useStore } from '/src/ui/app'\nimport * as InkValues from '/types/values'\nimport { Button } from '../button'\nimport styles from './styles.css?inline'\n\nexport const Toolbar: Component = () => {\n  const [state, setState] = useStore()\n  const [uploader, setUploader] = createSignal<HTMLInputElement>()\n\n  const formatAs = (type: InkValues.Markup) => {\n    format([state, setState], type)\n    focus([state, setState])\n  }\n\n  const uploadChangeHandler = (event: Event) => {\n    const target = event.target as HTMLInputElement\n\n    if (target?.files) {\n      Promise.resolve(state().options.files.handler(target.files)).then((url) => {\n        if (url) {\n          const markup = `![](${url})`\n\n          insert([state, setState], markup)\n          focus([state, setState])\n        }\n      })\n    }\n  }\n\n  const uploadClickHandler = () => {\n    uploader()?.click()\n  }\n\n  return (\n    <div class='ink-mde-toolbar'>\n      <style textContent={styles} />\n      <div class='ink-mde-container'>\n        <Show when={state().options.toolbar.heading || state().options.toolbar.bold || state().options.toolbar.italic}>\n          <div class='ink-mde-toolbar-group'>\n            <Show when={state().options.toolbar.heading}>\n              <Button onclick={() => formatAs(InkValues.Markup.Heading)}>\n                <svg viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-miterlimit='5' stroke-linecap='round' stroke-linejoin='round'>\n                  <path d='M6 4V10M6 16V10M6 10H14M14 10V4M14 10V16'/>\n                </svg>\n              </Button>\n            </Show>\n            <Show when={state().options.toolbar.bold}>\n              <Button onclick={() => formatAs(InkValues.Markup.Bold)}>\n                <svg viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-width='1.5' stroke-miterlimit='5' stroke-linecap='round' stroke-linejoin='round'>\n                  <path d='M6.5 10H10.5C12.1569 10 13.5 11.3431 13.5 13C13.5 14.6569 12.1569 16 10.5 16H6.5V4H9.5C11.1569 4 12.5 5.34315 12.5 7C12.5 8.65686 11.1569 10 9.5 10'/>\n                </svg>\n              </Button>\n            </Show>\n            <Show when={state().options.toolbar.italic}>\n              <Button onclick={() => formatAs(InkValues.Markup.Italic)}>\n                <svg viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-miterlimit='5' stroke-linecap='round' stroke-linejoin='round'>\n                  <path d='M11 4L9 16M13 4H9M7 16H11'/>\n                </svg>\n              </Button>\n            </Show>\n          </div>\n        </Show>\n        <Show when={state().options.toolbar.quote || state().options.toolbar.codeBlock || state().options.toolbar.code}>\n          <div class='ink-mde-toolbar-group'>\n            <Show when={state().options.toolbar.quote}>\n              <Button onclick={() => formatAs(InkValues.Markup.Quote)}>\n                <svg viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-miterlimit='5' stroke-linecap='round' stroke-linejoin='round'>\n                  <path d='M2.00257 16H17.9955M2.00055 4H18M7 10H18.0659M2 8.5V11.4999C2.4 11.5 2.5 11.5 2.5 11.5V11V10.5M4 8.5V11.4999H4.5V11V10.5'/>\n                </svg>\n              </Button>\n            </Show>\n            <Show when={state().options.toolbar.codeBlock}>\n              <Button onclick={() => formatAs(InkValues.Markup.CodeBlock)}>\n                <svg viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-miterlimit='5' stroke-linecap='round' stroke-linejoin='round'>\n                  <path d='M13 4L7 16'/>\n                  <path d='M5 7L2 10L5 13'/>\n                  <path d='M15 7L18 10L15 13'/>\n                </svg>\n              </Button>\n            </Show>\n            <Show when={state().options.toolbar.code}>\n              <Button onclick={() => formatAs(InkValues.Markup.Code)}>\n                <svg viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-miterlimit='5' stroke-linecap='round' stroke-linejoin='round'>\n                  <path d='M7 4L8 6'/>\n                </svg>\n              </Button>\n            </Show>\n          </div>\n        </Show>\n        <Show when={state().options.toolbar.list || state().options.toolbar.orderedList || state().options.toolbar.taskList}>\n          <div class='ink-mde-toolbar-group'>\n            <Show when={state().options.toolbar.list}>\n              <Button onclick={() => formatAs(InkValues.Markup.List)}>\n                <svg viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-miterlimit='5' stroke-linecap='round' stroke-linejoin='round'>\n                  <path d='M7 16H17.8294'/>\n                  <path d='M2 16H4'/>\n                  <path d='M7 10H17.8294'/>\n                  <path d='M2 10H4'/>\n                  <path d='M7 4H17.8294'/>\n                  <path d='M2 4H4'/>\n                </svg>\n              </Button>\n            </Show>\n            <Show when={state().options.toolbar.orderedList}>\n              <Button onclick={() => formatAs(InkValues.Markup.OrderedList)}>\n                <svg viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-miterlimit='5' stroke-linecap='round' stroke-linejoin='round'>\n                  <path d='M7 16H18'/>\n                  <path d='M2 17.0242C2.48314 17.7569 3.94052 17.6154 3.99486 16.7919C4.05315 15.9169 3.1975 16.0044 2.99496 16.0044M2.0023 14.9758C2.48544 14.2431 3.94282 14.3846 3.99716 15.2081C4.05545 16.0831 3.1998 16.0002 2.99726 16.0002'/>\n                  <path d='M7 10H18'/>\n                  <path d='M2.00501 11.5H4M2.00193 8.97562C2.48449 8.24319 3.9401 8.38467 3.99437 9.20777C4.05259 10.0825 2.04342 10.5788 2 11.4996'/>\n                  <path d='M7 4H18'/>\n                  <path d='M2 5.5H4M2.99713 5.49952V2.5L2.215 2.93501'/>\n                </svg>\n              </Button>\n            </Show>\n            <Show when={state().options.toolbar.taskList}>\n              <Button onclick={() => formatAs(InkValues.Markup.TaskList)}>\n                <svg viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-miterlimit='5' stroke-linecap='round' stroke-linejoin='round'>\n                  <path d='M7 16H17.8294'/>\n                  <path d='M5 15L3 17L2 16'/>\n                  <path d='M7 10H17.8294'/>\n                  <path d='M5 9L3 11L2 10'/>\n                  <path d='M7 4H17.8294'/>\n                  <path d='M5 3L3 5L2 4'/>\n                </svg>\n              </Button>\n            </Show>\n          </div>\n        </Show>\n        <Show when={state().options.toolbar.link || state().options.toolbar.image || state().options.toolbar.upload}>\n          <div class='ink-mde-toolbar-group'>\n            <Show when={state().options.toolbar.link}>\n              <Button onclick={() => formatAs(InkValues.Markup.Link)}>\n                <svg viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-miterlimit='5' stroke-linecap='round' stroke-linejoin='round'>\n                  <path d='M9.12127 10.881C10.02 11.78 11.5237 11.7349 12.4771 10.7813L15.2546 8.00302C16.2079 7.04937 16.253 5.54521 15.3542 4.6462C14.4555 3.74719 12.9512 3.79174 11.9979 4.74539L10.3437 6.40007M10.8787 9.11903C9.97997 8.22002 8.47626 8.26509 7.52288 9.21874L4.74545 11.997C3.79208 12.9506 3.74701 14.4548 4.64577 15.3538C5.54452 16.2528 7.04876 16.2083 8.00213 15.2546L9.65633 13.5999'/>\n                </svg>\n              </Button>\n            </Show>\n            <Show when={state().options.toolbar.image}>\n              <Button onclick={() => formatAs(InkValues.Markup.Image)}>\n                <svg viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-miterlimit='5' stroke-linecap='round' stroke-linejoin='round'>\n                  <rect x='2' y='4' width='16' height='12' rx='1'/>\n                  <path d='M7.42659 7.67597L13.7751 13.8831M2.00208 12.9778L7.42844 7.67175'/>\n                  <path d='M11.9119 12.0599L14.484 9.54443L17.9973 12.9785'/>\n                  <path d='M10.9989 7.95832C11.551 7.95832 11.9986 7.52072 11.9986 6.98092C11.9986 6.44113 11.551 6.00354 10.9989 6.00354C10.4468 6.00354 9.99921 6.44113 9.99921 6.98092C9.99921 7.52072 10.4468 7.95832 10.9989 7.95832Z'/>\n                </svg>\n              </Button>\n            </Show>\n            <Show when={state().options.toolbar.upload}>\n              <Button onclick={uploadClickHandler}>\n                <svg viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-miterlimit='5' stroke-linecap='round' stroke-linejoin='round'>\n                  <path d='M10 13V4M10 4L13 7M10 4L7 7'/>\n                  <path d='M2 13V15C2 15.5523 2.44772 16 3 16H17C17.5523 16 18 15.5523 18 15V13'/>\n                </svg>\n                <input style={{ display: 'none' }} type='file' onChange={uploadChangeHandler} ref={setUploader} />\n              </Button>\n            </Show>\n          </div>\n        </Show>\n      </div>\n    </div>\n  )\n}\n","import { type Component, createEffect, createSignal, onMount } from 'solid-js'\nimport { buildVendorUpdates } from '/src/extensions'\nimport { useStore } from '../../app'\nimport { makeVars } from '../../utils'\nimport styles from './styles.css?inline'\n\nexport const Styles: Component = () => {\n  const [state, setState] = useStore()\n  const [vars, setVars] = createSignal(makeVars(state()))\n\n  createEffect(() => {\n    setVars(makeVars(state()))\n  })\n\n  onMount(() => {\n    const mediaQueryList = window.matchMedia('(prefers-color-scheme: dark)')\n    const listener = (_event: MediaQueryListEvent) => {\n      const { editor, root, workQueue } = state()\n\n      if (root.isConnected) {\n        workQueue.enqueue(async () => {\n          const effects = await buildVendorUpdates([state, setState])\n\n          editor.dispatch({ effects })\n          setVars(makeVars(state()))\n        })\n      } else {\n        mediaQueryList.removeEventListener('change', listener)\n      }\n    }\n\n    mediaQueryList.addEventListener('change', listener)\n  })\n\n  return (\n    <style textContent={`.ink {\\n  ${vars().join('\\n  ')}\\n}\\n${styles}`} />\n  )\n}\n","import { Show } from 'solid-js'\nimport type { Component } from 'solid-js'\nimport { getHydrationMarkerProps } from '/src/constants'\nimport { override } from '/src/utils/merge'\nimport type InkInternal from '/types/internal'\nimport { useStore } from '../../app'\nimport { Details } from '../details'\nimport { DropZone } from '../drop_zone'\nimport { Editor } from '../editor'\nimport { Toolbar } from '../toolbar'\nimport { Styles } from './styles'\n\nexport const Root: Component<{ store: InkInternal.Store, target?: HTMLElement }> = (props) => {\n  const [state, setState] = useStore()\n  const setRoot = (root: HTMLElement) => {\n    setState(override(state(), { root }))\n  }\n\n  return (\n    <div class='ink ink-mde' ref={setRoot} {...getHydrationMarkerProps()}>\n      <Styles />\n      <Show when={state().options.files.clipboard || state().options.files.dragAndDrop}>\n        <DropZone />\n      </Show>\n      <Show when={state().options.interface.toolbar}>\n        <Toolbar />\n      </Show>\n      <div class='ink-mde-editor'>\n        <Editor target={props.target} />\n      </div>\n      <Show when={state().options.readability || state().options.interface.attribution}>\n        <Details store={[state, setState]} />\n      </Show>\n    </div>\n  )\n}\n","import { createContext, useContext } from 'solid-js'\nimport type { Component, JSX } from 'solid-js'\nimport type InkInternal from '/types/internal'\nimport { blankState } from '../store'\nimport { Root } from './components/root'\n\nconst AppContext = createContext<InkInternal.Store>([() => blankState(), value => (typeof value === 'function' ? value(blankState()) : value)])\nconst AppProvider: Component<{ children: JSX.Element, store: InkInternal.Store }> = (props) => {\n  return (\n    // eslint-disable-next-line solid/reactivity\n    <AppContext.Provider value={props.store}>\n      {props.children}\n    </AppContext.Provider>\n  )\n}\n\nexport const useStore = () => {\n  return useContext(AppContext)\n}\n\nexport const App: Component<{ store: InkInternal.Store, target?: HTMLElement }> = (props) => {\n  return (\n    <AppProvider store={props.store}>\n      <Root store={props.store} target={props.target} />\n    </AppProvider>\n  )\n}\n","import { hydrate as solidHydrate, render as solidRender, renderToString as solidRenderToString } from 'solid-js/web'\nimport { HYDRATION_MARKER_SELECTOR } from '/src/constants'\nimport { makeInstance } from '/src/instance'\nimport { makeStore } from '/src/store'\nimport { App } from '/src/ui/app'\nimport { isPromise } from '/src/utils/inspect'\nimport { type PluginValueForType } from '/src/utils/options'\nimport type * as Ink from '/types/ink'\n\nexport type * from '/types/ink'\nexport { appearanceTypes, pluginTypes } from '/types/values'\n\nexport const defineConfig = <T extends Ink.Options>(config: T) => config\nexport const defineOptions = <T extends Ink.Options>(options: T) => options\nexport const definePlugin = <T extends Ink.Options.RecursivePlugin>(plugin: T) => plugin\n\nexport const hydrate = (target: HTMLElement, options: Ink.Options = {}): Ink.AwaitableInstance => {\n  const store = makeStore(options)\n\n  if (!import.meta.env.VITE_SSR) {\n    solidPrepareForHydration()\n    solidHydrate(() => <App store={store} target={target} />, target)\n  }\n\n  return makeInstance(store)\n}\n\nexport const ink = (target: HTMLElement, options: Ink.Options = {}): Ink.AwaitableInstance => {\n  const hasHydrationMarker = !!target.querySelector(HYDRATION_MARKER_SELECTOR)\n\n  if (hasHydrationMarker) {\n    return hydrate(target, options)\n  }\n\n  return render(target, options)\n}\n\nexport const inkPlugin = <T extends Ink.Values.PluginType>({ key = '', type, value }: { key?: string, type?: T, value: () => PluginValueForType<T> }) => {\n  return new Proxy({ key, type: type || 'default' } as Ink.Options.Plugin, {\n    get: (target, prop: keyof Ink.Options.Plugin, _receiver) => {\n      if (prop === 'value' && !target[prop]) {\n        target.value = value()\n\n        if (isPromise(target.value)) {\n          return target.value.then(val => target.value = val)\n        }\n\n        return target.value\n      }\n\n      return target[prop]\n    },\n  })\n}\n\nexport const plugin = inkPlugin\n\nexport const render = (target: HTMLElement, options: Ink.Options = {}): Ink.AwaitableInstance => {\n  const store = makeStore(options)\n\n  if (!import.meta.env.VITE_SSR) {\n    solidRender(() => <App store={store} target={target} />, target)\n  }\n\n  return makeInstance(store)\n}\n\nexport const renderToString = (options: Ink.Options = {}): string => {\n  const store = makeStore(options)\n\n  // Needed for tree-shaking purposes.\n  if (!import.meta.env.VITE_SSR) {\n    return ''\n  }\n\n  return solidRenderToString(() => <App store={store} />)\n}\n\nexport const solidPrepareForHydration = () => {\n  // @ts-expect-error Todo: This is a third-party vendor script.\n  // eslint-disable-next-line\n  let e,t;e=window._$HY||(window._$HY={events:[],completed:new WeakSet,r:{}}),t=e=>e&&e.hasAttribute&&(e.hasAttribute(\"data-hk\")?e:t(e.host&&e.host instanceof Node?e.host:e.parentNode)),['click', 'input'].forEach((o=>document.addEventListener(o,(o=>{let s=o.composedPath&&o.composedPath()[0]||o.target,a=t(s);a&&!e.completed.has(a)&&e.events.push([a,o])})))),e.init=(t,o)=>{e.r[t]=[new Promise(((e,t)=>o=e)),o]},e.set=(t,o,s)=>{(s=e.r[t])&&s[1](o),e.r[t]=[o]},e.unset=t=>{delete e.r[t]},e.load=(t,o)=>{if(o=e.r[t])return o[0]}\n}\n\nexport const wrap = (textarea: HTMLTextAreaElement, options: Ink.Options = {}) => {\n  const replacement = <div class='ink-mde-textarea' /> as HTMLDivElement\n  const doc = textarea.value\n\n  textarea.after(replacement)\n  textarea.style.display = 'none'\n\n  const instance = render(replacement, { doc, ...options })\n\n  if (textarea.form) {\n    textarea.form.addEventListener('submit', () => {\n      textarea.value = instance.getDoc()\n    })\n  }\n\n  return instance\n}\n\nexport default ink\n"],"names":["HYDRATION_MARKER","HYDRATION_MARKER_SELECTOR","getHydrationMarkerProps","destroy","state","editor","focus","Appearance","Markup","Selection","appearanceTypes","pluginTypes","toCodeMirror","selections","ranges","selection","SelectionRange","EditorSelection","toInk","range","defineConfig","overrides","formatting","InkValues.Markup","splitSelectionByLines","position","line","start","end","getSelection","formatDefinition","initialSelection","getText","changeDetails","getNode","definition","getNodes","type","nodeDefinitions","syntaxTree","from","to","unformat","text","sliceStart","sliceEnd","unformatted","formatBlock","before","after","formatMultiline","changes","lineChanges","formatLine","hasPrefixStates","prefixState","prefix","prefixStateIndex","nextPrefixState","updatedText","formatInline","getChanges","format","formatType","maybeSelection","node","offset","total","change","updates","getDoc","insert","setState","updateSelection","current","anchor","head","objectTypes","is","object","isPromise","partitionPlugins","plugins","partition","isPlugin","pluginType","plugin","isOptionsKey","key","options","filterPlugins","flatten","matches","array","flatArray","item","isValid","partitions","entry","makeExtension","baseExtensions","lazyExtensions","extensions","filterExtensions","lazyLanguages","languages","filterLanguages","effects","buildVendorUpdates","markdownExtension","markdownLanguage","baseLanguages","updateExtension","markdown","compartment","Compartment","store","createElement","isAutoDark","isDark","appearance","InkValues.Appearance","makeVars","styles","isLight","style","value","EditorView","buildVendors","e","extension","resolver","lazyExtension","reconfigure","createExtensions","resolvers","r","lazyResolvers","_lazyExtensions","isAuto","autocomplete","images","keybindings","trapTab","tab","shiftTab","indentWithTab","lists","bullet","number","task","placeholder","readonly","search","spellcheck","vim","blockquoteSyntaxNodes","blockquoteDecoration","Decoration","blockquoteOpenDecoration","blockquoteCloseDecoration","blockquotePlugin","ViewPlugin","view","decorate","builder","RangeSetBuilder","tree","visibleRange","openLine","closeLine","blockquote","codeBlockSyntaxNodes","sharedAttributes","codeBlockDecoration","codeBlockOpenDecoration","codeBlockCloseDecoration","codeDecoration","codeOpenDecoration","codeCloseDecoration","codeBlockPlugin","inlineCode","code","inkClassExtensions","ink","lineWrapping","theme","syntaxHighlighting","HighlightStyle","tags","toVendorSelection","createState","EditorState","keymap","defaultKeymap","historyKeymap","history","createView","target","rootNode","root","transaction","newDoc","types","getType","deepAssign","source","seen","assign","replacement","override","a","b","load","doc","workQueue","select","selectMultiple","selectOne","selectAt","at","InkValues.Selection","update","wrap","userSelection","awaitable","initialValue","handler","callback","settler","resolve","reject","settledValue","error","then","onFulfilled","onRejected","onSettled","makeInstance","instance","makeQueue","process","blankState","makeState","partialState","makeStore","createSignal","DEFAULT_WORDS_PER_MINUTE","toHuman","wordsPerMinute","readTime","toHumanReadTime","wordCount","toHumanWordCount","lineCount","toHumanLineCount","charCount","toHumanCharCount","toCharCount","toLineCount","toReadTime","readTimeMinutes","readTimeSeconds","toWordCount","scrubbed","Details","useStore","_el$","_$getNextElement","_tmpl$4","_el$2","firstChild","_el$3","_el$8","_el$9","_co$","_$getNextMarker","nextSibling","_el$10","_el$11","_co$2","_el$12","_el$13","_co$3","_$insert","_$createComponent","Show","when","readability","children","_el$4","_tmpl$","_el$5","_$memo","interface","attribution","_tmpl$2","_tmpl$3","DropZone","depth","setDepth","files","setFiles","isLoading","setIsLoading","isVisible","setIsVisible","closeModal","dropOnZone","event","dragAndDrop","preventDefault","stopPropagation","transfer","dataTransfer","uploadFiles","onDragEnter","onDragLeave","onDragOver","onDrop","onPaste","clipboard","clipboardData","length","userFiles","Array","forEach","file","Promise","url","injectMarkup","markup","finally","onMount","document","addEventListener","onCleanup","removeEventListener","_el$7","_$setProperty","For","each","slice","_$effect","_p$","_v$","name","_v$2","URL","createObjectURL","_$setAttribute","t","undefined","fallback","$$click","classList","toggle","_$runHydrationEvents","_$delegateEvents","Editor","props","enqueue","dispatch","dom","Button","onclick","Toolbar","uploader","setUploader","formatAs","uploadChangeHandler","uploadClickHandler","click","_tmpl$15","_el$45","_el$46","_co$13","_el$47","_el$48","_co$14","_el$49","_el$50","_co$15","_el$51","_el$52","_co$16","toolbar","heading","bold","italic","InkValues","Heading","Bold","Italic","quote","codeBlock","_el$14","_el$18","_el$19","_co$4","_el$20","_el$21","_co$5","_el$22","_el$23","_co$6","Quote","_tmpl$5","CodeBlock","_tmpl$6","Code","_tmpl$7","list","orderedList","taskList","_el$24","_el$28","_el$29","_co$7","_el$30","_el$31","_co$8","_el$32","_el$33","_co$9","List","_tmpl$8","OrderedList","_tmpl$9","TaskList","_tmpl$10","link","image","upload","_el$34","_el$39","_el$40","_co$10","_el$41","_el$42","_co$11","_el$43","_el$44","_co$12","Link","_tmpl$11","Image","_tmpl$12","_tmpl$13","_el$38","_tmpl$14","_$use","setProperty","Styles","vars","setVars","createEffect","mediaQueryList","window","matchMedia","listener","_event","isConnected","join","Root","setRoot","_el$6","_$spread","_$mergeProps","AppContext","createContext","AppProvider","Provider","useContext","App","config","defineOptions","definePlugin","hydrate","solidPrepareForHydration","solidHydrate","querySelector","render","inkPlugin","Proxy","get","prop","_receiver","val","solidRender","renderToString","_$HY","events","completed","WeakSet","hasAttribute","host","Node","parentNode","o","s","composedPath","has","push","init","set","unset","textarea","display","form"],"mappings":";;;;;;;;;AAAO,MAAMA,KAAmB,qCACnBC,KAA4B,IAAID,EAAgB,KAEhDE,KAA0B,OAO9B,KCRIC,KAAU,CAAC,CAACC,CAAK,MAAyB;AAC/C,QAAA,EAAE,QAAAC,MAAWD;AAEnB,EAAAC,EAAO,QAAQ;AACjB,GCJaC,KAAQ,CAAC,CAACF,CAAK,MAAyB;AAC7C,QAAA,EAAE,QAAAC,MAAWD;AAEf,EAACC,EAAO,YACVA,EAAO,MAAM;AAEjB;ACRY,IAAAE,uBAAAA,OACVA,EAAA,OAAO,QACPA,EAAA,OAAO,QACPA,EAAA,QAAQ,SAHEA,IAAAA,MAAA,CAAA,CAAA,GAgBAC,sBAAAA,OACVA,EAAA,OAAO,QACPA,EAAA,OAAO,QACPA,EAAA,YAAY,cACZA,EAAA,UAAU,WACVA,EAAA,QAAQ,SACRA,EAAA,SAAS,UACTA,EAAA,OAAO,QACPA,EAAA,OAAO,QACPA,EAAA,cAAc,gBACdA,EAAA,QAAQ,SACRA,EAAA,WAAW,aAXDA,IAAAA,KAAA,CAAA,CAAA,GAqBAC,uBAAAA,OACVA,EAAA,MAAM,OACNA,EAAA,QAAQ,SAFEA,IAAAA,MAAA,CAAA,CAAA;AAKL,MAAMC,KAAkB;AAAA,EAC7B,MAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAO;AACT,GAEaC,IAAc;AAAA,EACzB,YAAY;AAAA,EACZ,SAAS;AAAA,EACT,SAAS;AAAA,EACT,UAAU;AACZ,GClDaC,KAAe,CAACC,MAAuC;AAClE,QAAMC,IAASD,EAAW,IAAI,CAACE,MACfC,GAAe,SAAS,EAAE,QAAQD,EAAU,OAAO,MAAMA,EAAU,IAAK,CAAA,CAGvF;AAEM,SAAAE,GAAgB,OAAOH,CAAM;AACtC,GAEaI,KAAQ,CAACH,MACDA,EAAU,OAAO,IAAI,CAACI,OAChC;AAAA,EACL,KAAKA,EAAM,SAASA,EAAM,OAAOA,EAAM,OAAOA,EAAM;AAAA,EACpD,OAAOA,EAAM,OAAOA,EAAM,SAASA,EAAM,OAAOA,EAAM;AAAA,EAEzD,GCmBGC,IAAe,CAACC,OAWb,EAAE,GAVQ;AAAA,EACf,OAAO;AAAA,EACP,MAAM;AAAA,EACN,WAAW;AAAA,EACX,OAAO,CAAC;AAAA,EACR,QAAQ;AAAA,EACR,cAAc,CAAC;AAAA,EACf,QAAQ;AAAA,GAGY,GAAGA,MAGdC,KAAsB;AAAA,EACjC,CAACC,EAAiB,IAAI,GAAGH,EAAa;AAAA,IACpC,OAAO,CAAC,gBAAgB;AAAA,IACxB,QAAQ;AAAA,IACR,QAAQ;AAAA,EAAA,CACT;AAAA,EACD,CAACG,EAAiB,IAAI,GAAGH,EAAa;AAAA,IACpC,OAAO,CAAC,YAAY;AAAA,IACpB,QAAQ;AAAA,IACR,QAAQ;AAAA,EAAA,CACT;AAAA,EACD,CAACG,EAAiB,SAAS,GAAGH,EAAa;AAAA,IACzC,OAAO;AAAA,IACP,OAAO,CAAC,YAAY;AAAA,IACpB,QAAQ;AAAA,IACR,QAAQ;AAAA,EAAA,CACT;AAAA,EACD,CAACG,EAAiB,OAAO,GAAGH,EAAa;AAAA,IACvC,WAAW;AAAA,IACX,OAAO,CAAC,eAAe,eAAe,eAAe,eAAe,eAAe,aAAa;AAAA,IAChG,QAAQ;AAAA,IACR,cAAc,CAAC,MAAM,OAAO,QAAQ,SAAS,UAAU,WAAW,EAAE;AAAA,EAAA,CACrE;AAAA,EACD,CAACG,EAAiB,KAAK,GAAGH,EAAa;AAAA,IACrC,OAAO,CAAC,OAAO;AAAA,IACf,QAAQ;AAAA,IACR,QAAQ;AAAA,EAAA,CACT;AAAA,EACD,CAACG,EAAiB,MAAM,GAAGH,EAAa;AAAA,IACtC,OAAO,CAAC,UAAU;AAAA,IAClB,QAAQ;AAAA,IACR,QAAQ;AAAA,EAAA,CACT;AAAA,EACD,CAACG,EAAiB,IAAI,GAAGH,EAAa;AAAA,IACpC,OAAO,CAAC,MAAM;AAAA,IACd,QAAQ;AAAA,IACR,QAAQ;AAAA,EAAA,CACT;AAAA,EACD,CAACG,EAAiB,WAAW,GAAGH,EAAa;AAAA,IAC3C,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC,aAAa;AAAA,IACrB,QAAQ;AAAA,EAAA,CACT;AAAA,EACD,CAACG,EAAiB,KAAK,GAAGH,EAAa;AAAA,IACrC,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC,YAAY;AAAA,IACpB,QAAQ;AAAA,EAAA,CACT;AAAA,EACD,CAACG,EAAiB,QAAQ,GAAGH,EAAa;AAAA,IACxC,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC,YAAY;AAAA,IACpB,QAAQ;AAAA,EAAA,CACT;AAAA,EACD,CAACG,EAAiB,IAAI,GAAGH,EAAa;AAAA,IACpC,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC,YAAY;AAAA,IACpB,QAAQ;AAAA,EAAA,CACT;AACH,GAEMI,KAAwB,CAAC,EAAE,QAAAnB,GAAQ,WAAAU,QAA+B;AACtE,MAAIU,IAAWV,EAAU;AACzB,QAAMF,IAAqC,CAAA;AAEpC,SAAAY,KAAYV,EAAU,OAAK;AAC1B,UAAAW,IAAOrB,EAAO,YAAYoB,CAAQ,GAClCE,IAAQ,KAAK,IAAIZ,EAAU,OAAOW,EAAK,IAAI,GAC3CE,IAAM,KAAK,IAAIb,EAAU,KAAKW,EAAK,EAAE;AAE3C,IAAAb,EAAW,KAAK,EAAE,OAAAc,GAAO,KAAAC,EAAK,CAAA,GAE9BH,IAAWC,EAAK,KAAK;AAAA,EACvB;AAEO,SAAAb;AACT,GAEMgB,KAAe,CAAC,EAAE,QAAAxB,GAAQ,kBAAAyB,GAAkB,WAAAf,QAAwC;AACpF,MAAA,CAACV,KAAU,CAACyB;AAAkB,WAAOf,KAAa,EAAE,OAAO,GAAG,KAAK,EAAE;AAGzE,QAAMgB,IAAmBhB,KAAaG,GAAMb,EAAO,MAAM,SAAS,EAAE,IAAA,KAAS,EAAE,OAAO,GAAG,KAAK,EAAE;AAEhG,MAAIyB,EAAiB,SAASA,EAAiB,QAAQA,EAAiB,WAAW;AACjF,UAAMH,IAAQtB,EAAO,YAAY0B,EAAiB,KAAK,EAAE,MACnDH,IAAMvB,EAAO,YAAY0B,EAAiB,GAAG,EAAE;AAErD,WAAO,EAAE,OAAAJ,GAAO,KAAAC,EAAI;AAAA,EACtB;AAEM,QAAAD,IAAQtB,EAAO,MAAM,OAAO0B,EAAiB,KAAK,GAAG,QAAQA,EAAiB,OAC9EH,IAAMvB,EAAO,MAAM,OAAO0B,EAAiB,GAAG,GAAG,MAAMA,EAAiB;AAEvE,SAAA,EAAE,OAAAJ,GAAO,KAAAC;AAClB,GAEMI,KAAU,CAACC,MACRA,EAAc,OAAO,MAAM,SAASA,EAAc,UAAU,OAAOA,EAAc,UAAU,GAAG,GAGjGC,KAAU,CAAC7B,GAA4B8B,GAA8BpB,MAClDqB,GAAS/B,GAAQU,CAAS,EAE3B,KAAK,CAAC,EAAE,MAAAsB,EAAW,MAAAF,EAAW,MAAM,SAASE,EAAK,IAAI,CAAC,GAGzED,KAAW,CAAC/B,GAA4BU,MAAoC;AAChF,QAAMuB,IAAoC,CAAA;AAE/B,SAAAC,GAAAlC,EAAO,KAAK,EAAE,QAAQ;AAAA,IAC/B,MAAMU,EAAU;AAAA,IAChB,IAAIA,EAAU;AAAA,IACd,OAAO,CAAC,EAAE,MAAAsB,GAAM,MAAAG,GAAM,IAAAC,QAAS;AAC7B,MAAAH,EAAgB,KAAK,EAAE,MAAAD,GAAM,MAAAG,GAAM,IAAAC,EAAI,CAAA;AAAA,IACzC;AAAA,EAAA,CACD,GAEMH;AACT,GAEMI,KAAW,CAACT,MAAiC;AAC3C,QAAAU,IAAOX,GAAQC,CAAa,GAC5BW,IAAaX,EAAc,iBAAiB,OAAO,QACnDY,IAAWZ,EAAc,iBAAiB,OAAO,SAAS,MAAMU,EAAK,QACrEG,IAAcH,EAAK,MAAMC,GAAYC,CAAQ;AAEnD,SAAO,CAAC,EAAE,MAAMZ,EAAc,UAAU,OAAO,IAAIA,EAAc,UAAU,KAAK,QAAQa,EAAa,CAAA;AACvG,GAEMC,KAAc,CAACd,MAAiC;AACpD,MAAIA,EAAc,MAAM;AAChB,UAAAN,IAAQM,EAAc,KAAK,MAC3BL,IAAMK,EAAc,KAAK;AAExB,WAAAS,GAAS,EAAE,GAAGT,GAAe,WAAW,EAAE,OAAAN,GAAO,KAAAC,EAAI,EAAA,CAAG;AAAA,EAAA,OAC1D;AACC,UAAAoB,IAASf,EAAc,iBAAiB,QACxCgB,IAAQhB,EAAc,iBAAiB;AAOtC,WALS;AAAA,MACd,EAAE,MAAMA,EAAc,UAAU,OAAO,QAAQe,EAAO;AAAA,MACtD,EAAE,MAAMf,EAAc,UAAU,KAAK,QAAQgB,EAAM;AAAA,IAAA;AAAA,EAIvD;AACF,GAEMC,KAAkB,CAACjB,MAAiC;AAClD,QAAApB,IAAaW,GAAsBS,CAAa,GAChDkB,IAA2D,CAAA;AAEtD,SAAAtC,EAAA,QAAQ,CAACE,MAAc;AAChC,UAAMqC,IAAcC,GAAW,EAAE,GAAGpB,GAAe,WAAAlB,EAAW,CAAA;AAEtD,IAAAoC,EAAA,KAAK,GAAGC,CAAW;AAAA,EAAA,CAC5B,GAEMD;AACT,GAEME,KAAa,CAACpB,MAAiC;AACnD,QAAMqB,IAAkBrB,EAAc,iBAAiB,aAAa,SAAS,GACvEU,IAAOX,GAAQC,CAAa;AAE9B,MAAAA,EAAc,QAAQqB,GAAiB;AACnC,UAAAC,IAActB,EAAc,iBAAiB,aAAa,KAAK,CAAUuB,MAAAb,EAAK,WAAWa,CAAM,CAAC;AAEtG,QAAID,GAAa;AACf,YAAME,IAAmBxB,EAAc,iBAAiB,aAAa,QAAQsB,CAAW,GAClFG,IAAkBzB,EAAc,iBAAiB,aAAawB,IAAmB,CAAC,GAClFE,IAAchB,EAAK,QAAQ,IAAI,OAAO,IAAIY,CAAW,EAAE,GAAGG,CAAe;AAE/E,aAAO,CAAC,EAAE,MAAMzB,EAAc,UAAU,OAAO,IAAIA,EAAc,UAAU,KAAK,QAAQ0B,EAAa,CAAA;AAAA,IACvG;AAAA,EAAA,WACS1B,EAAc,QAAQU,EAAK,WAAWV,EAAc,iBAAiB,MAAM;AACpF,WAAOS,GAAST,CAAa;AAGxB,SAAA,CAAC,EAAE,MAAMA,EAAc,UAAU,OAAO,QAAQA,EAAc,iBAAiB,OAAA,CAAQ;AAChG,GAEM2B,KAAe,CAAC3B,MAAiC;AACrD,MAAIA,EAAc,MAAM;AAChB,UAAAN,IAAQM,EAAc,KAAK,MAC3BL,IAAMK,EAAc,KAAK;AAExB,WAAAS,GAAS,EAAE,GAAGT,GAAe,WAAW,EAAE,OAAAN,GAAO,KAAAC,EAAI,EAAA,CAAG;AAAA,EAAA,OAC1D;AACC,UAAA,EAAE,kBAAAE,GAAkB,WAAAf,EAAc,IAAAkB,GAClCe,IAAS,MAAM,QAAQlB,EAAiB,MAAM,IAAIA,EAAiB,OAAO,CAAC,IAAIA,EAAiB,QAChGmB,IAAQnB,EAAiB;AAExB,WAAA;AAAA,MACL,EAAE,MAAMf,EAAU,OAAO,QAAQiC,EAAO;AAAA,MACxC,EAAE,MAAMjC,EAAU,KAAK,QAAQkC,EAAM;AAAA,IAAA;AAAA,EAEzC;AACF,GAEMY,KAAa,CAAC5B,MACdA,EAAc,iBAAiB,QAC1Bc,GAAYd,CAAa,IACvBA,EAAc,iBAAiB,YACjCiB,GAAgBjB,CAAa,IAC3BA,EAAc,iBAAiB,OACjCoB,GAAWpB,CAAa,IAG1B2B,GAAa3B,CAAa,GAGtB6B,KAAS,CAAC,CAAC1D,CAAK,GAAsB2D,GAA+C,EAAE,WAAWC,EAA+C,IAAA,OAAO;AAC7J,QAAA,EAAE,QAAA3D,MAAWD,KACb0B,IAAmBR,GAAWyC,CAAU,GACxChD,IAAYc,GAAa,EAAE,QAAAxB,GAAQ,kBAAAyB,GAAkB,WAAWkC,GAAgB,GAChFC,IAAO/B,GAAQ7B,GAAQyB,GAAkBf,CAAS,GAOlDoC,IAAUU,GANqB;AAAA,IACnC,QAAAxD;AAAA,IACA,kBAAAyB;AAAA,IACA,MAAAmC;AAAA,IACA,WAAAlD;AAAA,EAAA,CAEsC,GAClCmD,IAASf,EAAQ,OAAO,CAACgB,GAAOC,MAA0D;AACxFF,UAAAA,IAASE,EAAO,OAAO,WAAWA,EAAO,MAAMA,EAAO,QAAQA,EAAO;AAE3E,WAAOD,IAAQD;AAAAA,KACd,CAAC,GAEEG,IAAUjE,IAAQ,OAAO,MAAM,OAAO,EAAE,SAAA+C,GAAS,WAAW,EAAE,MAAMpC,EAAU,OAAO,QAAQA,EAAU,MAAMmD,KAAU;AAEvH,EAAA9D,IAAE,OAAO,SAASiE,CAAO;AACjC,GC/RaC,KAAS,CAAC,CAAClE,CAAK,MAAyB;AAC9C,QAAA,EAAE,QAAAC,MAAWD;AAEZ,SAAAC,EAAO,MAAM;AACtB,GCFaQ,KAAa,CAAC,CAACT,CAAK,MAAiD;AAC1E,QAAA,EAAE,QAAAC,MAAWD;AAEZ,SAAAc,GAAMb,EAAO,MAAM,SAAS;AACrC,GCJakE,KAAS,CAAC,CAACnE,GAAOoE,CAAQ,GAAsB7B,GAAc5B,GAAkC0D,IAAkB,OAAU;AACjI,QAAA,EAAE,QAAApE,MAAWD;AAEnB,MAAIuB,IAAQZ,GAAW,OACnBa,IAAMb,GAAW,OAAOA,GAAW;AAEnC,MAAA,OAAOY,IAAU,KAAa;AAChC,UAAM+C,IAAU7D,GAAW,CAACT,GAAOoE,CAAQ,CAAC,EAAE;AAE9C,IAAA7C,IAAQ+C,EAAQ,OAChB9C,IAAM8C,EAAQ;AAAA,EAChB;AAEM,QAAAL,IAAU,EAAE,SAAS,EAAE,MAAM1C,GAAO,IAAIC,GAAK,QAAQe,EAAA;AAE3D,MAAI8B,GAAiB;AACnB,UAAME,IAAShD,MAAUC,IAAMD,IAAQgB,EAAK,SAAShB,GAC/CiD,IAAuBjD,IAAQgB,EAAK;AAEnC,WAAA,OAAO0B,GAAS,EAAE,WAAW,EAAE,QAAAM,GAAQ,MAAAC,KAAQ;AAAA,EACxD;AAEO,EAAAvE,EAAA;AAAA,IACLA,EAAO,MAAM,OAAOgE,CAAO;AAAA,EAAA;AAE/B,GCxBaQ,KAAc;AAAA,EACzB,OAAO;AAAA,EACP,eAAe;AAAA,EACf,SAAS;AAAA,EACT,UAAU;AAAA,EACV,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,WAAW;AAAA,EACX,QAAQ;AACV,GAEaC,KAAK,CAAIzC,GAAuB0C,MACpC,OAAO,UAAU,SAAS,KAAKA,CAAM,MAAM1C,GAUvC2C,KAAY,CAAID,MAAiDD,GAAGD,GAAY,SAASE,CAAM,GCM/FE,KAAmB,CAAoCC,MAC3DC,GAAUD,GAASF,EAAS,GAGxBI,KAAW,CAAuBC,GAAeC,MACrDA,EAAO,SAASD,GAGZE,KAAe,CAACC,GAAaC,MACjC,CAAC,CAACD,KAAQA,KAAOC,GAGbC,IAAgB,CAAuBL,GAAeI,MAC1DE,GAAQF,EAAQ,OAAO,EAAE,OAAoC,CAACG,GAASN,OACxEF,GAASC,GAAYC,CAAM,MAGzB,CAACA,EAAO,OAAQC,GAAaD,EAAO,KAAKG,CAAO,KAAKA,EAAQH,EAAO,GAAG,MAEjEM,EAAA,KAAKN,EAAO,KAAK,GAItBM,IACN,CAAE,CAAA,GAGMD,KAAU,CAAIE,MAClBA,EAAM,OAAY,CAACC,GAAWC,MAC/B,MAAM,QAAQA,CAAI,IACbD,EAAU,OAAOH,GAAQI,CAAI,CAAC,IAGhCD,EAAU,OAAOC,CAAI,GAC3B,CAAE,CAAA,GAGMZ,KAAY,CAA4CU,GAAqBG,MACjFH,EAAM,OAAyC,CAACI,GAAYC,OACjEF,EAAQE,CAAK,IAAID,EAAW,CAAC,EAAE,KAAKC,CAAK,IAAID,EAAW,CAAC,EAAE,KAAKC,CAAK,GAE9DD,IACN,CAAC,CAAA,GAAI,CAAE,CAAA,CAAgD,GCvEtDE,KAAgB,CAAC,CAAC/F,GAAOoE,CAAQ,MAAyB;AAC9D,QAAM4B,IAAiB,CAAA,GACjB,CAACC,GAAgBC,CAAU,IAAIC,GAAiBnG,EAAA,EAAQ,OAAO,GAC/D,CAACoG,GAAeC,CAAS,IAAIC,GAAgBtG,EAAA,EAAQ,OAAO;AAElE,SAAI,KAAK,IAAIiG,EAAe,QAAQG,EAAc,MAAM,IAAI,KACpDpG,EAAA,EAAE,UAAU,QAAQ,YAAY;AACpC,UAAMuG,IAAU,MAAMC,GAAmB,CAACxG,GAAOoE,CAAQ,CAAC;AAE1D,IAAApE,EAAQ,EAAA,OAAO,SAAS,EAAE,SAAAuG,EAAS,CAAA;AAAA,EAAA,CACpC,GAGIE,GAAkB;AAAA,IACvB,MAAMC;AAAA,IACN,eAAe,CAAC,GAAGC,IAAe,GAAGN,CAAS;AAAA,IAC9C,YAAY,CAAC,GAAGL,GAAgB,GAAGE,CAAU;AAAA,EAAA,CAC9C;AACH,GAEMC,KAAmB,CAACd,MACjBR,GAAiBS,EAAc/E,EAAY,SAAS8E,CAAO,CAAC,GAG/DiB,KAAkB,CAACjB,MAChBR,GAAiBS,EAAc/E,EAAY,UAAU8E,CAAO,CAAC,GAGhEuB,KAAkB,OAAO,CAAC5G,CAAK,MAAyB;AAC5D,QAAMgG,IAAiB,CAAA,GACjBE,IAAa,MAAM,QAAQ,IAAIZ,EAAc/E,EAAY,SAASP,EAAA,EAAQ,OAAO,CAAC,GAClFqG,IAAY,MAAM,QAAQ,IAAIf,EAAc/E,EAAY,UAAUP,EAAA,EAAQ,OAAO,CAAC;AAExF,SAAOyG,GAAkB;AAAA,IACvB,MAAMC;AAAA,IACN,eAAe,CAAC,GAAGC,IAAe,GAAGN,CAAS;AAAA,IAC9C,YAAY,CAAC,GAAGL,GAAgB,GAAGE,CAAU;AAAA,EAAA,CAC9C;AACH,GAEaW,KAAW,MAA6B;AAC7C,QAAAC,IAAc,IAAIC;AAEjB,SAAA;AAAA,IACL,aAAAD;AAAA,IACA,cAAc,CAACE,MACNF,EAAY,GAAGf,GAAciB,CAAK,CAAC;AAAA,IAE5C,aAAa,OAAOA,MACXF,EAAY,YAAY,MAAMF,GAAgBI,CAAK,CAAC;AAAA,EAC7D;AAEJ,GCxDaC,KAAgB,MAMpB,SAAS,cAAc,KAAK,GAGxBC,KAAa,MAOjB,OAAO,WAAW,8BAA8B,EAAE,SAG9CC,KAAS,CAACC,MACjBA,MAAeC,GAAqB,OAC/B,KACLD,MAAeC,GAAqB,QAC/B,KAEFH,GAAW,GAGPI,KAAW,CAACtH,MAAqC;AAG5D,QAAMuH,IAAS;AAAA;AAAA,IAEb,EAAE,QAAQ,iBAAiB,SAAS,UAAU;AAAA,IAC9C,EAAE,QAAQ,SAAS,SAAS,eAAe;AAAA,IAC3C,EAAE,QAAQ,kBAAkB,SAAS,SAAS;AAAA,IAC9C,EAAE,QAAQ,eAAe,SAAS,UAAU;AAAA;AAAA,IAE5C,EAAE,QAAQ,0BAA0B,SAAS,WAAW,OAAO,UAAU;AAAA,IACzE,EAAE,QAAQ,mCAAmC,SAAS,WAAW,OAAO,UAAU;AAAA,IAClF,EAAE,QAAQ,oBAAoB,SAAS,QAAQ;AAAA,IAC/C,EAAE,QAAQ,iBAAiB,SAAS,SAAS;AAAA;AAAA,IAE7C,EAAE,QAAQ,yBAAyB,SAAS,6CAA6C;AAAA,IACzF,EAAE,QAAQ,cAAc,SAAS,UAAU;AAAA,IAC3C,EAAE,QAAQ,oBAAoB,SAAS,+BAAiC;AAAA;AAAA,IAExE,EAAE,QAAQ,oBAAoB,SAAS,MAAM;AAAA,IAC7C,EAAE,QAAQ,sBAAsB,SAAS,MAAM;AAAA,IAC/C,EAAE,QAAQ,kBAAkB,SAAS,SAAS;AAAA,IAC9C,EAAE,QAAQ,kBAAkB,SAAS,WAAW;AAAA;AAAA,IAEhD,EAAE,QAAQ,kBAAkB,SAAS,QAAQ;AAAA;AAAA,IAE7C,EAAE,QAAQ,qBAAqB,SAAS,UAAU;AAAA,IAClD,EAAE,QAAQ,wBAAwB,SAAS,UAAU;AAAA,IACrD,EAAE,QAAQ,6BAA6B,SAAS,SAAS;AAAA,IACzD,EAAE,QAAQ,yBAAyB,SAAS,UAAU;AAAA,IACtD,EAAE,QAAQ,8BAA8B,SAAS,SAAS;AAAA,IAC1D,EAAE,QAAQ,mCAAmC,SAAS,QAAQ,OAAO,OAAO;AAAA,IAC5E,EAAE,QAAQ,wBAAwB,SAAS,UAAU;AAAA,IACrD,EAAE,QAAQ,wBAAwB,SAAS,UAAU;AAAA,IACrD,EAAE,QAAQ,8BAA8B,SAAS,MAAM;AAAA,IACvD,EAAE,QAAQ,yBAAyB,SAAS,oDAAoD;AAAA,IAChG,EAAE,QAAQ,6BAA6B,SAAS,QAAQ;AAAA,IACxD,EAAE,QAAQ,+BAA+B,SAAS,MAAM;AAAA,IACxD,EAAE,QAAQ,yBAAyB,SAAS,oDAAoD;AAAA,IAChG,EAAE,QAAQ,6BAA6B,SAAS,QAAQ;AAAA,IACxD,EAAE,QAAQ,+BAA+B,SAAS,MAAM;AAAA,IACxD,EAAE,QAAQ,yBAAyB,SAAS,oDAAoD;AAAA,IAChG,EAAE,QAAQ,6BAA6B,SAAS,QAAQ;AAAA,IACxD,EAAE,QAAQ,+BAA+B,SAAS,MAAM;AAAA,IACxD,EAAE,QAAQ,yBAAyB,SAAS,oDAAoD;AAAA,IAChG,EAAE,QAAQ,6BAA6B,SAAS,QAAQ;AAAA,IACxD,EAAE,QAAQ,+BAA+B,SAAS,MAAM;AAAA,IACxD,EAAE,QAAQ,yBAAyB,SAAS,oDAAoD;AAAA,IAChG,EAAE,QAAQ,6BAA6B,SAAS,QAAQ;AAAA,IACxD,EAAE,QAAQ,+BAA+B,SAAS,MAAM;AAAA,IACxD,EAAE,QAAQ,yBAAyB,SAAS,oDAAoD;AAAA,IAChG,EAAE,QAAQ,6BAA6B,SAAS,QAAQ;AAAA,IACxD,EAAE,QAAQ,+BAA+B,SAAS,MAAM;AAAA,IACxD,EAAE,QAAQ,qCAAqC,SAAS,UAAU;AAAA,IAClE,EAAE,QAAQ,wBAAwB,SAAS,UAAU;AAAA,IACrD,EAAE,QAAQ,qBAAqB,SAAS,UAAU;AAAA,IAClD,EAAE,QAAQ,qBAAqB,SAAS,UAAU;AAAA,IAClD,EAAE,QAAQ,0BAA0B,SAAS,iCAAiC;AAAA,IAC9E,EAAE,QAAQ,gCAAgC,SAAS,uCAAuC;AAAA,IAC1F,EAAE,QAAQ,qBAAqB,SAAS,UAAU;AAAA,IAClD,EAAE,QAAQ,2BAA2B,SAAS,UAAU;AAAA,IACxD,EAAE,QAAQ,8BAA8B,SAAS,UAAU;AAAA,IAC3D,EAAE,QAAQ,yCAAyC,SAAS,UAAU;AAAA,IACtE,EAAE,QAAQ,8BAA8B,SAAS,UAAU;AAAA,IAC3D,EAAE,QAAQ,yCAAyC,SAAS,UAAU;AAAA,IACtE,EAAE,QAAQ,oCAAoC,SAAS,UAAU;AAAA,IACjE,EAAE,QAAQ,sCAAsC,SAAS,UAAU;AAAA,IACnE,EAAE,QAAQ,uBAAuB,SAAS,UAAU;AAAA,IACpD,EAAE,QAAQ,yBAAyB,SAAS,UAAU;AAAA,IACtD,EAAE,QAAQ,uCAAuC,SAAS,WAAW,OAAO,UAAU;AAAA,IACtF,EAAE,QAAQ,4BAA4B,SAAS,UAAU;AAAA,IACzD,EAAE,QAAQ,8BAA8B,SAAS,UAAU;AAAA,IAC3D,EAAE,QAAQ,wCAAwC,SAAS,eAAe;AAAA,IAC1E,EAAE,QAAQ,uBAAuB,SAAS,UAAU;AAAA,IACpD,EAAE,QAAQ,+BAA+B,SAAS,UAAU;AAAA,IAC5D,EAAE,QAAQ,uBAAuB,SAAS,UAAU;AAAA,IACpD,EAAE,QAAQ,6BAA6B,SAAS,MAAM;AAAA,IACtD,EAAE,QAAQ,oBAAoB,SAAS,WAAW,OAAO,UAAU;AAAA,IACnE,EAAE,QAAQ,yBAAyB,SAAS,OAAO;AAAA,IACnD,EAAE,QAAQ,wBAAwB,SAAS,IAAI;AAAA,EAAA,GAG3CC,IAAU,CAACL,GAAOnH,EAAM,QAAQ,UAAU,UAAU;AAEnD,SAAAuH,EAAO,IAAI,CAACE,MAAU;AAC3B,UAAMC,IAASF,KAAWC,EAAM,QAASA,EAAM,QAAQA,EAAM;AAE7D,WAAO,kBAAkBA,EAAM,MAAM,eAAeA,EAAM,MAAM,KAAKC,CAAK;AAAA,EAAA,CAC3E;AACH,GCtHaN,KAAa,CAACD,MAClB;AAAA,EACLQ,EAAW,MAAM;AAAA,IACf,gBAAgB;AAAA,MACd,YAAY;AAAA,IACd;AAAA,EAAA,GACC,EAAE,MAAMR,GAAQ;AAAA,GCDVS,KAAe,CAAC,CAAC5H,GAAOoE,CAAQ,MACxBpE,EAAA,EAAQ,WAAW,IAAI,CAAA6H,MAAKA,EAAE,aAAa,CAAC7H,GAAOoE,CAAQ,CAAC,CAAC,GAKrEoC,KAAqB,OAAO,CAACxG,GAAOoE,CAAQ,MACvC,MAAM,QAAQ;AAAA,EAC5BpE,IAAQ,WAAW,IAAI,OAAO8H,MACrB,MAAMA,EAAU,YAAY,CAAC9H,GAAOoE,CAAQ,CAAC,CACrD;AAAA,GAMQ0D,KAAY,CAACC,MAAmE;AACrF,QAAAjB,IAAc,IAAIC;AAEjB,SAAA;AAAA,IACL,aAAAD;AAAA,IACA,cAAc,CAACE,MACNF,EAAY,GAAGiB,EAASf,CAAK,CAAC;AAAA,IAEvC,aAAa,CAACA,MACLF,EAAY,YAAYiB,EAASf,CAAK,CAAC;AAAA,EAChD;AAEJ,GAEagB,KAAgB,CAACC,MAA8E;AACpG,QAAAnB,IAAc,IAAIC;AAEjB,SAAA;AAAA,IACL,aAAAD;AAAA,IACA,cAAc,MACLA,EAAY,GAAG,CAAA,CAAE;AAAA,IAE1B,aAAa,CAACE,MACLiB,EAAYjB,GAAOF,CAAW;AAAA,EACvC;AAEJ,GAEaoB,KAAmB,MACvB;AAAA,EACLrB,GAAS;AAAA,EACT,GAAGsB,GAAU,IAAI,CAAKC,MAAAN,GAAUM,CAAC,CAAC;AAAA,EAClC,GAAGC,GAAc,IAAI,CAAKD,MAAAJ,GAAcI,CAAC,CAAC;AAAA,GAIjCD,KAA4C;AAAA,EACvD,CAAC,CAACnI,CAAK,MAAyB;AACxB,UAAA,CAACsI,GAAiBpC,CAAU,IAAIrB,GAAiBS,EAAc/E,EAAY,SAASP,IAAQ,OAAO,CAAC;AAEnG,WAAAkG;AAAA,EACT;AAAA,EACA,CAAC,CAAClG,CAAK,MAAyB;AAC9B,UAAMmH,IAASnH,IAAQ,QAAQ,UAAU,eAAeM,GAAgB,MAClEiI,IAASvI,IAAQ,QAAQ,UAAU,eAAeM,GAAgB;AAGjEwH,WAFWV,GAAWD,KAAWoB,KAAUrB,GAAa,CAAA;AAAA,EAGjE;AACF,GAEamB,KAAoD;AAAA,EAC/D,OAAO,CAACrI,CAAK,GAAsB8G,MAAgD;AAC3E,UAAA,CAACb,CAAc,IAAIpB,GAAiBS,EAAc/E,EAAY,SAASP,EAAA,EAAQ,OAAO,CAAC;AAEzF,WAAAiG,EAAe,SAAS,IACnBa,EAAY,YAAY,MAAM,QAAQ,IAAIb,CAAc,CAAC,IAG3Da,EAAY,YAAY,CAAA,CAAE;AAAA,EACnC;AAAA,EACA,OAAO,CAAC9G,CAAK,GAAsB8G,MAAgD;AACjF,QAAI9G,EAAM,EAAE,QAAQ,UAAU,cAAc;AAC1C,YAAM,EAAE,cAAAwI,EAAA,IAAiB,MAAM,OAAO,4BAAkC;AAExE,aAAO1B,EAAY,YAAY0B,EAAaxI,EAAM,EAAE,OAAO,CAAC;AAAA,IAC9D;AAEO,WAAA8G,EAAY,YAAY,CAAA,CAAE;AAAA,EACnC;AAAA,EACA,OAAO,CAAC9G,CAAK,GAAsB8G,MAAgD;AACjF,QAAI9G,EAAM,EAAE,QAAQ,UAAU,QAAQ;AACpC,YAAM,EAAE,QAAAyI,EAAA,IAAW,MAAM,OAAO,sBAA4B;AAErD,aAAA3B,EAAY,YAAY2B,EAAA,CAAQ;AAAA,IACzC;AAEO,WAAA3B,EAAY,YAAY,CAAA,CAAE;AAAA,EACnC;AAAA,EACA,OAAO,CAAC9G,CAAK,GAAsB8G,MAAgD;AACjF,UAAM,EAAE,aAAA4B,GAAa,SAAAC,EAAQ,IAAI3I,IAAQ,SACnC4I,IAAMD,KAAWD,EAAY,KAC7BG,IAAWF,KAAWD,EAAY;AAExC,QAAIE,KAAOC,GAAU;AACnB,YAAM,EAAE,eAAAC,EAAA,IAAkB,MAAM,OAAO,6BAAmC;AAE1E,aAAOhC,EAAY,YAAYgC,EAAc,EAAE,KAAAF,GAAK,UAAAC,EAAU,CAAA,CAAC;AAAA,IACjE;AAEO,WAAA/B,EAAY,YAAY,CAAA,CAAE;AAAA,EACnC;AAAA,EACA,OAAO,CAAC9G,CAAK,GAAsB8G,MAAgD;AAC3E,UAAA,EAAE,SAAAzB,MAAYrF;AAEpB,QAAIqF,EAAQ,SAASA,EAAQ,UAAU,OAAO;AAC5C,YAAM,EAAE,OAAA0D,EAAA,IAAU,MAAM,OAAO,qBAA2B;AAE1D,UAAIC,IAAS,IACTC,IAAS,IACTC,IAAO;AAEP,aAAA,OAAO7D,EAAQ,SAAU,aAC3B2D,IAAS,OAAO3D,EAAQ,MAAM,SAAW,MAAc,KAAQA,EAAQ,MAAM,QAC7E4D,IAAS,OAAO5D,EAAQ,MAAM,SAAW,MAAc,KAAQA,EAAQ,MAAM,QAC7E6D,IAAO,OAAO7D,EAAQ,MAAM,OAAS,MAAc,KAAQA,EAAQ,MAAM,OAGpEyB,EAAY,YAAYiC,EAAM,EAAE,QAAAC,GAAQ,QAAAC,GAAQ,MAAAC,EAAM,CAAA,CAAC;AAAA,IAChE;AAEO,WAAApC,EAAY,YAAY,CAAA,CAAE;AAAA,EACnC;AAAA,EACA,OAAO,CAAC9G,CAAK,GAAsB8G,MAAgD;AAC7E,QAAA9G,EAAA,EAAQ,QAAQ,aAAa;AAC/B,YAAM,EAAE,aAAAmJ,EAAA,IAAgB,MAAM,OAAO,2BAAiC;AAEtE,aAAOrC,EAAY,YAAYqC,EAAYnJ,IAAQ,QAAQ,WAAW,CAAC;AAAA,IACzE;AAEO,WAAA8G,EAAY,YAAY,CAAA,CAAE;AAAA,EACnC;AAAA,EACA,OAAO,CAAC9G,CAAK,GAAsB8G,MAAgD;AACjF,QAAI9G,EAAM,EAAE,QAAQ,UAAU,UAAU;AACtC,YAAM,EAAE,UAAAoJ,EAAA,IAAa,MAAM,OAAO,wBAA8B;AAEzD,aAAAtC,EAAY,YAAYsC,EAAA,CAAU;AAAA,IAC3C;AAEO,WAAAtC,EAAY,YAAY,CAAA,CAAE;AAAA,EACnC;AAAA,EACA,OAAO,CAAC9G,CAAK,GAAsB8G,MAAgD;AAC7E,QAAA9G,EAAA,EAAQ,QAAQ,QAAQ;AAC1B,YAAM,EAAE,QAAAqJ,EAAA,IAAW,MAAM,OAAO,sBAA4B;AAErD,aAAAvC,EAAY,YAAYuC,EAAA,CAAQ;AAAA,IACzC;AAEO,WAAAvC,EAAY,YAAY,CAAA,CAAE;AAAA,EACnC;AAAA,EACA,OAAO,CAAC9G,CAAK,GAAsB8G,MAAgD;AACjF,QAAI9G,EAAM,EAAE,QAAQ,UAAU,YAAY;AACxC,YAAM,EAAE,YAAAsJ,EAAA,IAAe,MAAM,OAAO,0BAAgC;AAE7D,aAAAxC,EAAY,YAAYwC,EAAA,CAAY;AAAA,IAC7C;AAEO,WAAAxC,EAAY,YAAY,CAAA,CAAE;AAAA,EACnC;AAAA,EACA,OAAO,CAAC9G,CAAK,GAAsB8G,MAAgD;AAC7E,QAAA9G,EAAA,EAAQ,QAAQ,KAAK;AACvB,YAAM,EAAE,KAAAuJ,EAAA,IAAQ,MAAM,OAAO,mBAAyB;AAE/C,aAAAzC,EAAY,YAAYyC,EAAA,CAAK;AAAA,IACtC;AAEO,WAAAzC,EAAY,YAAY,CAAA,CAAE;AAAA,EACnC;AACF,GC9KM0C,KAAwB;AAAA,EAC5B;AACF,GAEMC,KAAuBC,EAAW,KAAK,EAAE,YAAY,EAAE,OAAO,gBAAgB,EAAA,CAAG,GACjFC,KAA2BD,EAAW,KAAK,EAAE,YAAY,EAAE,OAAO,qBAAqB,EAAA,CAAG,GAC1FE,KAA4BF,EAAW,KAAK,EAAE,YAAY,EAAE,OAAO,sBAAsB,EAAA,CAAG,GAE5FG,KAAmBC,GAAW,OAAO,CAACC,OACnC;AAAA,EACL,QAAQ,MACCC,GAASD,CAAI;AACtB,IAED,EAAE,aAAa,CAAA7E,MAAUA,EAAO,UAAU,GAEvC8E,KAAW,CAACD,MAAqB;AAC/B,QAAAE,IAAU,IAAIC,MACdC,IAAOhI,GAAW4H,EAAK,KAAK;AAEvB,aAAAK,KAAgBL,EAAK;AAC9B,aAAS1I,IAAW+I,EAAa,MAAM/I,IAAW+I,EAAa,MAAK;AAClE,YAAM9I,IAAOyI,EAAK,MAAM,IAAI,OAAO1I,CAAQ;AAE3C,MAAA8I,EAAK,QAAQ;AAAA,QACX,MAAM,EAAE,MAAAlI,GAAM,MAAAG,GAAM,IAAAC,KAAM;AACpB,cAAAJ,EAAK,SAAS,cACZuH,GAAsB,SAASvH,EAAK,IAAI,GAAG;AAC7C,YAAAgI,EAAQ,IAAI3I,EAAK,MAAMA,EAAK,MAAMmI,EAAoB;AAEtD,kBAAMY,IAAWN,EAAK,MAAM,IAAI,OAAO3H,CAAI,GACrCkI,IAAYP,EAAK,MAAM,IAAI,OAAO1H,CAAE;AAEtC,mBAAAgI,EAAS,WAAW/I,EAAK,UAC3B2I,EAAQ,IAAI3I,EAAK,MAAMA,EAAK,MAAMqI,EAAwB,GAExDW,EAAU,WAAWhJ,EAAK,UAC5B2I,EAAQ,IAAI3I,EAAK,MAAMA,EAAK,MAAMsI,EAAyB,GAEtD;AAAA,UACT;AAAA,QAEJ;AAAA,QACA,MAAMtI,EAAK;AAAA,QACX,IAAIA,EAAK;AAAA,MAAA,CACV,GAEDD,IAAWC,EAAK,KAAK;AAAA,IACvB;AAGF,SAAO2I,EAAQ;AACjB,GAEaM,KAAa,MACjB;AAAA,EACLV;AAAA,GC1DEW,KAAuB;AAAA,EAC3B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAEMC,IAAmB;AAAA;AAAA,EAEvB,yBAAyB;AAAA,EACzB,cAAc;AAAA,EACd,uBAAuB;AAAA,EACvB,YAAc;AAChB,GAEMC,KAAsBhB,EAAW,KAAK,EAAE,YAAY,EAAE,GAAGe,GAAkB,OAAO,eAAe,EAAA,CAAG,GACpGE,KAA0BjB,EAAW,KAAK,EAAE,YAAY,EAAE,GAAGe,GAAkB,OAAO,oBAAoB,EAAA,CAAG,GAC7GG,KAA2BlB,EAAW,KAAK,EAAE,YAAY,EAAE,GAAGe,GAAkB,OAAO,qBAAqB,EAAA,CAAG,GAC/GI,KAAiBnB,EAAW,KAAK,EAAE,YAAY,EAAE,GAAGe,GAAkB,OAAO,UAAU,EAAA,CAAG,GAC1FK,KAAqBpB,EAAW,KAAK,EAAE,YAAY,EAAE,GAAGe,GAAkB,OAAO,uBAAuB,EAAA,CAAG,GAC3GM,KAAsBrB,EAAW,KAAK,EAAE,YAAY,EAAE,GAAGe,GAAkB,OAAO,wBAAwB,EAAA,CAAG,GAE7GO,KAAkBlB,GAAW,OAAO,CAACC,OAClC;AAAA,EACL,QAAQ,MACCC,GAASD,CAAI;AACtB,IAED,EAAE,aAAa,CAAA7E,MAAUA,EAAO,UAAU,GAEvC8E,KAAW,CAACD,MAAqB;AAC/B,QAAAE,IAAU,IAAIC,MACdC,IAAOhI,GAAW4H,EAAK,KAAK;AAEvB,aAAAK,KAAgBL,EAAK;AAC9B,aAAS1I,IAAW+I,EAAa,MAAM/I,IAAW+I,EAAa,MAAK;AAClE,YAAM9I,IAAOyI,EAAK,MAAM,IAAI,OAAO1I,CAAQ;AACvC,UAAA4J;AAEJ,MAAAd,EAAK,QAAQ;AAAA,QACX,MAAM,EAAE,MAAAlI,GAAM,MAAAG,GAAM,IAAAC,KAAM;AACpB,cAAAJ,EAAK,SAAS;AAChB,gBAAIuI,GAAqB,SAASvI,EAAK,IAAI,GAAG;AAC5C,cAAAgI,EAAQ,IAAI3I,EAAK,MAAMA,EAAK,MAAMoJ,EAAmB;AAErD,oBAAML,IAAWN,EAAK,MAAM,IAAI,OAAO3H,CAAI,GACrCkI,IAAYP,EAAK,MAAM,IAAI,OAAO1H,CAAE;AAEtC,qBAAAgI,EAAS,WAAW/I,EAAK,UAC3B2I,EAAQ,IAAI3I,EAAK,MAAMA,EAAK,MAAMqJ,EAAuB,GAEvDL,EAAU,WAAWhJ,EAAK,UAC5B2I,EAAQ,IAAI3I,EAAK,MAAMA,EAAK,MAAMsJ,EAAwB,GAErD;AAAA,YAAA;AACT,cAAW3I,EAAK,SAAS,eAEvBgJ,IAAa,EAAE,MAAA7I,GAAM,IAAAC,GAAI,WAAWD,GAAM,SAASC,MAC1CJ,EAAK,SAAS,eAEnBG,MAAS6I,EAAW,QACtBA,EAAW,YAAY5I,GAEf4H,EAAA,IAAI7H,GAAMC,GAAIyI,EAAkB,KAC/BzI,MAAO4I,EAAW,OAC3BA,EAAW,UAAU7I,GAErB6H,EAAQ,IAAIgB,EAAW,WAAWA,EAAW,SAASJ,EAAc,GAC5DZ,EAAA,IAAI7H,GAAMC,GAAI0I,EAAmB;AAAA,QAIjD;AAAA,QACA,MAAMzJ,EAAK;AAAA,QACX,IAAIA,EAAK;AAAA,MAAA,CACV,GAEDD,IAAWC,EAAK,KAAK;AAAA,IACvB;AAGF,SAAO2I,EAAQ;AACjB,GAEaiB,KAAO,MACX;AAAA,EACLF;AAAA,GCzFEG,KAAqB,MAClB;AAAA,EACLxD,EAAW,iBAAiB,GAAG;AAAA,IAC7B,OAAO;AAAA,EAAA,CACR;AAAA,EACDA,EAAW,kBAAkB,GAAG;AAAA,IAC9B,OAAO;AAAA,EAAA,CACR;AAAA;AAAA,GAKQyD,KAAM,MACV;AAAA,EACL,GAAGD,GAAmB;AAAA,GCdbE,KAAe,MACnB1D,EAAW,cCAP2D,KAAQ,MA+JZ;AAAA,EA9JWC;AAAA,IAChBC,GAAe,OAAO;AAAA;AAAA,MAEpB;AAAA,QACE,KAAKC,EAAK;AAAA,QACV,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,MACT;AAAA;AAAA,MAEA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,WAAW;AAAA,MACb;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,YAAY;AAAA,MACd;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA;AAAA,MAEA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,WAAW;AAAA,MACb;AAAA;AAAA,MAEA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,YAAY;AAAA,MACd;AAAA;AAAA,MAEA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK,WAAWA,EAAK,YAAY;AAAA,QACtC,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK,WAAWA,EAAK,YAAY;AAAA,QACtC,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK,MAAMA,EAAK,YAAY;AAAA,QACjC,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK,QAAQA,EAAK,YAAY;AAAA,QACnC,OAAO;AAAA,MACT;AAAA;AAAA,MAEA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,YAAY;AAAA,MACd;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,UAAU;AAAA,QACV,YAAY;AAAA,MACd;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,UAAU;AAAA,QACV,YAAY;AAAA,MACd;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,UAAU;AAAA,QACV,YAAY;AAAA,MACd;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,UAAU;AAAA,QACV,YAAY;AAAA,MACd;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,UAAU;AAAA,QACV,YAAY;AAAA,MACd;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,UAAU;AAAA,QACV,YAAY;AAAA,MACd;AAAA;AAAA,MAEA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,WAAW;AAAA,MACb;AAAA,MACA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,QACP,WAAW;AAAA,MACb;AAAA;AAAA,MAEA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,KAAKA,EAAK,QAAQA,EAAK,MAAM;AAAA,QAC7B,OAAO;AAAA,MACT;AAAA;AAAA,MAEA;AAAA,QACE,KAAKA,EAAK;AAAA,QACV,OAAO;AAAA,MACT;AAAA,IAAA,CACD;AAAA,EAAA;AAID,GCtJEC,KAAoB,CAACjL,MAAoE;AACzF,MAAAA,EAAW,SAAS;AACtB,WAAOD,GAAaC,CAAU;AAElC,GAEakL,KAAc,CAAC,CAAC3L,GAAOoE,CAAQ,MAAmD;AAC7F,QAAM,EAAE,YAAA3D,EAAA,IAAeT,EAAA,EAAQ;AAE/B,SAAO4L,GAAY,OAAO;AAAA,IACxB,KAAK5L,IAAQ,QAAQ;AAAA,IACrB,WAAW0L,GAAkBjL,CAAU;AAAA,IACvC,YAAY;AAAA,MACVoL,GAAO,GAAG;AAAA,QACR,GAAGC;AAAA,QACH,GAAGC;AAAA,MAAA,CACJ;AAAA,MACDxB,GAAW;AAAA,MACXW,GAAK;AAAA,MACLc,GAAQ;AAAA,MACRZ,GAAI;AAAA,MACJC,GAAa;AAAA,MACbC,GAAM;AAAA,MACN,GAAG1D,GAAa,CAAC5H,GAAOoE,CAAQ,CAAC;AAAA,IACnC;AAAA,EAAA,CACD;AACH,GCpCa6H,KAAa,CAAC,CAACjM,GAAOoE,CAAQ,GAAsB8H,MAA6C;AACtG,QAAAC,IAAWD,GAAQ,eACnBE,IAAOD,GAAU,aAAa,KAAKA,IAAyB,QAE5DlM,IAAS,IAAI0H,EAAW;AAAA,IAC5B,UAAU,CAAC0E,MAAgD;AACnD,YAAA,EAAE,SAAAhH,MAAYrF,KACdsM,IAASD,EAAY,OAAO,SAAS;AAEnC,MAAAhH,EAAA,MAAM,aAAaiH,CAAM,GAC1BrM,EAAA,OAAO,CAACoM,CAAW,CAAC,GAEvBA,EAAY,eACdjI,EAAS,EAAE,GAAGpE,EAAA,GAAS,KAAKsM,EAAQ,CAAA,GAE5BjH,EAAA,MAAM,YAAYiH,CAAM;AAAA,IAEpC;AAAA,IACA,MAAAF;AAAA,IACA,OAAOT,GAAY,CAAC3L,GAAOoE,CAAQ,CAAC;AAAA,EAAA,CACrC;AAEM,SAAAnE;AACT,GC3BMsM,IAAQ;AAAA,EACZ,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,WAAW;AAAA,EACX,QAAQ;AACV,GAEMC,KAAU,CAAC7H,MAAgB;AAG3B,MAFS,OAAO,UAAU,SAAS,KAAKA,CAAM,MAErC4H,EAAM;AACV,WAAA,WAAW5H,EAAO,YAAY,IAAI;AAE7C,GAEMD,IAAK,CAACC,GAAa1C,MAChBuK,GAAQ7H,CAAM,MAAM1C,GAGvBwK,KAAa,CAACP,GAAaQ,MAAgB;AACzC,QAAAC,wBAAW,WAEXC,IAAS,CAACV,GAAaQ,MACvBC,EAAK,IAAIT,CAAM,MACfxH,EAAGwH,GAAQK,EAAM,MAAM,KAAQI,EAAA,IAAIT,GAAQ,EAAI,GAC/CxH,EAAGgI,GAAQH,EAAM,SAAS,KAAUL,IAEpCxH,EAAGwH,GAAQK,EAAM,KAAK,KAAK7H,EAAGgI,GAAQH,EAAM,KAAK,IAC5C,CAAC,GAAGG,CAAM,IAGfhI,EAAGwH,GAAQK,EAAM,MAAM,KAAK7H,EAAGgI,GAAQH,EAAM,MAAM,IAC9C,OAAO,KAAKL,CAAM,EAAE,OAAO,CAACW,GAA2CzH,OACxE,OAAO,eAAe,KAAKsH,GAAQtH,CAAG,IAC5ByH,EAAAzH,CAAG,IAAIwH,EAAOV,EAAO9G,CAAG,GAAGsH,EAAOtH,CAAG,CAAC,IAEtCyH,EAAAzH,CAAG,IAAI8G,EAAO9G,CAAG,GAGxByH,IACN,CAAE,CAAA,IAGAH;AAGF,SAAAE,EAAOV,GAAQQ,CAAM;AAC9B,GAEaI,IAAW,CAAIC,GAAMC,MACzBP,GAAWM,GAAGC,CAAC,GC/CXC,KAAO,CAAC,CAACjN,GAAOoE,CAAQ,GAAsB8I,MAAgB;AAChE,EAAA9I,EAAA0I,EAAS9M,KAAS,EAAE,SAAS,EAAE,KAAAkN,EAAA,EAAO,CAAA,CAAC,GAE1ClN,EAAA,EAAE,OAAO,SAAS2L,GAAY,CAAC3L,GAAOoE,CAAQ,CAAC,CAAC;AACxD,GCNaiB,KAAU,CAAC,CAACrF,CAAK,MACrBA,EAAQ,EAAA,SCEJiI,KAAc,OAAO,CAACjI,GAAOoE,CAAQ,GAAsBiB,MAAyB;AACzF,QAAA,EAAE,WAAA8H,MAAcnN;AAEf,SAAAmN,EAAU,QAAQ,YAAY;AACnC,IAAA/I,EAAS0I,EAAS9M,EAAM,GAAG,EAAE,SAAAqF,EAAA,CAAS,CAAC;AACvC,UAAMkB,IAAU,MAAMC,GAAmB,CAACxG,GAAOoE,CAAQ,CAAC;AAE1D,IAAApE,EAAQ,EAAA,OAAO,SAAS,EAAE,SAAAuG,EAAS,CAAA;AAAA,EAAA,CACpC;AACH,GCTa6G,KAAS,CAACpG,GAA0B3B,IAAsC,OAAO;AAC5F,MAAIA,EAAQ;AACH,WAAAgI,GAAerG,GAAO3B,EAAQ,UAAU;AACjD,MAAIA,EAAQ;AACH,WAAAiI,GAAUtG,GAAO3B,EAAQ,SAAS;AAC3C,MAAIA,EAAQ;AACH,WAAAkI,GAASvG,GAAO3B,EAAQ,EAAE;AACrC,GAEakI,KAAW,CAACvG,GAA0BwG,MAA6B;AACxE,QAAA,CAACxN,CAAK,IAAIgH;AAEZ,MAAAwG,MAAOC,GAAoB;AAC7B,WAAOH,GAAUtG,GAAO,EAAE,OAAO,GAAG,KAAK,GAAG;AAE1C,MAAAwG,MAAOC,GAAoB,KAAK;AAClC,UAAMpM,IAAWrB,EAAQ,EAAA,OAAO,MAAM,IAAI;AAE1C,WAAOsN,GAAUtG,GAAO,EAAE,OAAO3F,GAAU,KAAKA,GAAU;AAAA,EAC5D;AACF,GAEagM,KAAiB,CAAC,CAACrN,CAAK,GAAsBS,MAAuC;AAC1F,QAAA,EAAE,QAAAR,MAAWD;AAEZ,EAAAC,EAAA;AAAA,IACLA,EAAO,MAAM,OAAO;AAAA,MAClB,WAAWO,GAAaC,CAAU;AAAA,IAAA,CACnC;AAAA,EAAA;AAEL,GAEa6M,KAAY,CAACtG,GAA0BrG,MAC3C0M,GAAerG,GAAO,CAACrG,CAAS,CAAC,GCpC7B+M,KAAS,CAAC,CAAC1N,CAAK,GAAsBkN,MAAgB;AAC3D,QAAA,EAAE,QAAAjN,MAAWD;AAEZ,EAAAC,EAAA;AAAA,IACLA,EAAO,MAAM,OAAO;AAAA,MAClB,SAAS;AAAA,QACP,MAAM;AAAA,QACN,IAAIA,EAAO,MAAM,IAAI;AAAA,QACrB,QAAQiN;AAAA,MACV;AAAA,IAAA,CACD;AAAA,EAAA;AAEL,GCRaS,KAAO,CAAC,CAAC3N,GAAOoE,CAAQ,GAAsB,EAAE,OAAAvB,GAAO,QAAAD,GAAQ,WAAWgL,QAA8C;AAC7H,QAAA,EAAE,QAAA3N,MAAWD,KAEbW,IAAYiN,KAAiBnN,GAAW,CAACT,GAAOoE,CAAQ,CAAC,EAAE,IAAA,KAAS,EAAE,OAAO,GAAG,KAAK,EAAE,GACvF7B,IAAOtC,EAAO,MAAM,SAASU,EAAU,OAAOA,EAAU,GAAG;AAE1D,EAAAwD,GAAA,CAACnE,GAAOoE,CAAQ,GAAG,GAAGxB,CAAM,GAAGL,CAAI,GAAGM,CAAK,IAAIlC,CAAS,GACxDyM,GAAA,CAACpN,GAAOoE,CAAQ,GAAG,EAAE,YAAY,CAAC,EAAE,OAAOzD,EAAU,QAAQiC,EAAO,QAAQ,KAAKjC,EAAU,MAAMiC,EAAO,OAAO,CAAC,GAAG;AAC5H,GCFaiL,KAAY,CAAqFC,GAA4BC,MAAmG;AAC3O,QAAM/N,IAAwB;AAAA,IAC5B,WAAW;AAAA,MACT,WAAW,CAAC;AAAA,MACZ,UAAU,CAAC;AAAA,MACX,SAAS,CAAC;AAAA,IACZ;AAAA,IACA,QAAQ;AAAA,EAAA,GAGJgO,IAAW,CAACC,GAA+B,EAAE,SAAAC,GAAS,QAAAC,QACnD,MAAM;AACP,QAAA;AACI,YAAAC,IAAeH,EAAQjO,EAAM,KAAK;AAExC,cAAQ,QAAQoO,CAAY,EAAE,KAAKF,GAASC,CAAM;AAAA,aAC3CE,GAAY;AACnBF,MAAAA,EAAOE,CAAK;AAAA,IACd;AAAA,EAAA,GAIEF,IAAS,CAACzG,MAAyB;AACnC,IAAA1H,EAAM,WAAW,cACnBA,EAAM,SAAS,YACfA,EAAM,QAAQ0H,GAEd1H,EAAM,UAAU,SAAS,QAAQ,CAAAgO,MAAYA,GAAU,GACvDhO,EAAM,UAAU,QAAQ,QAAQ,CAAAgO,MAAYA,GAAU;AAAA,EACxD,GAGIE,IAAU,CAACxG,MAAyB;AACpC,IAAA1H,EAAM,WAAW,cACnBA,EAAM,SAAS,aACfA,EAAM,QAAQ0H,GAEd1H,EAAM,UAAU,UAAU,QAAQ,CAAAgO,MAAYA,GAAU,GACxDhO,EAAM,UAAU,QAAQ,QAAQ,CAAAgO,MAAYA,GAAU;AAAA,EACxD,GAGIM,IAAO,CAAoFC,GAA2BC,MACnH,IAAI,QAA0C,CAACN,GAASC,MAAW;AACpE,IAAAnO,EAAM,WAAW,cACfuO,KACIvO,EAAA,UAAU,UAAU,KAAKgO,EAASO,GAAa,EAAE,SAAAL,GAAS,QAAAC,EAAO,CAAC,CAAC,GAGvEK,KACIxO,EAAA,UAAU,SAAS,KAAKgO,EAASQ,GAAY,EAAE,SAAS,QAAW,QAAAL,EAAO,CAAC,CAAC,IAIlFnO,EAAM,WAAW,eAAeuO,KAClCP,EAASO,GAAa,EAAE,SAAAL,GAAS,QAAAC,EAAQ,CAAA,KAGvCnO,EAAM,WAAW,cAAcwO,KACjCR,EAASQ,GAAY,EAAE,SAAS,QAAW,QAAAL,EAAQ,CAAA;EACrD,CACD;AAGH,wBAAe,MAAM;AACf,QAAA;AACF,MAAAJ,EAAQG,GAASC,CAAM;AAAA,aAChBE,GAAY;AACnB,MAAAF,EAAOE,CAAK;AAAA,IACd;AAAA,EAAA,CACD,GAEM;AAAA,IACL,GAAGP;AAAA,IACH,CAAC,OAAO,WAAW,GAAG;AAAA,IACtB,OAAOQ,EAAK,KAAK,QAAW,MAAS;AAAA,IACrC,SAAS,CAACG,MACD,IAAI,QAAQ,CAACP,GAASC,MAAW;AAClC,MAAAnO,EAAM,WAAW,aACbA,EAAA,UAAU,QAAQ,KAAKgO,EAASS,GAAW,EAAE,SAAAP,GAAS,QAAAC,EAAO,CAAC,CAAC,GAGnEnO,EAAM,WAAW,gBACTyO,KACVP,EAAQlO,EAAM,KAAK,IAGjBA,EAAM,WAAW,eACTyO,KACVN,EAAOnO,EAAM,KAAK;AAAA,IACpB,CACD;AAAA,IAEH,MAAAsO;AAAA,EAAA;AAEJ,GCzFaI,KAAe,CAAC1H,MAAoD;AAC/E,QAAM2H,IAAW;AAAA,IACf,SAAS5O,GAAQ,KAAK,QAAWiH,CAAK;AAAA,IACtC,OAAO9G,GAAM,KAAK,QAAW8G,CAAK;AAAA,IAClC,QAAQtD,GAAO,KAAK,QAAWsD,CAAK;AAAA,IACpC,QAAQ9C,GAAO,KAAK,QAAW8C,CAAK;AAAA,IACpC,QAAQ7C,GAAO,KAAK,QAAW6C,CAAK;AAAA,IACpC,MAAMiG,GAAK,KAAK,QAAWjG,CAAK;AAAA,IAChC,SAAS3B,GAAQ,KAAK,QAAW2B,CAAK;AAAA,IACtC,aAAaiB,GAAY,KAAK,QAAWjB,CAAK;AAAA,IAC9C,QAAQoG,GAAO,KAAK,QAAWpG,CAAK;AAAA,IACpC,YAAYvG,GAAW,KAAK,QAAWuG,CAAK;AAAA,IAC5C,QAAQ0G,GAAO,KAAK,QAAW1G,CAAK;AAAA,IACpC,MAAM2G,GAAK,KAAK,QAAW3G,CAAK;AAAA,EAAA;AAGlC,SAAO6G,GAAUc,GAAU,CAACT,GAASC,MAAW;AAC1C,QAAA;AACI,YAAA,CAACnO,CAAK,IAAIgH;AAGhB,MAAAhH,EAAA,EAAQ,UAAU,QAAQ,MAAMkO,EAAQS,CAAQ,CAAC;AAAA,aAC1CN,GAAY;AACnB,MAAAF,EAAOE,CAAK;AAAA,IACd;AAAA,EAAA,CACD;AACH,GC1CaO,KAAY,MAAM;AAC7B,QAAM5O,IAAQ;AAAA,IACZ,OAAgC,CAAC;AAAA,IACjC,UAAU;AAAA,EAAA,GAGN6O,IAAU,YAAY;AACpB,UAAA3F,IAAOlJ,EAAM,MAAM,IAAI;AAE7B,IAAKkJ,MAEL,MAAMA,EAAK,GAELlJ,EAAA,YAEN,MAAM6O,EAAQ;AAAA,EAAA;AAGT,SAAA;AAAA,IACL,SAAS,CAACb,MACD,IAAI,QAAQ,CAACE,GAASC,MAAW;AACtC,YAAMjF,IAAO,YAAY;AACnB,YAAA;AACF,gBAAM8E,EAAS,GAEPE;iBACDG,GAAO;AACd,UAAAF,EAAOE,CAAK;AAAA,QACd;AAAA,MAAA;AAOF,MAJMrO,EAAA,MAAM,KAAKkJ,CAAI,GACflJ,EAAA,YAGF,EAAAA,EAAM,WAAW,MAEb6O;IAAA,CACT;AAAA,EACH;AAEJ,GClCaC,KAAa,MAAiC;AACzD,QAAMzJ,IAAU;AAAA,IACd,KAAK;AAAA,IACL,OAAO;AAAA,MACL,WAAW;AAAA,MACX,aAAa;AAAA,MACb,SAAS,MAAM;AAAA,MAAC;AAAA,MAChB,cAAc;AAAA,MACd,OAAO,CAAC,SAAS;AAAA,IACnB;AAAA,IACA,OAAO;AAAA,MACL,aAAa,MAAM;AAAA,MAAC;AAAA,MACpB,cAAc,MAAM;AAAA,MAAC;AAAA,IACvB;AAAA,IACA,WAAW;AAAA,MACT,YAAYgC,GAAqB;AAAA,MACjC,aAAa;AAAA,MACb,cAAc;AAAA,MACd,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,SAAS;AAAA,IACX;AAAA,IACA,aAAa;AAAA;AAAA,MAEX,KAAK;AAAA,MACL,UAAU;AAAA,IACZ;AAAA,IACA,OAAO;AAAA,IACP,aAAa;AAAA,IACb,SAAS,CAAC;AAAA,IACV,aAAa;AAAA,IACb,QAAQ;AAAA,IACR,YAAY,CAAC;AAAA,IACb,SAAS;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,MACN,WAAW;AAAA,MACX,SAAS;AAAA,MACT,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,MAAM;AAAA,MACN,aAAa;AAAA,MACb,OAAO;AAAA,MACP,UAAU;AAAA,MACV,QAAQ;AAAA,IACV;AAAA;AAAA,IAEA,SAAS;AAAA,IACT,KAAK;AAAA,EAAA;AAGA,SAAA;AAAA,IACL,KAAK;AAAA,IACL,QAAQ,CAAC;AAAA,IACT,YAAYa,GAAiB;AAAA,IAC7B,SAAA7C;AAAA,IACA,MAAM4B,GAAc;AAAA,IACpB,QAAQA,GAAc;AAAA,IACtB,WAAW2H,GAAU;AAAA,EAAA;AAEzB,GAEaG,KAAY,CAACC,MACjBlC,EAASgC,MAAcE,CAAY,GAG/BC,KAAY,CAAC5J,GAAkBpE,IAA+B,OAA0B;AACnG,QAAM,CAACjB,GAAOoE,CAAQ,IAAI8K,EAAaH,GAAU,EAAE,GAAG9N,GAAW,KAAKoE,EAAQ,OAAO,IAAI,SAAAA,EAAA,CAAS,CAAC;AAE5F,SAAA,CAACrF,GAAOoE,CAAQ;AACzB,GClFa+K,KAA2B,KAE3BC,KAAU,CAAC7M,GAAc8M,IAAyBF,OAAqC;AAC5F,QAAAG,IAAWC,GAAgBhN,GAAM8M,CAAc,GAC/CG,IAAYC,GAAiBlN,CAAI,GACjCmN,IAAYC,GAAiBpN,CAAI,GACjCqN,IAAYC,GAAiBtN,CAAI;AAEvC,SAAO,CAAC+M,GAAUE,GAAWE,GAAWE,CAAS,EAAE,KAAK,KAAK;AAC/D,GAEaC,KAAmB,CAACtN,MAGxB,GAFWuN,GAAYvN,CAAI,CAEf,UAGRoN,KAAmB,CAACpN,MAGxB,GAFWwN,GAAYxN,CAAI,CAEf,UAGRgN,KAAkB,CAAChN,GAAc8M,IAAyBF,OAAqC;AACpG,QAAAG,IAAWU,GAAWzN,GAAM8M,CAAc,GAC1CY,IAAkB,KAAK,MAAMX,CAAQ,GACrCY,IAAkB,KAAK,MAAOZ,IAAW,IAAK,EAAE;AAEtD,SAAIW,MAAoB,IACf,GAAGC,CAAe,WAGpB,GAAGD,CAAe,KAAKC,CAAe;AAC/C,GAEaT,KAAmB,CAAClN,MAGxB,GAFW4N,GAAY5N,CAAI,CAEf,UAGRuN,KAAc,CAACvN,MACnBA,EAAK,QAGDwN,KAAc,CAACxN,MACnBA,EAAK,MAAM,IAAI,EAAE,QAGbyN,KAAa,CAACzN,GAAc8M,IAAyBF,OACzDgB,GAAY5N,CAAI,IAAI8M,GAGhBc,KAAc,CAAC5N,MAAyB;AAC7C,QAAA6N,IAAW7N,EAAK,QAAQ,QAAQ,EAAE,EAAE,QAAQ,aAAa,GAAG,EAAE,KAAK;AAEzE,SAAK6N,IAIEA,EAAS,MAAM,KAAK,EAAE,SAHpB;AAIX;;ACxDO,MAAMC,KAAmDA,MAAM;AACpE,QAAM,CAACrQ,CAAK,IAAIsQ;AAEhB,UAAA,MAAA;AAAA,QAAAC,IAAAC,EAAAC,EAAA,GAAAC,IAAAH,EAAAI,YAAAC,IAAAF,EAAAC,YAAAE,IAAAD,EAAAD,YAAA,CAAAG,GAAAC,CAAA,IAAAC,EAAAH,EAAAI,WAAA,GAAAC,IAAAJ,EAAAG,aAAA,CAAAE,GAAAC,CAAA,IAAAJ,EAAAE,EAAAD,WAAA,GAAAI,IAAAF,EAAAF,aAAA,CAAAK,GAAAC,CAAA,IAAAP,EAAAK,EAAAJ,WAAA;AAAAO,WAAAA,EAAAZ,GAAAa,EAISC,GAAI;AAAA,MAAA,IAACC,OAAI;AAAA,eAAG3R,EAAK,EAAGqF,QAAQuM;AAAAA,MAAW;AAAA,MAAA,IAAAC,WAAA;AAAA,YAAAC,IAAAtB,EAAAuB,EAAA,GAAAC,IAAAF,EAAAnB;AAAAa,eAAAA,EAAAQ,GAAA,MAE5B5C,GAAQpP,EAAO,EAACkN,GAAG,CAAC,GAAA4E;AAAAA,MAAA;AAAA,KAAAhB,GAAAA,GAAAC,CAAA,GAAAS,EAAAZ,GAAAa,EAG/BC,GAAI;AAAA,MAAA,IAACC,OAAI;AAAA,eAAGM,GAAAjS,MAAAA,CAAAA,CAAAA,EAAO,EAACqF,QAAQuM,WAAW,EAAI5R,KAAAA,EAAO,EAACqF,QAAQ6M,UAAUC;AAAAA,MAAW;AAAA,MAAA,IAAAN,WAAA;AAAA,eAAArB,EAAA4B,EAAA;AAAA,MAAA;AAAA,KAAAjB,GAAAA,GAAAC,CAAA,GAAAI,EAAAZ,GAAAa,EAGhFC,GAAI;AAAA,MAAA,IAACC,OAAI;AAAA,eAAE3R,EAAO,EAACqF,QAAQ6M,UAAUC;AAAAA,MAAW;AAAA,MAAA,IAAAN,WAAA;AAAA,eAAArB,EAAA6B,EAAA;AAAA,MAAA;AAAA,KAAAf,GAAAA,GAAAC,CAAA,GAAAhB;AAAAA,EAAA;AAS3D;;ACvBO,MAAM+B,KAAsBA,MAAM;AACvC,QAAM,CAACC,GAAOC,CAAQ,IAAItD,EAAa,CAAC,GAClC,CAACuD,GAAOC,CAAQ,IAAIxD,EAAqB,CAAE,CAAA,GAC3C,CAACyD,GAAWC,CAAY,IAAI1D,EAAa,EAAK,GAC9C,CAAC2D,GAAWC,CAAY,IAAI5D,EAAa,EAAK,GAC9C,CAAClP,GAAOoE,CAAQ,IAAIkM,EAAQ,GAE5ByC,IAAaA,MAAM;AACvBD,IAAAA,EAAa,EAAK;AAAA,KAGdE,IAAcC,CAAAA,MAAqB;AACvC,QAAIjT,EAAO,EAACqF,QAAQoN,MAAMS,aAAa;AACrCD,MAAAA,EAAME,eAAc,GACpBF,EAAMG,gBAAe;AAErB,YAAMC,IAAWJ,EAAMK;AAEvB,MAAID,GAAUZ,QACZc,EAAYF,EAASZ,KAAK,KAE1BD,EAAS,CAAC,GACVM,EAAa,EAAK,GAClBJ,EAAS,CAAE,CAAA;AAAA,IAEf;AAAA,KAGIc,IAAeP,CAAAA,MAAqB;AACxC,IAAIjT,EAAO,EAACqF,QAAQoN,MAAMS,gBACxBD,EAAME,eAAc,GAEpBX,EAASD,MAAU,CAAC,GACpBO,EAAa,EAAI;AAAA,KAIfW,IAAeR,CAAAA,MAAqB;AACxC,IAAIjT,EAAO,EAACqF,QAAQoN,MAAMS,gBACxBD,EAAME,eAAc,GAEpBX,EAASD,MAAU,CAAC,GAEhBA,EAAK,MAAO,KACdO,EAAa,EAAK;AAAA,KAIlBY,IAAcT,CAAAA,MAAqB;AACvC,IAAIjT,EAAO,EAACqF,QAAQoN,MAAMS,gBACxBD,EAAME,eAAc,GAEpBL,EAAa,EAAI;AAAA,KAIfa,IAAUV,CAAAA,MAAqB;AACnC,IAAIjT,EAAO,EAACqF,QAAQoN,MAAMS,gBACxBD,EAAME,eAAc,GAEpBX,EAAS,CAAC,GACVM,EAAa,EAAK;AAAA,KAIhBc,IAAWX,CAAAA,MAA0B;AACzC,QAAIjT,EAAO,EAACqF,QAAQoN,MAAMoB,WAAW;AACnCZ,MAAAA,EAAME,eAAc;AAEpB,YAAME,IAAWJ,EAAMa;AAEvB,MAAIT,GAAUZ,SAASY,EAASZ,MAAMsB,SAAS,KAC7CR,EAAYF,EAASZ,KAAK;AAAA,IAC9B;AAAA,KAGIc,IAAeS,CAAAA,MAAwB;AAC3CC,UAAM7R,KAAK4R,CAAS,EAAEE,QAASC,CAAAA,MAAS;AACtCzB,MAAAA,EAAS,CAAC,GAAGD,KAAS0B,CAAI,CAAC;AAAA,IAC7B,CAAC,GAEDvB,EAAa,EAAI,GACjBE,EAAa,EAAI,GAEjBsB,QAAQlG,QAAQlO,EAAO,EAACqF,QAAQoN,MAAM1E,QAAQiG,CAAS,CAAC,EAAE1F,KAAM+F,CAAAA,MAAQ;AACtE,UAAIrU,EAAK,EAAGqF,QAAQoN,MAAM6B,gBAAgBD,GAAK;AAC7C,cAAME,IAAU,OAAMF,CAAI;AAE1BlQ,QAAAA,GAAO,CAACnE,GAAOoE,CAAQ,GAAGmQ,CAAM;AAAA,MAClC;AAAA,IACF,CAAC,EAAEC,QAAQ,MAAM;AACfhC,MAAAA,EAAS,CAAC,GACVI,EAAa,EAAK,GAClBE,EAAa,EAAK,GAClBJ,EAAS,CAAE,CAAA;AAAA,IACb,CAAC;AAAA;AAGH+B,SAAAA,GAAQ,MAAM;AACZC,aAASC,iBAAiB,aAAanB,CAAW,GAClDkB,SAASC,iBAAiB,aAAalB,CAAW,GAClDiB,SAASC,iBAAiB,YAAYjB,CAAU,GAChDgB,SAASC,iBAAiB,QAAQhB,CAAM,GACxC3T,EAAO,EAACoM,KAAKuI,iBAAiB,SAASf,CAAO;AAAA,EAChD,CAAC,GAEDgB,GAAU,MAAM;AACdF,aAASG,oBAAoB,aAAarB,CAAW,GACrDkB,SAASG,oBAAoB,aAAapB,CAAW,GACrDiB,SAASG,oBAAoB,YAAYnB,CAAU,GACnDgB,SAASG,oBAAoB,QAAQlB,CAAM,GAC3C3T,EAAO,EAACoM,KAAKyI,oBAAoB,SAASjB,CAAO;AAAA,EACnD,CAAC,IAED,MAAA;AAAA,QAAArD,IAAAC,EAAA4B,EAAA,GAAA1B,IAAAH,EAAAI,YAAAC,IAAAF,EAAAO,aAAAa,IAAAlB,EAAAD,YAAAqB,IAAAF,EAAAnB,YAAAmE,IAAA9C,EAAAf,aAAA,CAAAJ,GAAAE,CAAA,IAAAC,EAAA8D,EAAA7D,WAAA,GAAAH,IAAAgB,EAAAb;AAAA8D,WAAAA,GAAArE,GAAA,eAEwBnJ,EAAM,GAAAuK,EAAA6C,iBAAA,QAE0B3B,CAAU,GAAAxB,EAAAQ,GAAAP,EAEvDuD,IAAG;AAAA,MAAA,IAACC,OAAI;AAAA,eAAExC,EAAK,EAAGyC,MAAM,GAAG,CAAC;AAAA,MAAC;AAAA,MAAArD,UAAGsC,CAAAA,OAAI,MAAA;AAAA,YAAAjD,IAAAV,EAAA6B,EAAA;AAAA8C,eAAAA,GAAAC,CAAAA,MAAA;AAAA,cAAAC,IACgBlB,EAAKmB,MAAIC,IAAOC,IAAIC,gBAAgBtB,CAAI;AAACkB,iBAAAA,MAAAD,EAAAvN,KAAA6N,GAAAxE,GAAAkE,OAAAA,EAAAvN,IAAAwN,CAAA,GAAAE,MAAAH,EAAAO,KAAAD,GAAAxE,GAAAkE,OAAAA,EAAAO,IAAAJ,CAAA,GAAAH;AAAAA,QAAA,GAAA;AAAA,UAAAvN,GAAA+N;AAAAA,UAAAD,GAAAC;AAAAA,QAAA,CAAA,GAAA1E;AAAAA,MAAA,GAAA;AAAA,IAC7F,CAAA,CAAA,GAAAM,EAAAM,GAAAL,EAEFC,GAAI;AAAA,MAAA,IAACC,OAAI;AAAA,eAAEgB,EAAS;AAAA,MAAE;AAAA,MAAA,IAAEkD,WAAQ;AAAA,eAAArF,EAAAC,EAAA;AAAA,MAAA;AAAA,MAAA,IAAAoB,WAAA;AAAA,eAAArB,EAAAuB,EAAA;AAAA,MAAA;AAAA,KAAAlB,GAAAA,GAAAE,CAAA,GAAAD,EAAAgF,UAIM/C,GAAUoC,GAAA,MAAA5E,EAAAwF,UAAAC,OAAA,WAAA,CAAA,CAbNnD,EAAW,CAAA,CAAA,GAAAoD,MAAA1F;AAAAA,EAAA;AAqBhE;AAAC2F,GAAA,CAAA,OAAA,CAAA;ACxIM,MAAMC,KAA+CC,CAAUA,MAAA;AAgBpE,QAAM,CAACpW,GAAOoE,CAAQ,IAAIkM,EAAS,GAE7BrQ,IAASgM,GAAW,CAACjM,GAAOoE,CAAQ,GAAGgS,EAAMlK,MAAM,GAEnD;AAAA,IAAEiB,WAAAA;AAAAA,MAAcnN,EAAM;AACnB8M,SAAAA,EAAAA,EAAS9M,KAAS;AAAA,IAAEC,QAAAA;AAAAA,EAAQ,CAAA,CAAC,GAEtCkN,EAAUkJ,QAAQ,YAAY;AAC5B,UAAM9P,IAAU,MAAMC,GAAmB,CAACxG,GAAOoE,CAAQ,CAAC;AAE1DnE,IAAAA,EAAOqW,SAAS;AAAA,MAAE/P,SAAAA;AAAAA,IAAAA,CAAS;AAAA,EAAA,CAC5B,GAEMtG,EAAOsW;AAChB;;AClCO,MAAMC,IAA0GJ,CAAAA,OACrH,MAAA;AAAA,MAAA7F,IAAAC,EAAAuB,EAAA;AAAAxB,SAAAA,EAAAuF,UACsCjO,CAAAA,MAAKuO,EAAMK,QAAQ5O,CAAC,GAAC2J,EAAAjB,GACtD6F,MAAAA,EAAMvE,QAAQ,GAAAoE,MAAA1F;AAAA;AAGpB2F,GAAA,CAAA,OAAA,CAAA;;;ACAM,MAAMQ,KAAqBA,MAAM;AACtC,QAAM,CAAC1W,GAAOoE,CAAQ,IAAIkM,EAAQ,GAC5B,CAACqG,GAAUC,CAAW,IAAI1H,EAAY,GAEtC2H,IAAY5U,CAAAA,MAA2B;AAC3CyB,IAAAA,GAAO,CAAC1D,GAAOoE,CAAQ,GAAGnC,CAAI,GAC9B/B,GAAM,CAACF,GAAOoE,CAAQ,CAAC;AAAA,KAGnB0S,IAAuB7D,CAAAA,MAAiB;AAC5C,UAAM/G,IAAS+G,EAAM/G;AAErB,IAAIA,GAAQuG,SACV2B,QAAQlG,QAAQlO,EAAO,EAACqF,QAAQoN,MAAM1E,QAAQ7B,EAAOuG,KAAK,CAAC,EAAEnE,KAAM+F,CAAAA,MAAQ;AACzE,UAAIA,GAAK;AACP,cAAME,IAAU,OAAMF,CAAI;AAE1BlQ,QAAAA,GAAO,CAACnE,GAAOoE,CAAQ,GAAGmQ,CAAM,GAChCrU,GAAM,CAACF,GAAOoE,CAAQ,CAAC;AAAA,MACzB;AAAA,IACF,CAAC;AAAA,KAIC2S,IAAqBA,MAAM;AAC/BJ,IAAAA,EAAQ,GAAIK;;AAGd,UAAA,MAAA;AAAA,QAAAzG,IAAAC,EAAAyG,EAAA,GAAAvG,IAAAH,EAAAI,YAAAC,IAAAF,EAAAO,aAAAiG,IAAAtG,EAAAD,YAAA,CAAAwG,GAAAC,CAAA,IAAApG,EAAAkG,EAAAjG,WAAA,GAAAoG,IAAAF,EAAAlG,aAAA,CAAAqG,GAAAC,CAAA,IAAAvG,EAAAqG,EAAApG,WAAA,GAAAuG,IAAAF,EAAArG,aAAA,CAAAwG,GAAAC,CAAA,IAAA1G,EAAAwG,EAAAvG,WAAA,GAAA0G,IAAAF,EAAAxG,aAAA,CAAA2G,GAAAC,CAAA,IAAA7G,EAAA2G,EAAA1G,WAAA;AAAA8D,WAAAA,GAAArE,GAAA,eAEwBnJ,EAAM,GAAAiK,EAAAZ,GAAAa,EAEvBC,GAAI;AAAA,MAAA,IAACC,OAAI;AAAA,eAAE3R,EAAK,EAAGqF,QAAQyS,QAAQC,WAAW/X,EAAO,EAACqF,QAAQyS,QAAQE,QAAQhY,EAAK,EAAGqF,QAAQyS,QAAQG;AAAAA,MAAM;AAAA,MAAA,IAAApG,WAAA;AAAA,YAAAC,IAAAtB,EAAAC,CAAA,GAAAI,IAAAiB,EAAAnB,YAAA,CAAAG,GAAAC,CAAA,IAAAC,EAAAH,EAAAI,WAAA,GAAAC,IAAAJ,EAAAG,aAAA,CAAAE,GAAAC,CAAA,IAAAJ,EAAAE,EAAAD,WAAA,GAAAI,IAAAF,EAAAF,aAAA,CAAAK,GAAAC,CAAA,IAAAP,EAAAK,EAAAJ,WAAA;AAAAO,eAAAA,EAAAM,GAAAL,EAExGC,GAAI;AAAA,UAAA,IAACC,OAAI;AAAA,mBAAE3R,EAAO,EAACqF,QAAQyS,QAAQC;AAAAA,UAAO;AAAA,UAAA,IAAAlG,WAAA;AAAA,mBAAAJ,EACxC+E,GAAM;AAAA,cAACC,SAASA,MAAMI,EAASqB,EAAiBC,OAAO;AAAA,cAAC,IAAAtG,WAAA;AAAA,uBAAArB,EAAAuB,EAAA;AAAA,cAAA;AAAA,YAAA,CAAA;AAAA,UAAA;AAAA,SAAAjB,GAAAA,GAAAC,CAAA,GAAAS,EAAAM,GAAAL,EAM1DC,GAAI;AAAA,UAAA,IAACC,OAAI;AAAA,mBAAE3R,EAAO,EAACqF,QAAQyS,QAAQE;AAAAA,UAAI;AAAA,UAAA,IAAAnG,WAAA;AAAA,mBAAAJ,EACrC+E,GAAM;AAAA,cAACC,SAASA,MAAMI,EAASqB,EAAiBE,IAAI;AAAA,cAAC,IAAAvG,WAAA;AAAA,uBAAArB,EAAA4B,EAAA;AAAA,cAAA;AAAA,YAAA,CAAA;AAAA,UAAA;AAAA,SAAAjB,GAAAA,GAAAC,CAAA,GAAAI,EAAAM,GAAAL,EAMvDC,GAAI;AAAA,UAAA,IAACC,OAAI;AAAA,mBAAE3R,EAAO,EAACqF,QAAQyS,QAAQG;AAAAA,UAAM;AAAA,UAAA,IAAApG,WAAA;AAAA,mBAAAJ,EACvC+E,GAAM;AAAA,cAACC,SAASA,MAAMI,EAASqB,EAAiBG,MAAM;AAAA,cAAC,IAAAxG,WAAA;AAAA,uBAAArB,EAAA6B,EAAA;AAAA,cAAA;AAAA,YAAA,CAAA;AAAA,UAAA;AAAA,SAAAf,GAAAA,GAAAC,CAAA,GAAAO;AAAAA,MAAA;AAAA,KAAAqF,GAAAA,GAAAC,CAAA,GAAA5F,EAAAZ,GAAAa,EAQ7DC,GAAI;AAAA,MAAA,IAACC,OAAI;AAAA,eAAE3R,EAAK,EAAGqF,QAAQyS,QAAQQ,SAAStY,EAAO,EAACqF,QAAQyS,QAAQS,aAAavY,EAAK,EAAGqF,QAAQyS,QAAQ5M;AAAAA,MAAI;AAAA,MAAA,IAAA2G,WAAA;AAAA,YAAA2G,IAAAhI,EAAAC,CAAA,GAAAgI,IAAAD,EAAA7H,YAAA,CAAA+H,GAAAC,CAAA,IAAA3H,EAAAyH,EAAAxH,WAAA,GAAA2H,IAAAF,EAAAzH,aAAA,CAAA4H,GAAAC,CAAA,IAAA9H,EAAA4H,EAAA3H,WAAA,GAAA8H,IAAAF,EAAA5H,aAAA,CAAA+H,GAAAC,CAAA,IAAAjI,EAAA+H,EAAA9H,WAAA;AAAAO,eAAAA,EAAAgH,GAAA/G,EAEzGC,GAAI;AAAA,UAAA,IAACC,OAAI;AAAA,mBAAE3R,EAAO,EAACqF,QAAQyS,QAAQQ;AAAAA,UAAK;AAAA,UAAA,IAAAzG,WAAA;AAAA,mBAAAJ,EACtC+E,GAAM;AAAA,cAACC,SAASA,MAAMI,EAASqB,EAAiBgB,KAAK;AAAA,cAAC,IAAArH,WAAA;AAAA,uBAAArB,EAAA2I,EAAA;AAAA,cAAA;AAAA,YAAA,CAAA;AAAA,UAAA;AAAA,SAAAT,GAAAA,GAAAC,CAAA,GAAAnH,EAAAgH,GAAA/G,EAMxDC,GAAI;AAAA,UAAA,IAACC,OAAI;AAAA,mBAAE3R,EAAO,EAACqF,QAAQyS,QAAQS;AAAAA,UAAS;AAAA,UAAA,IAAA1G,WAAA;AAAA,mBAAAJ,EAC1C+E,GAAM;AAAA,cAACC,SAASA,MAAMI,EAASqB,EAAiBkB,SAAS;AAAA,cAAC,IAAAvH,WAAA;AAAA,uBAAArB,EAAA6I,EAAA;AAAA,cAAA;AAAA,YAAA,CAAA;AAAA,UAAA;AAAA,SAAAR,GAAAA,GAAAC,CAAA,GAAAtH,EAAAgH,GAAA/G,EAQ5DC,GAAI;AAAA,UAAA,IAACC,OAAI;AAAA,mBAAE3R,EAAO,EAACqF,QAAQyS,QAAQ5M;AAAAA,UAAI;AAAA,UAAA,IAAA2G,WAAA;AAAA,mBAAAJ,EACrC+E,GAAM;AAAA,cAACC,SAASA,MAAMI,EAASqB,EAAiBoB,IAAI;AAAA,cAAC,IAAAzH,WAAA;AAAA,uBAAArB,EAAA+I,EAAA;AAAA,cAAA;AAAA,YAAA,CAAA;AAAA,UAAA;AAAA,SAAAP,GAAAA,GAAAC,CAAA,GAAAT;AAAAA,MAAA;AAAA,KAAAlB,GAAAA,GAAAC,CAAA,GAAA/F,EAAAZ,GAAAa,EAQ3DC,GAAI;AAAA,MAAA,IAACC,OAAI;AAAA,eAAE3R,EAAK,EAAGqF,QAAQyS,QAAQ0B,QAAQxZ,EAAO,EAACqF,QAAQyS,QAAQ2B,eAAezZ,EAAK,EAAGqF,QAAQyS,QAAQ4B;AAAAA,MAAQ;AAAA,MAAA,IAAA7H,WAAA;AAAA,YAAA8H,IAAAnJ,EAAAC,CAAA,GAAAmJ,IAAAD,EAAAhJ,YAAA,CAAAkJ,GAAAC,CAAA,IAAA9I,EAAA4I,EAAA3I,WAAA,GAAA8I,IAAAF,EAAA5I,aAAA,CAAA+I,GAAAC,CAAA,IAAAjJ,EAAA+I,EAAA9I,WAAA,GAAAiJ,IAAAF,EAAA/I,aAAA,CAAAkJ,GAAAC,CAAA,IAAApJ,EAAAkJ,EAAAjJ,WAAA;AAAAO,eAAAA,EAAAmI,GAAAlI,EAE9GC,GAAI;AAAA,UAAA,IAACC,OAAI;AAAA,mBAAE3R,EAAO,EAACqF,QAAQyS,QAAQ0B;AAAAA,UAAI;AAAA,UAAA,IAAA3H,WAAA;AAAA,mBAAAJ,EACrC+E,GAAM;AAAA,cAACC,SAASA,MAAMI,EAASqB,EAAiBmC,IAAI;AAAA,cAAC,IAAAxI,WAAA;AAAA,uBAAArB,EAAA8J,EAAA;AAAA,cAAA;AAAA,YAAA,CAAA;AAAA,UAAA;AAAA,SAAAT,GAAAA,GAAAC,CAAA,GAAAtI,EAAAmI,GAAAlI,EAWvDC,GAAI;AAAA,UAAA,IAACC,OAAI;AAAA,mBAAE3R,EAAO,EAACqF,QAAQyS,QAAQ2B;AAAAA,UAAW;AAAA,UAAA,IAAA5H,WAAA;AAAA,mBAAAJ,EAC5C+E,GAAM;AAAA,cAACC,SAASA,MAAMI,EAASqB,EAAiBqC,WAAW;AAAA,cAAC,IAAA1I,WAAA;AAAA,uBAAArB,EAAAgK,EAAA;AAAA,cAAA;AAAA,YAAA,CAAA;AAAA,UAAA;AAAA,SAAAR,GAAAA,GAAAC,CAAA,GAAAzI,EAAAmI,GAAAlI,EAW9DC,GAAI;AAAA,UAAA,IAACC,OAAI;AAAA,mBAAE3R,EAAO,EAACqF,QAAQyS,QAAQ4B;AAAAA,UAAQ;AAAA,UAAA,IAAA7H,WAAA;AAAA,mBAAAJ,EACzC+E,GAAM;AAAA,cAACC,SAASA,MAAMI,EAASqB,EAAiBuC,QAAQ;AAAA,cAAC,IAAA5I,WAAA;AAAA,uBAAArB,EAAAkK,EAAA;AAAA,cAAA;AAAA,YAAA,CAAA;AAAA,UAAA;AAAA,SAAAP,GAAAA,GAAAC,CAAA,GAAAT;AAAAA,MAAA;AAAA,KAAAlC,GAAAA,GAAAC,CAAA,GAAAlG,EAAAZ,GAAAa,EAa/DC,GAAI;AAAA,MAAA,IAACC,OAAI;AAAA,eAAE3R,EAAK,EAAGqF,QAAQyS,QAAQ6C,QAAQ3a,EAAO,EAACqF,QAAQyS,QAAQ8C,SAAS5a,EAAK,EAAGqF,QAAQyS,QAAQ+C;AAAAA,MAAM;AAAA,MAAA,IAAAhJ,WAAA;AAAA,YAAAiJ,IAAAtK,EAAAC,CAAA,GAAAsK,IAAAD,EAAAnK,YAAA,CAAAqK,GAAAC,CAAA,IAAAjK,EAAA+J,EAAA9J,WAAA,GAAAiK,IAAAF,EAAA/J,aAAA,CAAAkK,GAAAC,CAAA,IAAApK,EAAAkK,EAAAjK,WAAA,GAAAoK,IAAAF,EAAAlK,aAAA,CAAAqK,GAAAC,CAAA,IAAAvK,EAAAqK,EAAApK,WAAA;AAAAO,eAAAA,EAAAsJ,GAAArJ,EAEtGC,GAAI;AAAA,UAAA,IAACC,OAAI;AAAA,mBAAE3R,EAAO,EAACqF,QAAQyS,QAAQ6C;AAAAA,UAAI;AAAA,UAAA,IAAA9I,WAAA;AAAA,mBAAAJ,EACrC+E,GAAM;AAAA,cAACC,SAASA,MAAMI,EAASqB,EAAiBsD,IAAI;AAAA,cAAC,IAAA3J,WAAA;AAAA,uBAAArB,EAAAiL,EAAA;AAAA,cAAA;AAAA,YAAA,CAAA;AAAA,UAAA;AAAA,SAAAT,GAAAA,GAAAC,CAAA,GAAAzJ,EAAAsJ,GAAArJ,EAMvDC,GAAI;AAAA,UAAA,IAACC,OAAI;AAAA,mBAAE3R,EAAO,EAACqF,QAAQyS,QAAQ8C;AAAAA,UAAK;AAAA,UAAA,IAAA/I,WAAA;AAAA,mBAAAJ,EACtC+E,GAAM;AAAA,cAACC,SAASA,MAAMI,EAASqB,EAAiBwD,KAAK;AAAA,cAAC,IAAA7J,WAAA;AAAA,uBAAArB,EAAAmL,EAAA;AAAA,cAAA;AAAA,YAAA,CAAA;AAAA,UAAA;AAAA,SAAAR,GAAAA,GAAAC,CAAA,GAAA5J,EAAAsJ,GAAArJ,EASxDC,GAAI;AAAA,UAAA,IAACC,OAAI;AAAA,mBAAE3R,EAAO,EAACqF,QAAQyS,QAAQ+C;AAAAA,UAAM;AAAA,UAAA,IAAAhJ,WAAA;AAAA,mBAAAJ,EACvC+E,GAAM;AAAA,cAACC,SAASM;AAAAA,cAAkB,IAAAlF,WAAA;AAAA,uBAAArB,CAAAA,EAAAoL,EAAA,IAAA,MAAA;AAAA,sBAAAC,IAAArL,EAAAsL,EAAA;AAAAC,yBAAAA,GAKkDnF,GAAWiF,CAAA,GAAAA,EAAAlH,iBAAA,UAArCmC,CAAmB,GAAA+E,EAAApU,MAAAuU,YAAA,WAAA,MAAA,GAAAH;AAAAA,gBAAA,GAAA,CAAA;AAAA,cAAA;AAAA,YAAA,CAAA;AAAA,UAAA;AAAA,SAAAP,GAAAA,GAAAC,CAAA,GAAAT;AAAAA,MAAA;AAAA,KAAAlD,GAAAA,GAAAC,CAAA,GAAAtH;AAAAA,EAAA;AAQ5F;;AC/JO,MAAM0L,KAAoBA,MAAM;AACrC,QAAM,CAACjc,GAAOoE,CAAQ,IAAIkM,EAAQ,GAC5B,CAAC4L,GAAMC,CAAO,IAAIjN,EAAa5H,GAAStH,EAAO,CAAA,CAAC;AAEtDoc,SAAAA,GAAa,MAAM;AACjBD,IAAAA,EAAQ7U,GAAStH,EAAO,CAAA,CAAC;AAAA,EAC3B,CAAC,GAEDyU,GAAQ,MAAM;AACZ,UAAM4H,IAAiBC,OAAOC,WAAW,8BAA8B,GACjEC,IAAYC,CAAAA,MAAgC;AAChD,YAAM;AAAA,QAAExc,QAAAA;AAAAA,QAAQmM,MAAAA;AAAAA,QAAMe,WAAAA;AAAAA,MAAW,IAAGnN,EAAK;AAEzC,MAAIoM,EAAKsQ,cACPvP,EAAUkJ,QAAQ,YAAY;AAC5B,cAAM9P,IAAU,MAAMC,GAAmB,CAACxG,GAAOoE,CAAQ,CAAC;AAE1DnE,QAAAA,EAAOqW,SAAS;AAAA,UAAE/P,SAAAA;AAAAA,QAAQ,CAAC,GAC3B4V,EAAQ7U,GAAStH,EAAO,CAAA,CAAC;AAAA,MAC3B,CAAC,IAEDqc,EAAexH,oBAAoB,UAAU2H,CAAQ;AAAA;AAIzDH,IAAAA,EAAe1H,iBAAiB,UAAU6H,CAAQ;AAAA,EACpD,CAAC,IAED,MAAA;AAAA,QAAAjM,IAAAC,EAAAuB,EAAA,GAAArB,IAAAH,EAAAI;AAAAwE,WAAAA,SAAAJ,GAAArE,GAAA,QACuB;AAAA,IAAYwL,EAAM,EAACS,KAAK;AAAA,GAAM,CAAE;AAAA;AAAA,EAAOpV,EAAO,EAAC,CAAA,GAAAgJ;AAAAA,EAAA;AAExE;;ACzBO,MAAMqM,KAAuExG,CAAAA,MAAU;AAC5F,QAAM,CAACpW,GAAOoE,CAAQ,IAAIkM,EAAQ,GAC5BuM,IAAWzQ,CAAAA,MAAsB;AACrChI,IAAAA,EAAS0I,EAAS9M,KAAS;AAAA,MAAEoM,MAAAA;AAAAA,IAAM,CAAA,CAAC;AAAA;AAGtC,UAAA,MAAA;AAAA,QAAAmE,IAAAC,EAAAuB,EAAA,GAAAnB,IAAAL,EAAAI,YAAA,CAAAmB,GAAAf,CAAA,IAAAC,EAAAJ,EAAAK,WAAA,GAAAe,IAAAF,EAAAb,aAAA,CAAA6L,GAAA1L,CAAA,IAAAJ,EAAAgB,EAAAf,WAAA,GAAA6D,IAAAgI,EAAA7L,aAAA,CAAAJ,GAAAU,CAAA,IAAAP,EAAA8D,EAAA7D,WAAA,GAAAP,IAAAG,EAAAI,aAAAH,IAAAJ,EAAAO,aAAA,CAAAC,GAAAyH,CAAA,IAAA3H,EAAAF,EAAAG,WAAA;AAAA8K,WAAAA,GACgCc,GAAOtM,CAAA,GAAAwM,GAAAxM,GAAAyM,GAAMld,EAAuB,GAAA,IAAA,EAAA,GAAA0R,EAAAjB,GAAAkB,EAC/DwK,IAAM,CAAA,CAAA,GAAAnK,GAAAf,CAAA,GAAAS,EAAAjB,GAAAkB,EACNC,GAAI;AAAA,MAAA,IAACC,OAAI;AAAA,eAAE3R,EAAK,EAAGqF,QAAQoN,MAAMoB,aAAa7T,IAAQqF,QAAQoN,MAAMS;AAAAA,MAAW;AAAA,MAAA,IAAArB,WAAA;AAAA,eAAAJ,EAC7Ea,IAAQ,CAAA,CAAA;AAAA,MAAA;AAAA,KAAAwK,GAAAA,GAAA1L,CAAA,GAAAI,EAAAjB,GAAAkB,EAEVC,GAAI;AAAA,MAAA,IAACC,OAAI;AAAA,eAAE3R,EAAO,EAACqF,QAAQ6M,UAAU4F;AAAAA,MAAO;AAAA,MAAA,IAAAjG,WAAA;AAAA,eAAAJ,EAC1CiF,IAAO,CAAA,CAAA;AAAA,MAAA;AAAA,KAAA7F,GAAAA,GAAAU,CAAA,GAAAC,EAAAd,GAAAe,EAGP0E,IAAM;AAAA,MAAA,IAACjK,SAAM;AAAA,eAAEkK,EAAMlK;AAAAA,MAAM;AAAA,IAAA,CAAA,CAAA,GAAAsF,EAAAjB,GAAAkB,EAE7BC,GAAI;AAAA,MAAA,IAACC,OAAI;AAAA,eAAE3R,EAAK,EAAGqF,QAAQuM,eAAe5R,EAAK,EAAGqF,QAAQ6M,UAAUC;AAAAA,MAAW;AAAA,MAAA,IAAAN,WAAA;AAAA,eAAAJ,EAC7EpB,IAAO;AAAA,UAACrJ,OAAO,CAAChH,GAAOoE,CAAQ;AAAA,QAAC,CAAA;AAAA,MAAA;AAAA,KAAA8M,GAAAA,GAAAyH,CAAA,GAAA1C,MAAA1F;AAAAA,EAAA;AAIzC,GC7BM0M,KAAaC,GAAiC,CAAC,MAAMpO,GAAU,GAAIpH,CAAAA,MAAU,OAAOA,KAAU,aAAaA,EAAMoH,GAAY,CAAA,IAAIpH,CAAM,CAAC,GACxIyV,KAA+E/G,CAAAA;AAAAA;AAAAA,EAEjF3E,EACCwL,GAAWG,UAAQ;AAAA,IAAA,IAAC1V,QAAK;AAAA,aAAE0O,EAAMpP;AAAAA,IAAK;AAAA,IAAA,IAAA6K,WAAA;AAAA,aACpCuE,EAAMvE;AAAAA,IAAQ;AAAA,EAAA,CAAA;AAAA,GAKRvB,IAAWA,MACf+M,GAAWJ,EAAU,GAGjBK,KAAsElH,CAAAA,MACjF3E,EACG0L,IAAW;AAAA,EAAA,IAACnW,QAAK;AAAA,WAAEoP,EAAMpP;AAAAA,EAAK;AAAA,EAAA,IAAA6K,WAAA;AAAA,WAAAJ,EAC5BmL,IAAI;AAAA,MAAA,IAAC5V,QAAK;AAAA,eAAEoP,EAAMpP;AAAAA,MAAK;AAAA,MAAA,IAAEkF,SAAM;AAAA,eAAEkK,EAAMlK;AAAAA,MAAM;AAAA,IAAA,CAAA;AAAA,EAAA;AAAA,CAAA;;ACX7C,MAAMlL,KAAuCuc,CAAcA,MAAAA,GACrDC,KAAwCnY,CAAeA,MAAAA,GACvDoY,KAAuDvY,CAAAA,MAAcA,GAErEwY,KAAUA,CAACxR,GAAqB7G,IAAuB,OAA8B;AAC1F2B,QAAAA,IAAQiI,GAAU5J,CAAO;AAGJ,SAAAsY,MACZC,GAAA,MAAAnM,EAAO6L,IAAG;AAAA,IAACtW,OAAAA;AAAAA,IAAckF,QAAAA;AAAAA,EAAAA,CAAkB,GAAEA,CAAM,GAG3DwC,GAAa1H,CAAK;AAC3B,GAEaoE,KAAMA,CAACc,GAAqB7G,IAAuB,OACjC6G,EAAO2R,cAAche,EAAyB,IAGlE6d,GAAQxR,GAAQ7G,CAAO,IAGzByY,GAAO5R,GAAQ7G,CAAO,GAGlB0Y,KAAYA,CAAkC;AAAA,EAAE3Y,KAAAA,IAAM;AAAA,EAAInD,MAAAA;AAAAA,EAAMyF,OAAAA;AAAsE,MAC1I,IAAIsW,MAAM;AAAA,EAAE5Y,KAAAA;AAAAA,EAAKnD,MAAMA,KAAQ;AAAA,GAAmC;AAAA,EACvEgc,KAAKA,CAAC/R,GAAQgS,GAAgCC,MACxCD,MAAS,WAAW,CAAChS,EAAOgS,CAAI,KAClChS,EAAOxE,QAAQA,KAEX9C,GAAUsH,EAAOxE,KAAK,IACjBwE,EAAOxE,MAAM4G,KAAK8P,CAAOlS,MAAAA,EAAOxE,QAAQ0W,CAAG,IAG7ClS,EAAOxE,SAGTwE,EAAOgS,CAAI;AACpB,CACD,GAGUhZ,KAAS6Y,IAETD,KAASA,CAAC5R,GAAqB7G,IAAuB,OAA8B;AACzF2B,QAAAA,IAAQiI,GAAU5J,CAAO;AAGjBgZ,SAAAA,GAAA,MAAA5M,EAAO6L,IAAG;AAAA,IAACtW,OAAAA;AAAAA,IAAckF,QAAAA;AAAAA,EAAAA,CAAkB,GAAEA,CAAM,GAG1DwC,GAAa1H,CAAK;AAC3B,GAEasX,KAAiBA,CAACjZ,IAAuB,QACtC4J,GAAU5J,CAAO,GAItB,KAMEsY,KAA2BA,MAAM;AAG5C,MAAI9V,GAAE8N;AAAI2G,MAAAA,OAAOiC,SAAOjC,OAAOiC,OAAK;AAAA,IAACC,QAAO,CAAE;AAAA,IAACC,+BAAcC,QAAM;AAAA,IAAEtW,GAAE,CAAC;AAAA,EAAA,IAAIuN,IAAE9N,CAAAA,MAAGA,KAAGA,EAAE8W,iBAAe9W,EAAE8W,aAAa,SAAS,IAAE9W,IAAE8N,EAAE9N,EAAE+W,QAAM/W,EAAE+W,gBAAgBC,OAAKhX,EAAE+W,OAAK/W,EAAEiX,UAAU,IAAG,CAAC,SAAS,OAAO,EAAE5K,QAAS6K,CAAGrK,MAAAA,SAASC,iBAAiBoK,GAAGA,CAAAA,MAAG;AAAC,QAAIC,IAAED,EAAEE,gBAAcF,EAAEE,aAAa,EAAE,CAAC,KAAGF,EAAE7S,QAAOa,IAAE4I,EAAEqJ,CAAC;AAAEjS,IAAAA,KAAG,CAAClF,EAAE4W,UAAUS,IAAInS,CAAC,KAAGlF,EAAE2W,OAAOW,KAAK,CAACpS,GAAEgS,CAAC,CAAC;AAAA,EAAG,CAAA,CAAE,GAAElX,EAAEuX,OAAK,CAACzJ,GAAEoJ,MAAI;AAAClX,MAAEO,EAAEuN,CAAC,IAAE,CAAC,IAAIvB,QAAS,CAACvM,GAAE8N,MAAIoJ,IAAElX,CAAE,GAAEkX,CAAC;AAAA,KAAGlX,EAAEwX,MAAI,CAAC1J,GAAEoJ,GAAEC,MAAI;AAAC,KAACA,IAAEnX,EAAEO,EAAEuN,CAAC,MAAIqJ,EAAE,CAAC,EAAED,CAAC,GAAElX,EAAEO,EAAEuN,CAAC,IAAE,CAACoJ,CAAC;AAAA,EAAA,GAAGlX,EAAEyX,QAAM3J,CAAAA,MAAG;AAAQ9N,WAAAA,EAAEO,EAAEuN,CAAC;AAAA,EAAG9N,GAAAA,EAAEoF,OAAK,CAAC0I,GAAEoJ,MAAI;AAAIA,QAAAA,IAAElX,EAAEO,EAAEuN,CAAC;AAAE,aAAOoJ,EAAE,CAAC;AAAA,EAAA;AAC5gB,GAEapR,KAAOA,CAAC4R,GAA+Bla,IAAuB,OAAO;AAC1EwH,QAAAA,IAAW2D,EAAAuB,EAAA,GACX7E,IAAMqS,EAAS7X;AAErB6X,EAAAA,EAAS1c,MAAMgK,CAAW,GAC1B0S,EAAS9X,MAAM+X,UAAU;AAEnB7Q,QAAAA,IAAWmP,GAAOjR,GAAa;AAAA,IAAEK,KAAAA;AAAAA,IAAK,GAAG7H;AAAAA,EAAAA,CAAS;AAExD,SAAIka,EAASE,QACFA,EAAAA,KAAK9K,iBAAiB,UAAU,MAAM;AACpCjN,IAAAA,EAAAA,QAAQiH,EAASzK;EAAO,CAClC,GAGIyK;AACT;"}